!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dataCore=t():e.dataCore=t()}(self,(function(){return function(){var e={828:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},50:function(e,t,n){e=n.nmd(e);var r,i=n(570).default;r=function(){function e(e){if(!e)return!1;var t=Object.prototype.toString.call(e);return"[object Function]"==t||"[object AsyncFunction]"==t}function t(){return Date.now&&e(Date.now)?Date.now():(new Date).getTime()}function n(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)}function r(){if("function"==typeof Uint32Array){var e="";if("undefined"!=typeof crypto?e=crypto:"undefined"!=typeof msCrypto&&(e=msCrypto),n(e)&&e.getRandomValues){var t=new Uint32Array(1);return e.getRandomValues(t)[0]/Math.pow(2,32)}}return cn(1e19)/1e19}function a(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}function s(e,t){this.lockGetPrefix=e||"lock-get-prefix",this.lockSetPrefix=t||"lock-set-prefix"}function c(e){return"function"==typeof e||!(!e||"object"!=i(e))&&c(e.listener)}function l(){this._events={}}function u(e){var t=e;try{t=decodeURIComponent(e)}catch(n){t=e}return t}function d(e){e=e||"";for(var t=function(){function e(){}return"function"!=typeof Object.create?(e.prototype=null,new e):Object.create(null)}(),n=e.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("=");if(-1!==i){var a=n[r].substring(0,i),o=n[r].substring(i+1);a=u(a),o=u(o),t[a]=o}}return t}function p(e){return"[object String]"==Object.prototype.toString.call(e)}function f(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function g(e){var t=function(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)};return t.prototype.setUrl=function(e){this._parse(e)},t.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},t.prototype.addQueryString=function(e){if("object"!=i(e))return!1;var t=this._values.QueryString||"";for(var n in e)t=new RegExp(n+"[^&]+").test(t)?t.replace(new RegExp(n+"[^&]+"),n+"="+e[n]):"&"===t.slice(-1)?t+n+"="+e[n]:""===t?n+"="+e[n]:t+"&"+n+"="+e[n];this._values.QueryString=t},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,(e+=this._values.QueryString?"?"+this._values.QueryString:"")+(this._values.Fragment?"#"+this._values.Fragment:"")},t.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);t||on.log("URLParser::_parse -> Invalid URL");var n=e.split("#"),r=n[0],i=n.slice(1).join("#");for(var a in t=this._regex.exec(r),this._fields)void 0!==t[this._fields[a]]&&(this._values[a]=t[this._fields[a]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname,this._values.Fragment=i},new t(e)}function _(e){var t={};if("function"==typeof window.URL&&function(){try{return"http://modernizr.com/"===new URL("http://modernizr.com/").href}catch(e){return!1}}())(t=new URL(e)).searchParams||(t.searchParams=function(){var e=d(t.search);return{get:function(t){return e[t]}}}());else{if(p(e)||(e=String(e)),e=f(e),!1===/^https?:\/\/.+/.test(e))return void on.log("Invalid URL");var n=g(e);t.hash=n._values.Fragment,t.host=n._values.Host?n._values.Host+(n._values.Port?":"+n._values.Port:""):"",t.href=n._values.URL,t.password=n._values.Password,t.pathname=n._values.Path,t.port=n._values.Port,t.search=n._values.QueryString?"?"+n._values.QueryString:"",t.username=n._values.Username,t.hostname=n._values.Hostname,t.protocol=n._values.Protocol?n._values.Protocol+":":"",t.origin=n._values.Origin?n._values.Origin+(n._values.Port?":"+n._values.Port:""):"",t.searchParams=function(){var e=d("?"+n._values.QueryString);return{get:function(t){return e[t]}}}()}return t}function h(e){return!(!e||1!==e.nodeType)}function v(e){return void 0===e}function y(t){return Array.isArray&&e(y)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function b(e){return new un(e)}function w(e,t,n,r){function i(e){return e&&(e.preventDefault=i.preventDefault,e.stopPropagation=i.stopPropagation,e._getPath=i._getPath),e}function a(e,t,n,r){return function(a){if(a=a||i(window.event)){a.target=a.srcElement;var o,s,c=!0;return"function"==typeof n&&(o=n(a)),s=t.call(e,a),"beforeunload"!==r?(!1!==o&&!1!==s||(c=!1),c):void 0}}}i._getPath=function(){return this.path||this.composedPath&&this.composedPath()||b(this.target).getParents()},i.preventDefault=function(){this.returnValue=!1},i.stopPropagation=function(){this.cancelBubble=!0};var o=function(e,t,n){if(void 0===r&&"click"===t&&(r=!0),e&&e.addEventListener)e.addEventListener(t,(function(e){e._getPath=i._getPath,n.call(this,e)}),r);else{var o="on"+t,s=e[o];e[o]=a(e,n,s,t)}};o.apply(null,arguments)}function S(e){var t="pushState"in window.history?"popstate":"hashchange";w(window,t,e)}function k(e){if(e)return void 0!==window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:null;if(void 0!==window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){on.log(e)}}}function O(e,t,n){if(null==e)return!1;if(pn&&e.forEach===pn)e.forEach(t,n);else if(y(e))for(var r=0,i=e.length;r<i;r++)r in e&&t.call(n,e[r],r,e);else for(var a in e)fn.call(e,a)&&t.call(n,e[a],a,e)}function T(e){return O(Array.prototype.slice.call(arguments,1),(function(t){for(var n in t)gn.call(t,n)&&void 0!==t[n]&&(e[n]=t[n])})),e}function A(e){function t(e){if(!e)return"";try{return JSON.parse(e)}catch(e){return{}}}e.timeout=e.timeout||2e4,e.credentials=void 0===e.credentials||e.credentials;var r=k(e.cors);if(!r)return!1;e.type||(e.type=e.data?"POST":"GET");var a,o=(e=T({success:function(){},error:function(){}},e)).success,s=e.error;e.success=function(e){o(e),a&&(clearTimeout(a),a=null)},e.error=function(e){s(e),a&&(clearTimeout(a),a=null)},a=setTimeout((function(){!function(){try{r&&"object"==i(r)&&r.abort&&r.abort()}catch(e){on.log(e)}a&&(clearTimeout(a),a=null,e.error&&e.error(),r.onreadystatechange=null,r.onload=null,r.onerror=null)}()}),e.timeout),"undefined"!=typeof XDomainRequest&&r instanceof XDomainRequest&&(r.onload=function(){e.success&&e.success(t(r.responseText)),r.onreadystatechange=null,r.onload=null,r.onerror=null},r.onerror=function(){e.error&&e.error(t(r.responseText),r.status),r.onreadystatechange=null,r.onerror=null,r.onload=null}),r.onreadystatechange=function(){try{4==r.readyState&&(r.status>=200&&r.status<300||304==r.status?e.success(t(r.responseText)):e.error(t(r.responseText),r.status),r.onreadystatechange=null,r.onload=null)}catch(e){r.onreadystatechange=null,r.onload=null}},r.open(e.type,e.url,!0);try{e.credentials&&(r.withCredentials=!0),n(e.header)&&O(e.header,(function(e,t){r.setRequestHeader&&r.setRequestHeader(t,e)})),e.data&&(e.cors||r.setRequestHeader&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===e.contentType?r.setRequestHeader&&r.setRequestHeader("Content-type","application/json; charset=UTF-8"):r.setRequestHeader&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){on.log(e)}r.send(e.data||null)}function P(e,t){var n=[];return null==e?n:Array.prototype.map&&e.map===Array.prototype.map?e.map(t):(O(e,(function(e,r,i){n.push(t(e,r,i))})),n)}function N(e){var t=[];try{t=P(atob(e).split(""),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}))}catch(e){t=[]}try{return decodeURIComponent(t.join(""))}catch(e){return t.join("")}}function j(e){var t="";try{t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}catch(n){t=e}return t}function I(e){return O(Array.prototype.slice.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&void 0===e[n]&&(e[n]=t[n])})),e}function x(e){var t=e;try{t=decodeURI(e)}catch(n){t=e}return t}function C(e){return"[object Date]"==Object.prototype.toString.call(e)}function E(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())}function D(e){return O(Array.prototype.slice.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(n(t[r])&&n(e[r])?T(e[r],t[r]):e[r]=t[r])})),e}function L(e,t,n){var r=Object.prototype.hasOwnProperty;if(e.filter)return e.filter(t);for(var i=[],a=0;a<e.length;a++)if(r.call(e,a)){var o=e[a];t.call(n,o,a,e)&&i.push(o)}return i}function $(e,t,n){t=t||"domain_test";var r=function(e){return"string"==typeof e&&e.match(/^[a-zA-Z0-9\u4e00-\u9fa5\-\.]+$/)?e:""}(e=e||location.hostname),i=r.split(".");if(y(i)&&i.length>=2&&!/^(\d+\.)+\d+$/.test(r))for(var a="."+i.splice(i.length-1,1);i.length>0;)if(a="."+i.splice(i.length-1,1)+a,_n.set(t,"true",0,null,n,"; domain="+a),-1!==document.cookie.indexOf(t+"=true"))return _n.set(t,"true","-1s",null,n,"; domain="+a),a;return""}function U(e){if(!p(e))return null;var t,n=e.split(">");return t=function e(t){var r,i=n.shift();if(!i)return t;try{r=function(e,t){var n;if("body"===(e=f(e)))return document.getElementsByTagName("body")[0];if(0===e.indexOf("#"))e=e.slice(1),n=document.getElementById(e);else if(e.indexOf(":nth-of-type")>-1){var r=e.split(":nth-of-type");if(!r[0]||!r[1])return null;var i=r[0],a=r[1].match(/\(([0-9]+)\)/);if(!a||!a[1])return null;var o=Number(a[1]);if(!(h(t)&&t.children&&t.children.length>0))return null;for(var s=t.children,c=0;c<s.length;c++)if(h(s[c])&&s[c].tagName.toLowerCase()===i&&0==--o){n=s[c];break}if(o>0)return null}return n||null}(i,t)}catch(e){on.log(e)}return r&&h(r)?e(r):null}(),t&&h(t)?t:null}function B(e,t){var n="",r="";return e.textContent?n=f(e.textContent):e.innerText&&(n=f(e.innerText)),n&&(n=n.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),r=n||"","input"!==t&&"INPUT"!==t||(r=e.value||""),r}function R(e,t){t&&"string"==typeof t||(t="hostname解析异常");var n=null;try{n=_(e).hostname}catch(e){on.log("getHostname传入的url参数不合法！")}return n||t}function M(){try{var e=navigator.appVersion.match(/OS (\d+)[._](\d+)[._]?(\d+)?/);return e&&e[1]?Number.parseInt(e[1],10):""}catch(e){return""}}function H(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=u(e);var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===n||n&&"string"!=typeof n[1]&&n[1].length?"":u(n[1])}function J(e){var t={},n=e.split("?")[1]||"";return n&&(t=d("?"+n)),t}function F(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia}function V(){var e,t={},n=navigator.userAgent.toLowerCase();return(e=n.match(/ qq\/([\d.]+)/))?t.qqBuildinBrowser=Number(e[1].split(".")[0]):(e=n.match(/mqqbrowser\/([\d.]+)/))?t.qqBrowser=Number(e[1].split(".")[0]):(e=n.match(/opera.([\d.]+)/))?t.opera=Number(e[1].split(".")[0]):(e=n.match(/msie ([\d.]+)/))?t.ie=Number(e[1].split(".")[0]):(e=n.match(/edge.([\d.]+)/))?t.edge=Number(e[1].split(".")[0]):(e=n.match(/firefox\/([\d.]+)/))?t.firefox=Number(e[1].split(".")[0]):(e=n.match(/chrome\/([\d.]+)/))?t.chrome=Number(e[1].split(".")[0]):(e=n.match(/version\/([\d.]+).*safari/))?t.safari=Number(e[1].match(/^\d*.\d*/)):(e=n.match(/trident\/([\d.]+)/))&&(t.ie=11),t}function q(e){return p(e)?x(e=f(e)):x(location.href)}function K(e){return p(e)?x(e=f(e)):x(location.pathname)}function W(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0}function z(e,t){if("string"==typeof t)return W(e,t);if(y(t)){for(var n=!1,r=0;r<t.length;r++)if(W(e,t[r])){n=!0;break}return n}}function G(e){if("string"!=typeof e)return 0;var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function Y(e){var t=9007199254740992,n=-9007199254740992,r=0;if(e.length>0)for(var i=e.split(""),a=0;a<i.length;a++){var o=i[a].charCodeAt(),s=31*r+o;if(s>t)for(r=n+r;(s=31*r+o)<n;)r=r/2+o;if(s<n)for(r=t+r;(s=31*r+o)>t;)r=r/2+o;r=31*r+o}return r}function X(e,t){var n=e.indexOf;if(n)return n.call(e,t);for(var r=0;r<e.length;r++)if(t===e[r])return r;return-1}function Z(e){return!(!e||!hn.call(e,"callee"))}function Q(e){return"[object Boolean]"==Object.prototype.toString.call(e)}function ee(e){if(n(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1}function te(e){return"string"==typeof e&&(!1!==/^https?:\/\/.+/.test(e)||(on.log("Invalid URL"),!1))}function ne(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}function re(e){try{JSON.parse(e)}catch(e){return!1}return!0}function ie(e){return"[object Number]"==Object.prototype.toString.call(e)&&/[\d\.]+/.test(String(e))}function ae(t){if(!n(t)||!p(t.callbackName))return on.log("JSONP 请求缺少 callbackName"),!1;t.success=e(t.success)?t.success:function(){},t.error=e(t.error)?t.error:function(){},t.data=t.data||"";var r=document.createElement("script"),i=document.getElementsByTagName("head")[0],a=null,o=!1;if(i.appendChild(r),ie(t.timeout)&&(a=setTimeout((function(){return!o&&(t.error("timeout"),window[t.callbackName]=function(){on.log("call jsonp error")},a=null,i.removeChild(r),void(o=!0))}),t.timeout)),window[t.callbackName]=function(){clearTimeout(a),a=null,t.success.apply(null,arguments),window[t.callbackName]=function(){on.log("call jsonp error")},i.removeChild(r)},t.url.indexOf("?")>-1?t.url+="&callbackName="+t.callbackName:t.url+="?callbackName="+t.callbackName,n(t.data)){var s=[];O(t.data,(function(e,t){s.push(t+"="+e)})),t.data=s.join("&"),t.url+="&"+t.data}r.onerror=function(e){return!o&&(window[t.callbackName]=function(){on.log("call jsonp error")},clearTimeout(a),a=null,i.removeChild(r),t.error(e),void(o=!0))},r.src=t.url}function oe(t){({visibleHandler:e(t.visible)?t.visible:function(){},hiddenHandler:e(t.hidden)?t.hidden:function(){},visibilityChange:null,hidden:null,isSupport:function(){return void 0!==document[this.hidden]},init:function(){void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.listen()},listen:function(){if(this.isSupport()){var e=this;w(document,this.visibilityChange,(function(){document[e.hidden]?e.hiddenHandler():e.visibleHandler()}),1)}else w(window,"focus",this.visibleHandler),w(window,"blur",this.hiddenHandler)}}).init()}function se(e){e=T({success:function(){},error:function(){},appendCall:function(e){document.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&((t=document.createElement("link")).rel="stylesheet",t.href=e.url),"js"===e.type&&((t=document.createElement("script")).async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)}function ce(e,t){t="number"==typeof t?t:13;for(var n=(e=String(e)).split(""),r=0,i=n.length;r<i;r++)n[r].charCodeAt(0)<126&&(n[r]=String.fromCharCode((n[r].charCodeAt(0)+t)%126));return n.join("")}function le(e){return ce(e=String(e),113)}function ue(e){n(e)&&O(e,(function(t,r){n(t)?ue(e[r]):C(t)&&(e[r]=E(t))}))}function de(e){var t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e))}catch(n){t.styleSheet.cssText=e}var n=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("script")[0];n?n.children.length?n.insertBefore(t,n.children[0]):n.appendChild(t):r.parentNode.insertBefore(t,r)}function pe(e){var t=[];return null==e||O(e,(function(e){t[t.length]=e})),t}function fe(e){for(var t,n=[],r={},i=0;i<e.length;i++)(t=e[i])in r||(r[t]=!0,n.push(t));return n}function ge(e,t,n){return n=n||0,e.substr(n,t.length)===t}function _e(){kn.msg.apply(kn,arguments).log()}function he(){kn.msg.apply(kn,arguments).level("warn").log()}function me(){kn.msg.apply(kn,arguments).level("error").log()}function ve(e){var t=On.current_domain;switch(i(t)){case"function":var n=t();return""===n||""===f(n)?"url解析失败":-1!==n.indexOf(".")?n:"url解析失败";case"string":return""===t||""===f(t)?"url解析失败":-1!==t.indexOf(".")?t:"url解析失败";default:var r=$(null,Nn,On.is_secure_cookie);return""===e||""===r?"url解析失败":r}}function ye(e,t){var n="";if(!1===On.cross_subdomain){try{if(t)n=_(t).hostname;else{var r=location.host;v(rn.para.white_list[r])||(n=rn.para.white_list[r])}}catch(e){me(e)}n="string"==typeof n&&""!==n?"sajssdk_2015_"+On.sdk_id+e+"_"+n.replace(/\./g,"_"):"sajssdk_2015_root_"+On.sdk_id+e}else n="sajssdk_2015_cross_"+On.sdk_id+e;return n}function be(){var e="new_user";return In.isSupport()?null!==In.get("sensorsdata_is_new_user")||null!==In.get(ye(e)):null!==xn.get(xn.getNewUserFlagMemoryKey(e))}function we(e,t,r){var i=!(!n(On.heatmap)||!On.heatmap.useCapture);return n(On.heatmap)&&v(On.heatmap.useCapture)&&"click"===t&&(i=!0),w(e,t,r,i)}function Se(){var e=document.referrer,t="baidu.com";if(!e)return!1;try{var n=_(e).hostname;return n&&n.substring(n.length-t.length)===t}catch(e){return!1}}function ke(){var e=J(document.referrer);if(ee(e)||!e.eqid){var t=J(location.href);return e.ck||t.utm_source?"baidu_sem_keyword_id":"baidu_other_keyword_id"}return"baidu_seo_keyword_id"}function Oe(){var e=J(document.referrer);return ee(e)||!e.eqid?ln().replace(/-/g,""):e.eqid}function Te(e,t){return p(e=e||document.referrer)?(0!==(e=x(e=f(e))).indexOf("https://www.baidu.com/")||t||(e=e.split("?")[0]),p(e=e.slice(0,On.max_referrer_string_length))?e:""):"取值异常_referrer异常_"+String(e)}function Ae(e){if(""===(e=e||document.referrer))return!0;var t=$(null,Nn,On.is_secure_cookie),n=R(e);return-1===(n="."+n).indexOf(t)&&""!==t}function Pe(e,t){e=e||document.referrer;var r=On.source_type.keyword;if(document&&p(e)){if(0===e.indexOf("http")){var i=Ne(e),a=J(e);if(ee(a))return On.preset_properties.search_keyword_baidu&&Se()?void 0:"未取到值";var o=null;for(var s in r)if(i===s&&n(a))if(y(o=r[s]))for(s=0;s<o.length;s++){var c=a[o[s]];if(c)return t?{active:c}:c}else if(a[o])return t?{active:a[o]}:a[o];return On.preset_properties.search_keyword_baidu&&Se()?void 0:"未取到值"}return""===e?"未取到值_直接打开":"未取到值_非http的url"}return"取值异常_referrer异常_"+String(e)}function Ne(e){var t=R(e);if(!t||"hostname解析异常"===t)return"";var n={baidu:[/^.*\.baidu\.com$/],bing:[/^.*\.bing\.com$/],google:[/^www\.google\.com$/,/^www\.google\.com\.[a-z]{2}$/,/^www\.google\.[a-z]{2}$/],sm:[/^m\.sm\.cn$/],so:[/^.+\.so\.com$/],sogou:[/^.*\.sogou\.com$/],yahoo:[/^.*\.yahoo\.com$/]};for(var r in n)for(var i=n[r],a=0,o=i.length;a<o;a++)if(i[a].test(t))return r;return"未知搜索引擎"}function je(){function e(e,t){for(var n=0;n<e.length;n++)if(-1!==t.split("?")[0].indexOf(e[n]))return!0}var t="("+On.source_type.utm.join("|")+")\\=[^&]+",n=On.source_type.search,r=On.source_type.social,i=document.referrer||"",a=$n.pageProp.url;if(a){var o=a.match(new RegExp(t));return o&&o[0]?"付费广告流量":e(n,i)?"自然搜索流量":e(r,i)?"社交网站流量":""===i?"直接流量":"引荐流量"}return"获取url异常"}function Ie(e){var t=H(e,"gdt_vid"),n=H(e,"hash_key"),r=H(e,"callbacks"),i={click_id:"",hash_key:"",callbacks:""};return p(t)&&t.length&&(i.click_id=16==t.length||18==t.length?t:"参数解析不合法",p(n)&&n.length&&(i.hash_key=n),p(r)&&r.length&&(i.callbacks=r)),i}function xe(t){var r=t.properties,i=JSON.parse(JSON.stringify(t));n(r)&&O(r,(function(t,n){if(e(t))try{r[n]=t(i),e(r[n])&&(he("您的属性- "+n+" 格式不满足要求，我们已经将其删除"),delete r[n])}catch(e){delete r[n],he("您的属性- "+n+" 抛出了异常，我们已经将其删除")}}))}function Ce(e){if(n(e)&&e.$option){var t=e.$option;return delete e.$option,t}return{}}function Ee(e){var t={};return O(e,(function(e,n){null!=e&&(t[n]=e)})),t}function De(e){if(!h(e.target))return!1;var t=e.target,n=p(t.tagName)?t.tagName.toLowerCase():"unknown",r={};return r.$element_type=n,r.$element_name=t.getAttribute("name"),r.$element_id=t.getAttribute("id"),r.$element_class_name=p(t.className)?t.className:null,r.$element_target_url=t.getAttribute("href"),r.$element_content=$e(t,n),(r=Ee(r)).$url=q(),r.$url_path=K(),r.$title=document.title,r}function Le(t){var n=On.heatmap&&e(On.heatmap.collect_input)&&On.heatmap.collect_input(t);return("button"===t.type||"submit"===t.type||n)&&t.value||""}function $e(e,t){return p(t)&&"input"===t.toLowerCase()?Le(e):B(e,t)}function Ue(e){return Ln.protocol.ajax(e.url),A(e)}function Be(e){if("string"==typeof e&&(e=f(e))&&("://"===e.slice(0,3)?e=location.protocol.slice(0,-1)+e:"//"===e.slice(0,2)?e=location.protocol+e:"http"!==e.slice(0,4)&&(e="")),y(e)&&e.length)for(var t=0;t<e.length;t++)/sa\.gif[^\/]*$/.test(e[t])||(e[t]=e[t].replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));else/sa\.gif[^\/]*$/.test(e)||"string"!=typeof e||(e=e.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));return e}function Re(e){p(e)||(e=JSON.stringify(e));var t=j(e),n="crc="+G(t);return"data="+encodeURIComponent(t)+"&ext="+encodeURIComponent(n)}function Me(e,t){var n=[];"string"==typeof e&&e in Un.EVENT_LIST&&(n=Un.EVENT_LIST[e],Un[n[0]].on(n[1],t))}function He(){this.sendTimeStamp=0,this.timer=null,this.serverUrl="",this.hasTabStorage=!1}function Je(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!Gn.check(n,e[n],t))return!1;return!0}function Fe(t,r){return n(t)?(O(t,(function(i,a){if(y(i)){var o=[];O(i,(function(e){if(p(e))o.push(e);else if(v(e))o.push("null");else try{o.push(JSON.stringify(e))}catch(e){he("您的数据-",a,i,"数组里值有错误,已将其删除")}})),t[a]=o}var s=X(r||[],a)>-1;if(n(i)&&"$option"!==a&&!s)try{t[a]=JSON.stringify(i)}catch(e){delete t[a],he("您的数据-",a,i,"数据值有错误，已将其删除")}else p(i)||ie(i)||C(i)||Q(i)||y(i)||e(i)||"$option"===a||s||(he("您的数据-",a,i,"-格式不满足要求，我们已经将其删除"),delete t[a])})),t):t}function Ve(e){var t=["$element_selector","$element_path"],r=["sensorsdata_app_visual_properties"];n(e)&&O(e,(function(i,a){if(n(i))Ve(e[a]);else if(p(i)){if(X(r,a)>-1)return;e[a]=function(e,t){return ie(t)&&e.length>t?(he("字符串长度超过限制，已经做截取--"+e),e.slice(0,t)):e}(i,X(t,a)>-1?1024:On.max_string_length)}}))}function qe(e,t,n,r){function a(e){function i(){a||(a=!0,location.href=o.href)}e.stopPropagation(),e.preventDefault();var a=!1;setTimeout(i,1e3),r(t,n,i)}var o=null;return(e=e||{}).ele&&(o=e.ele),e.event&&(o=e.target?e.target:e.event.target),n=n||{},!(!o||"object"!=i(o))&&(!o.href||/^javascript/.test(o.href)||o.target||o.download||o.onclick?(r(t,n),!1):(e.event&&a(e.event),void(e.ele&&we(e.ele,"click",(function(e){a(e)})))))}function Ke(){var e=location.protocol;return"http:"===e||"https:"===e?e:"http:"}function We(){var e=$n.campaignParams(),t={};return O(e,(function(e,n,r){-1!==(" "+rn.source_channel_standard+" ").indexOf(" "+n+" ")?t["$"+n]=r[n]:t[n]=r[n]})),t}function ze(e,t,n){if(rn.is_first_visitor&&n){var r={};rn.para.preset_properties.search_keyword_baidu&&Ae(document.referrer)&&Se()&&(r.$search_keyword_id=Dn.id(),r.$search_keyword_id_type=Dn.type(),r.$search_keyword_id_hash=Y(r.$search_keyword_id));var i=Te(null,t);e(T({$first_visit_time:new Date,$first_referrer:i,$first_referrer_host:i?R(i,"取值异常"):"",$first_browser_language:p(navigator.language)?navigator.language.toLowerCase():"取值异常",$first_browser_charset:p(document.charset)?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:je(),$first_search_keyword:Pe()},We(),r)),rn.is_first_visitor=!1}}function Ge(e,t){var r=e.id,i=e.callback,a=e.name,o=Kn.getFirstId(),s=Kn.getOriginDistinctId();if(!Je({distinct_id:r}))return me("login id is invalid"),!1;if(r===Kn.getOriginDistinctId()&&!o)return me("login id is equal to distinct_id"),!1;if(n(Kn._state.identities)&&Kn._state.identities.hasOwnProperty(a)&&r===Kn._state.first_id)return!1;if(Kn._state.history_login_id.name!==a||r!==Kn._state.history_login_id.value){Kn._state.identities[a]=r,Kn.set("history_login_id",{name:a,value:r}),o||Kn.set("first_id",s),t(r,"$SignUp",{},i);var c={$identity_cookie_id:Kn._state.identities.$identity_cookie_id};return c[a]=r,Ye(c),!0}return!1}function Ye(e){var t={};for(var n in e)t[n]=e[n];Kn._state.identities=t,Kn.save()}function Xe(e,t){if(!Je({unbindKey:e,bindValue:t}))return!1;if(n(Kn._state.identities)&&Kn._state.identities.hasOwnProperty(e)&&Kn._state.identities[e]===t){var r=Kn.getUnionId().login_id;r&&e+"+"+t===r&&(Kn._state.distinct_id=Kn._state.first_id,Kn._state.first_id="",Kn.set("history_login_id",{name:"",value:""})),"$identity_cookie_id"!==e&&(delete Kn._state.identities[e],Kn.save())}var i={};return i[e]=t,i}function Ze(t,r){if(p(t)||n(t)){var i;if(n(t)){var a=rn.modules&&rn.modules[t.plugin_name];a&&a!==t&&he(t.name+" is conflict with builtin plugin, and sdk uses builtin plugin."),i=a||t}return p(t)&&(n(rn.modules)&&n(rn.modules[t])?i=rn.modules[t]:n(window.SensorsDataWebJSSDKPlugin)&&n(window.SensorsDataWebJSSDKPlugin[t])?i=window.SensorsDataWebJSSDKPlugin[t]:window.sensorsDataAnalytic201505&&window.sensorsDataAnalytic201505.modules[t]&&(i=window.sensorsDataAnalytic201505.modules[t])),i&&e(i.init)?(i.plugin_is_init||(i.plugin_name||he("warning: invalid plugin, plugin_name required."),i.plugin_version?i.plugin_version!==rn.lib_version&&he("warning: plugin version not match SDK version. plugin may not work correctly. "):he("warning: invalid plugin, plugin version required."),!i.plugin_is_init&&i.init(rn,r),i.plugin_is_init=!0,rn.modules=rn.modules||{},rn.modules[i.plugin_name||"unnamed_"+ur++]=i),i):(he((t.plugin_name||t)+" is not found or it's not a standard plugin. Please check sensorsdata official documents."),i)}me("use's first arguments must be string or object.")}function Qe(e,t,n,r){var i=Kn.getFirstId()||Kn.getDistinctId();Kn.set("distinct_id",e),ir.send({original_id:i,distinct_id:Kn.getDistinctId(),type:"track_signup",event:t,properties:n},r)}function et(e){Je({properties:e})?Kn.setProps(e):me("register输入的参数有误")}function tt(t,n){"number"==typeof t&&(t=String(t)),!Ge({id:t,callback:n,name:jn.LOGIN},Qe)&&e(n)&&n()}function nt(e){var t=this;this.type=e,this.resultCbs={},this.timeoutCbs={},this.timerId=null,this.appCallJsCallback=null,window.sensorsdata_app_call_js||(window.sensorsdata_app_call_js=function(e,t){if(e in window.sensorsdata_app_call_js.modules)return window.sensorsdata_app_call_js.modules[e](t)}),window.sensorsdata_app_call_js.modules=window.sensorsdata_app_call_js.modules||{},window.sensorsdata_app_call_js.modules[this.type]=function(e){try{var n=N(e)||e;try{n=JSON.parse(n)}catch(e){}var r=n&&n.message_id;if(r&&t.resultCbs[r]){if(e=n,t.timeoutCbs[r]&&t.timeoutCbs[r].isTimeout)return void(t.resultCbs[r].callbacks.length=0);if(t.resultCbs[r])for(var i in t.resultCbs[r].result=e,clearTimeout(t.timerId),t.timeoutCbs[r].callbacks.length=0,t.resultCbs[r].callbacks)t.resultCbs[r].callbacks[i].call(null,e),t.resultCbs[r].callbacks.splice(i,1);return}return t.appCallJsCallback&&t.appCallJsCallback.call(null,e)}catch(t){me("app 回调 js 异常",e)}}}function rt(t){try{if(rn.bridge.activeBridge&&e(rn.bridge.activeBridge.handleCommand))return rn.bridge.activeBridge.handleCommand(t)}catch(e){me("Error: handle command exception:"+e)}return me("数据发往App失败，App没有暴露bridge,type:"+t.callType),!1}function it(e){this.bridge=new nt(e.type)}function at(e){var t=null;try{var n=JSON.parse(window.name);t=n[e]?u(n[e]):null}catch(e){t=null}return null===t&&(t=H(location.href,e)||null),t}function ot(e){function t(){var e=[];r.touch_app_bridge||e.push(Ln.defineMode("1")),n(rn.para.app_js_bridge)||(e.push(Ln.defineMode("2")),r.verify_success=!1),n(rn.para.heatmap)&&"default"==rn.para.heatmap.clickmap||e.push(Ln.defineMode("3")),"fail"===r.verify_success&&e.push(Ln.defineMode("4")),new rn.SDKJSBridge("app_alert").notifyApp({data:e})}var r=rn.bridge.bridge_info;if(rn.bridge.hasVisualModeBridge())if(n(rn.para.heatmap)&&"default"==rn.para.heatmap.clickmap)if(n(rn.para.app_js_bridge)&&"success"===r.verify_success)if(e)window.sa_jssdk_app_define_mode(rn,e);else{var i=location.protocol;se({success:function(){setTimeout((function(){"undefined"!=typeof sa_jssdk_app_define_mode&&window.sa_jssdk_app_define_mode(rn,e)}),0)},error:function(){},type:"js",url:(i=X(["http:","https:"],i)>-1?i:"https:")+"//static.sensorsdata.cn/sdk/"+rn.lib_version+"/vapph5define.min.js"})}else t();else t()}function st(){rn.readyState.setState(3),new rn.SDKJSBridge("visualized").onAppNotify((function(){ot("undefined"!=typeof sa_jssdk_app_define_mode)})),ot(!1),rn.bridge.app_js_bridge_v1(),$n.initPage(),function(t){rn.para.is_track_single_page&&Bn.on("switch",(function(r){var i=function(n){if(n=n||{},r!==location.href){$n.pageProp.referrer=q(r);var i=T({$url:q(),$referrer:q(r)},n);e(t)?t(i):rn.quick&&rn.quick("autoTrack",i)}};if("boolean"==typeof rn.para.is_track_single_page)i();else if("function"==typeof rn.para.is_track_single_page){var a=rn.para.is_track_single_page();n(a)?i(a):!0===a&&i()}}))}(),Kn.init(),function(){var e=$n.pageProp.url_domain,t={};""===e&&(e="url解析失败");var r=Pe(document.referrer,!0);if(On.preset_properties.search_keyword_baidu?Ae(document.referrer)&&(!Se()||n(r)&&r.active?Kn._state&&Kn._state.props&&(Kn._state.props.$search_keyword_id&&delete Kn._state.props.$search_keyword_id,Kn._state.props.$search_keyword_id_type&&delete Kn._state.props.$search_keyword_id_type,Kn._state.props.$search_keyword_id_hash&&delete Kn._state.props.$search_keyword_id_hash):(t.$search_keyword_id=Dn.id(),t.$search_keyword_id_type=Dn.type(),t.$search_keyword_id_hash=Y(t.$search_keyword_id))):Kn._state&&Kn._state.props&&(Kn._state.props.$search_keyword_id&&delete Kn._state.props.$search_keyword_id,Kn._state.props.$search_keyword_id_type&&delete Kn._state.props.$search_keyword_id_type,Kn._state.props.$search_keyword_id_hash&&delete Kn._state.props.$search_keyword_id_hash),Kn.save(),O(On.preset_properties,(function(r,i){if(-1===i.indexOf("latest_"))return!1;if(i=i.slice(7),r){if("wx_ad_click_id"===i&&"not_collect"===r)return!1;if("utm"!==i&&"url解析失败"===e)"wx_ad_click_id"===i?(t._latest_wx_ad_click_id="url的domain解析失败",t._latest_wx_ad_hash_key="url的domain解析失败",t._latest_wx_ad_callbacks="url的domain解析失败"):t["$latest_"+i]="url的domain解析失败";else if(Ae(document.referrer))switch(i){case"traffic_source_type":t.$latest_traffic_source_type=je();break;case"referrer":t.$latest_referrer=$n.pageProp.referrer;break;case"search_keyword":Pe()?t.$latest_search_keyword=Pe():n(Kn._state)&&n(Kn._state.props)&&Kn._state.props.$latest_search_keyword&&delete Kn._state.props.$latest_search_keyword;break;case"landing_page":t.$latest_landing_page=q();break;case"wx_ad_click_id":var a=Ie(location.href);t._latest_wx_ad_click_id=a.click_id,t._latest_wx_ad_hash_key=a.hash_key,t._latest_wx_ad_callbacks=a.callbacks}}else if("utm"===i&&Kn._state&&Kn._state.props)for(var o in Kn._state.props)(0===o.indexOf("$latest_utm")||0===o.indexOf("_latest_")&&o.indexOf("_latest_wx_ad_")<0)&&delete Kn._state.props[o];else Kn._state&&Kn._state.props&&"$latest_"+i in Kn._state.props?delete Kn._state.props["$latest_"+i]:"wx_ad_click_id"==i&&Kn._state&&Kn._state.props&&!1===r&&O(["_latest_wx_ad_click_id","_latest_wx_ad_hash_key","_latest_wx_ad_callbacks"],(function(e){e in Kn._state.props&&delete Kn._state.props[e]}))})),On.preset_properties.latest_utm){var i=$n.campaignParamsStandard("$latest_","_latest_"),a=i.$utms,o=i.otherUtms;ee(a)||T(t,a),ee(o)||T(t,o)}et(t)}(),tr.init(),"success"===rn.bridge.bridge_info.verify_success&&Zn.init(),rn.readyState.setState(4),rn._q&&y(rn._q)&&rn._q.length>0&&O(rn._q,(function(e){rn[e[0]].apply(rn,Array.prototype.slice.call(e[1]))})),n(rn.para.heatmap)&&(sr.initHeatmap(),sr.initScrollmap())}function ct(){gr.isSeachHasKeyword()?gr.hasKeywordHandle():window.parent!==self&&_r.isSearchHasKeyword()?_r.verifyVtrackMode():gr.isWindowNameHasKeyword()?gr.windowNameHasKeywordHandle():gr.isStorageHasKeyword()?gr.storageHasKeywordHandle():window.parent!==self&&_r.isStorageHasKeyword()?_r.verifyVtrackMode():(st(),_r.notifyUser())}function lt(){O(hr,(function(t){var n=rn[t];rn[t]=function(){return rn.readyState.state<3?(y(rn._q)||(rn._q=[]),he("calling sdk api before init is deprecated."),rn._q.push([t,arguments]),!1):e(rn.getDisabled)&&rn.getDisabled()?void 0:rn.readyState.getState()?n.apply(rn,arguments):void me("请先初始化神策JS SDK")}}))}function ut(e,t){this.cancel=function(){e=!0},this.getCanceled=function(){return e||!1},this.stop=function(){t=!0},this.getStopped=function(){return t||!1}}function dt(e,t,n){var r=null;try{r=JSON.parse(JSON.stringify(e||null))}catch(e){}this.getOriginalData=function(){return r},this.getPosition=function(){return t},this.cancellationToken=new ut,this.sensors=n}function pt(e){if(!n(e))throw"error: Stage constructor requires arguments.";this.processDef=e,this.registeredInterceptors={}}function ft(e){e&&e.buildDataStage&&vr.registerStageImplementation(e.buildDataStage),e&&e.businessStage&&br.registerStageImplementation(e.businessStage),e&&e.sendDataStage&&yr.registerStageImplementation(e.sendDataStage),e&&e.viewStage&&wr.registerStageImplementation(e.viewStage)}function gt(e,t){Sr[e]&&Sr[e](t)}function _t(e){e.kit=Tr,e.saEvent=ir,this.buildDataStage=rr,this.sendDataStage=Or,this.businessStage=kr}function ht(e){e.heatmap=sr,this.viewStage=ar}function mt(t){if(e(t.properties))if(!t.isMatchedWithFilter||e(t.isMatchedWithFilter)){var n={finalAdjustData:{priority:100,entry:function(n){try{if(e(t.isMatchedWithFilter))return t.isMatchedWithFilter(n)&&t.properties(n);t.properties(n)}catch(e){me("execute registerPropertyPlugin callback error:"+e)}}}};gt("buildDataStage",n)}else me("registerPropertyPlugin arguments error, isMatchedWithFilter must be function");else me("registerPropertyPlugin arguments error, properties must be function")}function vt(e){e&&(rn.events=qn,rn.bridge=fr,rn.SDKJSBridge=nt,rn.JSBridge=it,rn.store=Kn,rn.unlimitedDiv=Qn,rn.customProp=er,rn.vtrackcollect=tr,rn.vapph5collect=Zn,rn.detectMode=ct,rn.registerFeature=ft,rn.registerInterceptor=gt,rn.commonWays=cr,ft(new _t(rn)),ft(new ht(rn)),gt("viewStage",Ar));var t=e?dr:mr;for(var n in t)rn[n]=t[n];rn.logger=kn,rn.log=_e,rn._=pr,rn.on=Me,rn.ee=Un,rn.use=Ze,rn.lib_version=Pn,rn.registerPropertyPlugin=mt}function yt(e){return Zr.call(Xr)&&ei&&ei.call(Xr,JSON.stringify(e))}function bt(e,t){if(Dr("---test---datasend-",Cr.bridge.is_verify_success),Cr.para.app_js_bridge.is_mui||"item_set"===e.data.type||"item_delete"===e.data.type)return e;var n=e.callback;return Cr.bridge.is_verify_success?(Dr("---test---bridge-verify-success---",e.data),Ir&&Ir.call(jr,JSON.stringify(Er.extend({server_url:Cr.para.server_url},e.data))),Er.isFunction(n)&&n(),t.cancellationToken.cancel(),e):(Dr("---test---bridge-verify-fail-----",Cr.bridge.is_verify_success),Cr.para.app_js_bridge.is_send?(Cr.debug.apph5({data:e.data,step:"4.2",output:"all"}),e):(Er.isFunction(n)&&n(),t.cancellationToken.cancel(),e))}function wt(e){return oi.call(ai)&&ci&&ci.call(ai,JSON.stringify(e))}function St(e,t){if(Hr("ObsoleteBridge---senddata"),Rr.para.app_js_bridge.is_mui||"item_set"===e.data.type||"item_delete"===e.data.type)return e;var n=e.callback;if(Ur){var r=Ur&&Ur.call(Lr,JSON.stringify(Mr.extend({server_url:Rr.para.server_url},e.data)));return Hr("ObsoleteBridge---anVerify-success",r),r?(Mr.isFunction(n)&&n(),t.cancellationToken.cancel(),e):Rr.para.app_js_bridge.is_send?(Rr.debug.apph5({data:e.data,step:"3.1",output:"all"}),e):(Mr.isFunction(n)&&n(),t.cancellationToken.cancel(),e)}return Hr("ObsoleteBridge---is-send-old-way",Rr.para.app_js_bridge.is_send),$r&&$r.call(Lr,JSON.stringify(Mr.extend({server_url:Rr.para.server_url},e.data))),Mr.isFunction(n)&&n(),t.cancellationToken.cancel(),e}function kt(){return void 0!==Kr&&document[Kr]}function Ot(e,t){if(bi.para.app_js_bridge.is_mui||"item_set"===e.data.type||"item_delete"===e.data.type)return e;var n=e.callback;return bi.bridge.is_verify_success?(yi()&&yi().postMessage(JSON.stringify({callType:"app_h5_track",data:wi.extend({server_url:bi.para.server_url},e.data)})),wi.isFunction(n)&&n(),t.cancellationToken.cancel(),e):bi.para.app_js_bridge.is_send?(bi.debug.apph5({data:e.data,step:"4.1",output:"all"}),e):(wi.isFunction(n)&&n(),t.cancellationToken.cancel(),e)}function Tt(){if(ki&&!ki.bridge.activeBridge&&(/sensors-verify/.test(navigator.userAgent)||/sa-sdk-ios/.test(navigator.userAgent))&&!window.MSStream){if(ki.bridge.activeBridge=Bi,ki.bridge.bridge_info={touch_app_bridge:!0,platform:"ios",verify_success:At()?"success":"fail"},!ki.para.app_js_bridge)return void Ti("app_js_bridge is not configured, data will not be sent by iOS obsolete bridge.");ki.registerInterceptor("sendDataStage",{send:{priority:90,entry:Pt}}),Ti("IOS obsolete bridge inits succeed.")}}function At(){if(/sensors-verify/.test(navigator.userAgent)){var e=navigator.userAgent.match(/sensors-verify\/([^\s]+)/);if(e&&e[0]&&"string"==typeof e[1]&&2===e[1].split("?").length){e=e[1].split("?");var t=null,n=null;try{t=Oi.URL(ki.para.server_url).hostname,n=Oi.URL(ki.para.server_url).searchParams.get("project")||"default"}catch(e){ki.log(e)}return!(!t||t!==e[0]||!n||n!==e[1])}return!1}return!!/sa-sdk-ios/.test(navigator.userAgent)}function Pt(e,t){if(ki.para.app_js_bridge.is_mui||"item_set"===e.data.type||"item_delete"===e.data.type)return e;var n=e.callback;if(ki.bridge.bridge_info.verify_success){var r=document.createElement("iframe"),i=function(e){var t=JSON.stringify(Oi.extend({server_url:ki.para.server_url},e));return t=t.replace(/\r\n/g,""),"sensorsanalytics://trackEvent?event="+encodeURIComponent(t)}(e.data);return r.setAttribute("src",i),document.documentElement.appendChild(r),r.parentNode.removeChild(r),r=null,Oi.isFunction(n)&&n(),t.cancellationToken.cancel(),!0}return ki.para.app_js_bridge.is_send?(ki.debug.apph5({data:e.data,step:"3.2",output:"all"}),e):(Oi.isFunction(n)&&n(),t.cancellationToken.cancel(),e)}function Nt(){this.sd=null,this.start_time=+new Date,this.page_show_status=!0,this.page_hidden_status=!1,this._={},this.timer=null,this.current_page_url=document.referrer,this.url=location.href,this.title=document.title||"",this.option={},this.heartbeat_interval_time=5e3,this.heartbeat_interval_timer=null,this.page_id=null,this.storage_name="sawebjssdkpageleave",this.max_duration=Hi}function jt(){this.sd=null,this.log=window.console&&window.console.log||function(){},this.customRegister=[]}function It(e){try{if("$pageview"!==e.event&&(!e.type||"profile"!==e.type.slice(0,7))){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,n=document.documentElement.scrollHeight||0,r={$page_height:Math.max(t,n)||0};e.properties=zi._.extend(e.properties||{},r)}}catch(e){da("页面高度获取异常。")}return Gi.call(zi.kit,e)}function xt(){wa=!0}function Ct(){wa=!1}function Et(){return wa}function Dt(e,t){if(!0===Xi.para.debug_mode){var n=e.data;e.callback,function(e){var t,n=e;t=-1!==Xi.para.debug_mode_url.indexOf("?")?Xi.para.debug_mode_url+"&"+Xi.kit.encodeTrackData(e):Xi.para.debug_mode_url+"?"+Xi.kit.encodeTrackData(e),Zi.ajax({url:t,type:"GET",cors:!0,header:{"Dry-Run":String(Xi.para.debug_mode_upload)},success:function(e){!0===Zi.isEmptyObject(e)?alert("debug数据发送成功"+n):alert("debug失败 错误原因"+JSON.stringify(e))}})}(JSON.stringify(n)),t.cancellationToken.stop()}return e}function Lt(){Xi.on("sdkInitPara",(function(){!0===Xi.para.debug_mode&&(Xi.para.debug_mode_upload=Xi.para.debug_mode_upload||!1,Zi.isString(Xi.para.debug_mode_url)||(Zi.isString(Xi.para.server_url)?Xi.para.debug_mode_url=Xi.para.server_url.replace("sa.gif","debug"):Zi.isArray(Xi.para.server_url)&&Zi.isString(Xi.para.server_url[0])?Xi.para.debug_mode_url=Xi.para.server_url[0].replace("sa.gif","debug"):Xi.para.debug_mode=!1))})),Xi.on("sdkAfterInitPara",(function(){Xi.registerInterceptor("sendDataStage",{send:{priority:30,entry:Dt}})}))}function $t(e,t){if(ea.isObject(Qi.para.jsapp)&&!Qi.para.jsapp.isOnline&&"function"==typeof Qi.para.jsapp.setData){var n=e;delete n.callback,n=JSON.stringify(n),Qi.para.jsapp.setData(n),t.cancellationToken.stop()}return e}function Ut(e){if(!0===e&&ea.isObject(Qi.para.jsapp)&&"function"==typeof Qi.para.jsapp.getData){Qi.para.jsapp.isOnline=!0;var t=Qi.para.jsapp.getData();ea.isArray(t)&&t.length>0&&ea.each(t,(function(e){ea.isJSONString(e)&&Qi.kit.sendData(JSON.parse(e))}))}else Qi.para.jsapp.isOnline=!1}function Bt(e,t){return!ta.para.app_js_bridge&&ta.para.batch_send&&na.localStorage.isSupport()&&localStorage.length<ta.para.batch_send.storage_length&&(Ca.add(e.data),t.cancellationToken.stop()),e}function Rt(){ta.on("sdkInitPara",(function(){!function(){var e={datasend_timeout:6e3,send_interval:6e3,storage_length:200};na.localStorage.isSupport()&&na.isSupportCors()&&"object"==("undefined"==typeof localStorage?"undefined":i(localStorage))?!0===ta.para.batch_send?ta.para.batch_send=na.extend({},e):"object"==i(ta.para.batch_send)&&(ta.para.batch_send=na.extend({},e,ta.para.batch_send)):ta.para.batch_send=!1}()})),ta.on("sdkAfterInitPara",(function(){!ta.para.app_js_bridge&&ta.para.batch_send&&na.localStorage.isSupport()&&(Ca||(Ca=new na.BatchSend),Ca.batchInterval(),ta.registerInterceptor("sendDataStage",{send:{priority:100,entry:Bt}}))}))}function Mt(e){new ia.BeaconSend(e).start()}function Ht(e,t){var n=null,r=null;if(ia.isObject(e.config)&&(n=e.config.send_type,r=ia.optimizeServerUrl(e.config.server_url)),("beacon"===n||!n&&"beacon"===ra.para.send_type)&&ia.isSupportBeaconSend()){var i=r||e.server_url;e.server_url=i,e.data=ra.kit.encodeTrackData(e.data),ia.isArray(i)&&i.length?ia.each(i,(function(t){e.callback=null,e.server_url=t,Mt(e)})):"string"==typeof i&&""!==i?Mt(e):ra.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！"),t.cancellationToken.stop()}return e}function Jt(){ra.on("sdkInitPara",(function(){"beacon"!==ra.para.send_type||ia.isSupportBeaconSend()||(ra.para.send_type="image")})),ra.on("sdkAfterInitPara",(function(){ra.registerInterceptor("sendDataStage",{send:{priority:110,entry:Ht}})}))}function Ft(e){new oa.AjaxSend(e).start()}function Vt(e,t){var n=null,r=null;if(oa.isObject(e.config)&&(n=e.config.send_type,r=oa.optimizeServerUrl(e.config.server_url)),("ajax"===n||!n&&"ajax"===aa.para.send_type)&&oa.isSupportCors()){var i=r||e.server_url;e.server_url=i,e.data=aa.kit.encodeTrackData(e.data),oa.isArray(i)&&i.length?oa.each(i,(function(t){e.callback=null,e.server_url=t,Ft(e)})):"string"==typeof i&&""!==i?Ft(e):aa.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！"),t.cancellationToken.stop()}return e}function qt(){aa.on("sdkInitPara",(function(){"ajax"!==aa.para.send_type||oa.isSupportCors()||(aa.para.send_type="image")})),aa.on("sdkAfterInitPara",(function(){aa.registerInterceptor("sendDataStage",{send:{priority:120,entry:Vt}})}))}function Kt(e,t){var n=sa.kit.encodeTrackData(t);return-1!==e.indexOf("?")?e+"&"+n:e+"?"+n}function Wt(e){new ca.ImageSend(e).start()}function zt(e,t){var n=null;ca.isObject(e.config)&&(n=ca.optimizeServerUrl(e.config.server_url));var r=n||e.server_url,i=e.data;e.server_url=r,ca.isArray(r)&&r.length?ca.each(r,(function(t){t&&(e.data=Kt(t,i),e.callback=null,e.server_url=t,Wt(e))})):"string"==typeof r&&""!==r?(e.data=Kt(r,i),Wt(e)):sa.logger&&sa.logger.msg("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！").level("warn").log(),t.cancellationToken.stop()}function Gt(){sa.on("sdkInitPara",(function(){"image"!==sa.para.send_type&&"ajax"!==sa.para.send_type&&"beacon"!==sa.para.send_type&&(sa.para.send_type="image")})),sa.on("sdkAfterInitPara",(function(){sa.registerInterceptor("sendDataStage",{send:{priority:130,entry:zt}})}))}function Yt(e){return null===Ka?void Xt(e):void Ka.push(e)}function Xt(e){try{if("log"===e.level&&Zt())return void Qt(e);if("warn"===e.level&&(nn()||Zt()||qa.isObject(Va.para.show_log)&&"warn"===Va.para.show_log.level))return void Qt(e);if("error"===e.level&&(nn()||!qa.isObject(Va.para.show_log)||"none"!==Va.para.show_log.level))return void Qt(e)}catch(e){}}function Zt(){return!!nn()||!0===Va.para.show_log||qa.isObject(Va.para.show_log)&&"log"===Va.para.show_log.level}function Qt(e){var t=e.content,n=qa.isObject(t[0])?qa.formatJsonString(t[0]):t[0],r=function(e){var t="",n="",r=Va.para.show_log;return qa.isObject(r)&&!1===r.show_brand||(t+=e.brand),qa.isObject(r)&&!1===r.show_level||(t+=(t.length>0?"-":"")+e.level),t.length>0&&(t="["+t+"]"),qa.isObject(r)&&!1===r.show_module||(n=e.module),t+n}(e);t[0]=r+(r.length>0?": ":"")+n;try{console&&(qa.isFunction(console[e.level])?console[e.level].apply(console,t):qa.isObject(console[e.level])&&console[e.level](t[0]))}catch(e){}}function en(){qa.sessionStorage.isSupport()&&sessionStorage.setItem(Ga,"true")}function tn(){qa.sessionStorage.isSupport()&&sessionStorage.removeItem(Ga)}function nn(){return qa.sessionStorage.isSupport()&&"true"===sessionStorage.getItem(Ga)}var rn={};(function(){var e={function:!0,object:!0},t=e["undefined"==typeof window?"undefined":i(window)]&&window||this,n=t.JSON,r=t.JSON3,a=!1,o=function n(r,a){function o(e,t){try{e()}catch(e){t&&t()}}function s(e){if(null!=s[e])return s[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=s("json-stringify")&&s("date-serialization")&&s("json-parse");else if("date-serialization"==e){if(t=s("json-stringify")&&w){var n=a.stringify;o((function(){t='"-271821-04-20T00:00:00.000Z"'==n(new p(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==n(new p(864e13))&&'"-000001-01-01T00:00:00.000Z"'==n(new p(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==n(new p(-1))}))}}else{var r,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c="function"==typeof(n=a.stringify);c&&((r=function(){return 1}).toJSON=r,o((function(){c="0"===n(0)&&"0"===n(new l)&&'""'==n(new u)&&n(y)===m&&n(m)===m&&n()===m&&"1"===n(r)&&"[1]"==n([r])&&"[null]"==n([m])&&"null"==n(null)&&"[null,null,null]"==n([m,y,null])&&n({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===n(null,r)&&"[\n 1,\n 2\n]"==n([1,2],null,1)}),(function(){c=!1}))),t=c}if("json-parse"==e){var d,f=a.parse;"function"==typeof f&&o((function(){0!==f("0")||f(!1)||(r=f(i),(d=5==r.a.length&&1===r.a[0])&&(o((function(){d=!f('"\t"')})),d&&o((function(){d=1!==f("01")})),d&&o((function(){d=1!==f("1.")}))))}),(function(){d=!1})),t=d}}return s[e]=!!t}function c(e){return I(this)}r||(r=t.Object()),a||(a=t.Object());var l=r.Number||t.Number,u=r.String||t.String,d=r.Object||t.Object,p=r.Date||t.Date,f=r.SyntaxError||t.SyntaxError,g=r.TypeError||t.TypeError,_=r.Math||t.Math,h=r.JSON||t.JSON;if("object"==i(h)&&h)return a.stringify=h.stringify,a.parse=h.parse,a.runInContext=n,a;var m,v=d.prototype,y=v.toString,b=v.hasOwnProperty,w=new p(-0xc782b5b800cec);if(o((function(){w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()})),s["bug-string-char-index"]=s["date-serialization"]=s.json=s["json-stringify"]=s["json-parse"]=null,!s("json")){var S="[object Function]",k="[object Number]",O="[object String]",T="[object Array]",A=s("bug-string-char-index"),P=function(t,n){var r,a,o,s=0;for(o in(r=function(){this.valueOf=0}).prototype.valueOf=0,a=new r)b.call(a,o)&&s++;return r=a=null,s?P=function(e,t){var n,r,i=y.call(e)==S;for(n in e)i&&"prototype"==n||!b.call(e,n)||(r="constructor"===n)||t(n);(r||b.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],P=function(t,n){var r,o,s=y.call(t)==S,c=!s&&"function"!=typeof t.constructor&&e[i(t.hasOwnProperty)]&&t.hasOwnProperty||b;for(r in t)s&&"prototype"==r||!c.call(t,r)||n(r);for(o=a.length;r=a[--o];)c.call(t,r)&&n(r)}),P(t,n)};if(!s("json-stringify")&&!s("date-serialization")){var N={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},j=function(e,t){return("000000"+(t||0)).slice(-e)},I=function(e){var t,n,r,i,a,o,s,c,l;if(w)t=function(e){n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),c=e.getUTCSeconds(),l=e.getUTCMilliseconds()};else{var u=_.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return d[t]+365*(e-1970)+u((e-1969+(t=+(t>1)))/4)-u((e-1901+t)/100)+u((e-1601+t)/400)};t=function(e){for(i=u(e/864e5),n=u(i/365.2425)+1970-1;p(n+1,0)<=i;n++);for(r=u((i-p(n,0))/30.42);p(n,r+1)<=i;r++);i=1+i-p(n,r),o=u((a=(e%864e5+864e5)%864e5)/36e5)%24,s=u(a/6e4)%60,c=u(a/1e3)%60,l=a%1e3}}return(I=function(e){return e>-1/0&&e<1/0?(t(e),e=(n<=0||n>=1e4?(n<0?"-":"+")+j(6,n<0?-n:n):j(4,n))+"-"+j(2,r+1)+"-"+j(2,i)+"T"+j(2,o)+":"+j(2,s)+":"+j(2,c)+"."+j(3,l)+"Z",n=r=i=o=s=c=l=null):e=null,e})(e)};if(s("json-stringify")&&!s("date-serialization")){var x=a.stringify;a.stringify=function(e,t,n){var r=p.prototype.toJSON;p.prototype.toJSON=c;var i=x(e,t,n);return p.prototype.toJSON=r,i}}else{var C=function(e){var t=e.charCodeAt(0),n=N[t];return n||"\\u00"+j(2,t.toString(16))},E=/[\x00-\x1f\x22\x5c]/g,D=function(e){return E.lastIndex=0,'"'+(E.test(e)?e.replace(E,C):e)+'"'},L=function e(t,n,r,a,s,c,l){var u,d,f,_,h,v,b,w,S;if(o((function(){u=n[t]})),"object"==i(u)&&u&&(u.getUTCFullYear&&"[object Date]"==y.call(u)&&u.toJSON===p.prototype.toJSON?u=I(u):"function"==typeof u.toJSON&&(u=u.toJSON(t))),r&&(u=r.call(n,t,u)),u==m)return u===m?u:"null";switch("object"==(d=i(u))&&(f=y.call(u)),f||d){case"boolean":case"[object Boolean]":return""+u;case"number":case k:return u>-1/0&&u<1/0?""+u:"null";case"string":case O:return D(""+u)}if("object"==i(u)){for(b=l.length;b--;)if(l[b]===u)throw g();if(l.push(u),_=[],w=c,c+=s,f==T){for(v=0,b=u.length;v<b;v++)h=e(v,u,r,a,s,c,l),_.push(h===m?"null":h);S=_.length?s?"[\n"+c+_.join(",\n"+c)+"\n"+w+"]":"["+_.join(",")+"]":"[]"}else P(a||u,(function(t){var n=e(t,u,r,a,s,c,l);n!==m&&_.push(D(t)+":"+(s?" ":"")+n)})),S=_.length?s?"{\n"+c+_.join(",\n"+c)+"\n"+w+"}":"{"+_.join(",")+"}":"{}";return l.pop(),S}};a.stringify=function(t,n,r){var a,o,s,c;if(e[i(n)]&&n)if((c=y.call(n))==S)o=n;else if(c==T){s={};for(var l,u=0,d=n.length;u<d;)l=n[u++],"[object String]"!=(c=y.call(l))&&"[object Number]"!=c||(s[l]=1)}if(r)if((c=y.call(r))==k){if((r-=r%1)>0)for(r>10&&(r=10),a="";a.length<r;)a+=" "}else c==O&&(a=r.length<=10?r:r.slice(0,10));return L("",((l={})[""]=t,l),o,s,a,"",[])}}}if(!s("json-parse")){var $,U,B=u.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw $=U=null,f()},H=function(){for(var e,t,n,r,i,a=U,o=a.length;$<o;)switch(i=a.charCodeAt($)){case 9:case 10:case 13:case 32:$++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=A?a.charAt($):a[$],$++,e;case 34:for(e="@",$++;$<o;)if((i=a.charCodeAt($))<32)M();else if(92==i)switch(i=a.charCodeAt(++$)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[i],$++;break;case 117:for(t=++$,n=$+4;$<n;$++)(i=a.charCodeAt($))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||M();e+=B("0x"+a.slice(t,$));break;default:M()}else{if(34==i)break;for(i=a.charCodeAt($),t=$;i>=32&&92!=i&&34!=i;)i=a.charCodeAt(++$);e+=a.slice(t,$)}if(34==a.charCodeAt($))return $++,e;M();default:if(t=$,45==i&&(r=!0,i=a.charCodeAt(++$)),i>=48&&i<=57){for(48==i&&(i=a.charCodeAt($+1))>=48&&i<=57&&M(),r=!1;$<o&&(i=a.charCodeAt($))>=48&&i<=57;$++);if(46==a.charCodeAt($)){for(n=++$;n<o&&!((i=a.charCodeAt(n))<48||i>57);n++);n==$&&M(),$=n}if(101==(i=a.charCodeAt($))||69==i){for(43!=(i=a.charCodeAt(++$))&&45!=i||$++,n=$;n<o&&!((i=a.charCodeAt(n))<48||i>57);n++);n==$&&M(),$=n}return+a.slice(t,$)}r&&M();var s=a.slice($,$+4);if("true"==s)return $+=4,!0;if("fals"==s&&101==a.charCodeAt($+4))return $+=5,!1;if("null"==s)return $+=4,null;M()}return"$"},J=function e(t){var n,r;if("$"==t&&M(),"string"==typeof t){if("@"==(A?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=H());)r?","==t?"]"==(t=H())&&M():M():r=!0,","==t&&M(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=H());)r?","==t?"}"==(t=H())&&M():M():r=!0,","!=t&&"string"==typeof t&&"@"==(A?t.charAt(0):t[0])&&":"==H()||M(),n[t.slice(1)]=e(H());return n}M()}return t},F=function(e,t,n){var r=V(e,t,n);r===m?delete e[t]:e[t]=r},V=function(e,t,n){var r,a=e[t];if("object"==i(a)&&a)if(y.call(a)==T)for(r=a.length;r--;)F(y,P,a);else P(a,(function(e){F(a,e,n)}));return n.call(e,t,a)};a.parse=function(e,t){var n,r;return $=0,U=""+e,n=J(H()),"$"!=H()&&M(),$=U=null,t&&y.call(t)==S?V(((r={})[""]=n,r),"",t):n}}}return a.runInContext=n,a}(t,t.JSON3={noConflict:function(){return a||(a=!0,t.JSON=n,t.JSON3=r,n=r=null),o}});t.JSON?(t.JSON.parse=o.parse,t.JSON.stringify=o.stringify):t.JSON={parse:o.parse,stringify:o.stringify}}).call(window),function(e){if(e.atob)try{e.atob(" ")}catch(t){e.atob=function(e){var t=function(t){return e(String(t).replace(/[\t\n\f\r ]+/g,""))};return t.original=e,t}(e.atob)}else{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;e.btoa=function(e){for(var n,r,i,a,o="",s=0,c=(e=String(e)).length%3;s<e.length;){if((r=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255||(a=e.charCodeAt(s++))>255)return"";n=r<<16|i<<8|a,o+=t.charAt(n>>18&63)+t.charAt(n>>12&63)+t.charAt(n>>6&63)+t.charAt(63&n)}return c?o.slice(0,c-3)+"===".substring(c):o},e.atob=function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!n.test(e))return"";e+="==".slice(2-(3&e.length));for(var r,i,a,o="",s=0;s<e.length;)r=t.indexOf(e.charAt(s++))<<18|t.indexOf(e.charAt(s++))<<12|(i=t.indexOf(e.charAt(s++)))<<6|(a=t.indexOf(e.charAt(s++))),o+=64===i?String.fromCharCode(r>>16&255):64===a?String.fromCharCode(r>>16&255,r>>8&255):String.fromCharCode(r>>16&255,r>>8&255,255&r);return o}}}(window);var an,on={setup:function(e){an=e},log:function(){(an||console&&console.log||function(){}).apply(null,arguments)}},sn={get:function(e){return window.localStorage.getItem(e)},parse:function(e){var t;try{t=JSON.parse(sn.get(e))||null}catch(e){on.log(e)}return t},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){on.log(e)}},remove:function(e){window.localStorage.removeItem(e)},isSupport:function(){var e=!0;try{var t="__local_store_support__",n="testIsSupportStorage";sn.set(t,n),sn.get(t)!==n&&(e=!1),sn.remove(t)}catch(t){e=!1}return e}},cn=function(){var e=(new Date).getTime();return function(t){return Math.ceil((e=(9301*e+49297)%233280)/233280*t)}}();s.prototype.get=function(e,n,i,o){if(!e)throw new Error("key is must");n=n||1e4,i=i||1e3,o=o||function(){};var s=this.lockGetPrefix+e,c=sn.get(s),l=String(r());return c&&(c=a(c)||{randomNum:0,expireTime:0}).expireTime>t()?o(null):(sn.set(s,JSON.stringify({randomNum:l,expireTime:t()+n})),void setTimeout((function(){(c=a(sn.get(s))||{randomNum:0,expireTime:0})&&c.randomNum===l?(o(sn.get(e)),sn.remove(e),sn.remove(s)):o(null)}),i))},s.prototype.set=function(e,n,i,o,s){if(!e||!n)throw new Error("key and val is must");i=i||1e4,o=o||1e3,s=s||function(){};var c=this.lockSetPrefix+e,l=sn.get(c),u=String(r());return l&&(l=a(l)||{randomNum:0,expireTime:0}).expireTime>t()?s({status:"fail",reason:"This key is locked"}):(sn.set(c,JSON.stringify({randomNum:u,expireTime:t()+i})),void setTimeout((function(){(l=a(sn.get(c))||{randomNum:0,expireTime:0}).randomNum===u?sn.set(e,n)&&s({status:"success"}):s({status:"fail",reason:"This key is locked"})}),o))},l.prototype.on=function(e,t){if(!e||!t)return!1;if(!c(t))throw new Error("listener must be a function");this._events[e]=this._events[e]||[];var n="object"==i(t);return this._events[e].push(n?t:{listener:t,once:!1}),this},l.prototype.prepend=function(e,t){if(!e||!t)return!1;if(!c(t))throw new Error("listener must be a function");this._events[e]=this._events[e]||[];var n="object"==i(t);return this._events[e].unshift(n?t:{listener:t,once:!1}),this},l.prototype.prependOnce=function(e,t){return this.prepend(e,{listener:t,once:!0})},l.prototype.once=function(e,t){return this.on(e,{listener:t,once:!0})},l.prototype.off=function(e,t){var n=this._events[e];if(!n)return!1;if("number"==typeof t)n.splice(t,1);else if("function"==typeof t)for(var r=0,i=n.length;r<i;r++)n[r]&&n[r].listener===t&&n.splice(r,1);return this},l.prototype.emit=function(e,t){var n=this._events[e];if(!n)return!1;for(var r=0;r<n.length;r++){var i=n[r];i&&(i.listener.call(this,t||{}),i.once&&this.off(e,r))}return this},l.prototype.removeAllListeners=function(e){e&&this._events[e]?this._events[e]=[]:this._events={}},l.prototype.listeners=function(e){return e&&"string"==typeof e?this._events[e]:this._events};var ln=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)};return function(){var t=String(screen.height*screen.width);t=t&&/\d{5,}/.test(t)?t.toString(16):String(31242*r()).replace(".","").slice(0,8);var n=e()+"-"+r().toString(16).replace(".","")+"-"+function(){function e(e,t){var n,r=0;for(n=0;n<t.length;n++)r|=i[n]<<8*n;return e^r}var t,n,r=navigator.userAgent,i=[],a=0;for(t=0;t<r.length;t++)n=r.charCodeAt(t),i.unshift(255&n),i.length>=4&&(a=e(a,i),i=[]);return i.length>0&&(a=e(a,i)),a.toString(16)}()+"-"+t+"-"+e();return n||(String(r())+String(r())+String(r())).slice(2,15)}}(),un=function(e){this.ele=e},dn=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n};un.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&v(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument.documentElement;return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=document.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),b(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var n=null;if("function"==typeof window.getMatchedCSSRules&&(n=window.getMatchedCSSRules(this.ele)),!n||!y(n))return null;for(var r=n.length-1;r>=0;r--)if(t=n[r].style.getPropertyValue(e))return t},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(){return this.sibling(this.ele,"previousSibling")},siblings:function(){return dn((this.ele.parentNode||{}).firstChild,this.ele)},children:function(){return dn(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return b(e=e&&11!==e.nodeType?e:null)},previousElementSibling:function(){var e=this.ele;if("previousElementSibling"in document.documentElement)return b(e.previousElementSibling);for(;e=e.previousSibling;)if(1===e.nodeType)return b(e);return b(null)},getSameTypeSiblings:function(){for(var e=this.ele,t=e.parentNode,n=e.tagName.toLowerCase(),r=[],i=0;i<t.children.length;i++){var a=t.children[i];1===a.nodeType&&a.tagName.toLowerCase()===n&&r.push(t.children[i])}return r},getParents:function(){try{var e=this.ele;if(!h(e))return[];var t=[e];if(null===e||null===e.parentElement)return[];for(;null!==e.parentElement;)e=e.parentElement,t.push(e);return t}catch(e){return[]}}};var pn=Array.prototype.forEach,fn=Object.prototype.hasOwnProperty,gn=Object.prototype.hasOwnProperty,_n={get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return u(i.substring(t.length,i.length))}return null},set:function(e,t,n,r,i,a){function o(e){return!!e&&e.replace(/\r\n/g,"")}var s=a,c="",l="",u="";if(0!==(n=null==n?73e3:n)){var d=new Date;"s"===String(n).slice(-1)?d.setTime(d.getTime()+1e3*Number(String(n).slice(0,-1))):d.setTime(d.getTime()+24*n*60*60*1e3),c="; expires="+d.toGMTString()}r&&""!==r&&(u="; SameSite="+r),i&&(l="; secure");var p="",f="",g="";e&&(p=o(e)),t&&(f=o(t)),s&&(g=o(s)),p&&f&&(document.cookie=p+"="+encodeURIComponent(f)+c+"; path=/"+g+u+l)},remove:function(e,t){this.set(e,"1",-1,t)},isSupport:function(e,t,n,r,i){e=e||"cookie_support_test",t=t||"1";var a=this;return navigator.cookieEnabled&&(a.set(e,t,n,r,i),a.get(e)===t&&(a.remove(e),!0))}},hn=Object.prototype.hasOwnProperty,mn={isSupport:function(){var e=!0,t="__session_storage_support__",n="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,n),sessionStorage.removeItem(t,n),e=!0):e=!1}catch(t){e=!1}return e}},vn={"+":"-","/":"_","=":"."},yn={"-":"+",_:"/",".":"="},bn={encode:function(e){return e.replace(/[+\/=]/g,(function(e){return vn[e]}))},decode:function(e){return e.replace(/[-_.]/g,(function(e){return yn[e]}))},trim:function(e){return e.replace(/[.=]{1,2}$/,"")},isBase64:function(e){return/^[A-Za-z0-9+\/]*[=]{0,2}$/.test(e)},isUrlSafeBase64:function(e){return/^[A-Za-z0-9_-]*[.]{0,2}$/.test(e)}},wn={__proto__:null,ConcurrentStorage:s,EventEmitter:l,URL:_,UUID:ln,addEvent:w,addHashEvent:S,ajax:A,base64Decode:N,base64Encode:j,bindReady:function(e,t){t=t||window;var n=!1,r=!0,i=t.document,a=i.documentElement,o=i.addEventListener,s=o?"addEventListener":"attachEvent",c=o?"removeEventListener":"detachEvent",l=o?"":"on",u=function r(a){"readystatechange"==a.type&&"complete"!=i.readyState||(("load"==a.type?t:i)[c](l+a.type,r,!1),!n&&(n=!0)&&e.call(t,a.type||a))};if("complete"==i.readyState)e.call(t,"lazy");else{if(!o&&a.doScroll){try{r=!t.frameElement}catch(e){on.log(e)}r&&function e(){try{a.doScroll("left")}catch(t){return void setTimeout(e,50)}u("poll")}()}i[s](l+"DOMContentLoaded",u,!1),i[s](l+"readystatechange",u,!1),t[s](l+"load",u,!1)}},cookie:_n,coverExtend:I,decodeURI:x,decodeURIComponent:u,dfmapping:function(e){var t="t6KJCZa5pDdQ9khoEM3Tj70fbP2eLSyc4BrsYugARqFIw1mzlGNVXOHiWvxUn8",n=t.length-1,r={},i=0;for(i=0;i<t.length;i++)r[t.charAt(i)]=t.charAt(n-i);var a="";for(i=0;i<e.length;i++)a+=e.charAt(i)in r?r[e.charAt(i)]:e.charAt(i);return a},each:O,encodeDates:function e(t){return O(t,(function(r,i){C(r)?t[i]=E(r):n(r)&&(t[i]=e(r))})),t},extend:T,extend2Lev:D,filter:L,formatDate:E,formatJsonString:function(e){try{return JSON.stringify(e,null,"  ")}catch(t){return JSON.stringify(e)}},getCookieTopLevelDomain:$,getDomBySelector:U,getElementContent:B,getHostname:R,getIOSVersion:M,getQueryParam:H,getQueryParamsFromUrl:J,getRandom:r,getRandomBasic:cn,getScreenOrientation:function(){var e=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type,t="未取到值";if(e)t=e.indexOf("landscape")>-1?"landscape":"portrait";else if(F()){var n=window.matchMedia||window.msMatchMedia;n("(orientation: landscape)").matches?t="landscape":n("(orientation: portrait)").matches&&(t="portrait")}return t},getUA:V,getURL:q,getURLPath:K,getURLSearchParams:d,hasAttribute:W,hasAttributes:z,hashCode:G,hashCode53:Y,indexOf:X,inherit:function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},isArguments:Z,isArray:y,isBoolean:Q,isDate:C,isElement:h,isEmptyObject:ee,isFunction:e,isHttpUrl:te,isIOS:ne,isJSONString:re,isNumber:ie,isObject:n,isString:p,isSupportBeaconSend:function(){var e=!1;if("object"!=("undefined"==typeof navigator?"undefined":i(navigator))||"function"!=typeof navigator.sendBeacon)return e;var t=V(),n=navigator.userAgent.toLowerCase();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){var r=(n.match(/os [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".").split(".");void 0===t.safari&&(t.safari=r[0]),r[0]&&(t.qqBuildinBrowser||t.qqBrowser)?e=!1:r[0]&&r[0]<13?(t.chrome>41||t.firefox>30||t.opera>25||t.safari>12)&&(e=!0):(t.chrome>41||t.firefox>30||t.opera>25||t.safari>11.3)&&(e=!0)}else(t.chrome>38||t.edge>13||t.firefox>30||t.opera>25||t.safari>11)&&(e=!0);return e},isSupportCors:function(){return void 0!==window.XMLHttpRequest&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)},isUndefined:v,jsonp:ae,listenPageState:oe,loadScript:se,localStorage:sn,logger:on,map:P,mediaQueriesSupported:F,now:t,removeScriptProtocol:function(e){if("string"!=typeof e)return"";for(var t=/^\s*javascript/i;t.test(e);)e=e.replace(t,"");return e},rot13defs:le,rot13obfs:ce,ry:b,safeJSONParse:a,searchObjDate:ue,sessionStorage:mn,setCssStyle:de,strToUnicode:function(e){if("string"!=typeof e)return on.log("转换unicode错误",e),e;for(var t="",n=0;n<e.length;n++)t+="\\"+e.charCodeAt(n).toString(16);return t},throttle:function(e,n,r){var i,a,o,s=null,c=0;r||(r={});var l=function(){c=!1===r.leading?0:t(),s=null,o=e.apply(i,a),s||(i=a=null)};return function(){var u=t();c||!1!==r.leading||(c=u);var d=n-(u-c);return i=this,a=arguments,d<=0||d>n?(s&&(clearTimeout(s),s=null),c=u,o=e.apply(i,a),s||(i=a=null)):s||!1===r.trailing||(s=setTimeout(l,d)),o}},toArray:function(e){return e?e.toArray?e.toArray():y(e)||Z(e)?Array.prototype.slice.call(e):pe(e):[]},trim:f,unique:fe,urlParse:g,urlSafeBase64:bn,values:pe,xhr:k,startsWith:ge},Sn=[],kn={appendWriter:function(e){Sn.push(e)},msg:function(){var e={module:"",level:"log",brand:"web-sdk",content:null};e.content=Array.prototype.slice.call(arguments);var t={module:function(t){return p(t)&&(e.module=t),this},level:function(t){return p(t)&&(e.level=t),this},brand:function(t){return p(t)&&(e.brand=t),this},log:function(){if(e.content&&e.content.length)for(var t=0;t<Sn.length;t++)if("function"==typeof Sn[t])try{Sn[t].call(null,e)}catch(e){}return this}};return t}},On={},Tn={preset_properties:{search_keyword_baidu:!1,latest_utm:!0,latest_traffic_source_type:!0,latest_search_keyword:!0,latest_referrer:!0,latest_referrer_host:!1,latest_landing_page:!1,latest_wx_ad_click_id:void 0,url:!0,title:!0},encrypt_cookie:!1,enc_cookie:!1,img_use_crossorigin:!1,name:"sa",max_referrer_string_length:200,max_string_length:500,max_id_length:255,max_key_length:100,cross_subdomain:!0,show_log:!1,is_debug:!1,source_channel:[],sdk_id:"",vtrack_ignore:{},auto_init:!0,is_track_single_page:!1,is_single_page:!1,batch_send:!1,source_type:{},callback_timeout:200,datasend_timeout:8e3,is_track_device_id:!1,ignore_oom:!0,app_js_bridge:!1,white_list:{}};Tn.white_list[location.host]=_(location.href).hostname;var An="utm_source utm_medium utm_campaign utm_content utm_term",Pn="1.26.12",Nn="sensorsdata_domain_test",jn={EMAIL:"$identity_email",MOBILE:"$identity_mobile",LOGIN:"$identity_login_id"},In={get:function(e){return _n.get(e)},set:function(e,t,n,r){var i="";if(r=v(r)?On.cross_subdomain:r){var a=ve(location.href);"url解析失败"===a&&(a=""),i=a?"; domain="+a:""}return _n.set(e,t,n,On.set_cookie_samesite,On.is_secure_cookie,i)},remove:function(e,t){return t=v(t)?On.cross_subdomain:t,_n.remove(e,t)},isSupport:function(e,t){return e=e||"sajssdk_2015_cookie_access_test",t=t||"1",_n.isSupport(e,t,0,null,On.is_secure_cookie)}};In.getNewUser=be;var xn={data:{},get:function(e){var t=this.data[e];return void 0===t?null:void 0!==t._expirationTimestamp_?(new Date).getTime()>t._expirationTimestamp_?null:t.value:t},set:function(e,t,n){if(n){var r=new Date;t={value:t,_expirationTimestamp_:"s"===String(n).slice(-1)?r.getTime()+1e3*Number(String(n).slice(0,-1)):r.getTime()+24*n*60*60*1e3}}this.data[e]=t},getNewUserFlagMemoryKey:function(e){return"sajssdk_2015_"+On.sdk_id+e}},Cn={checkIsAddSign:function(e){"track"===e.type&&(be()?e.properties.$is_first_day=!0:e.properties.$is_first_day=!1)},is_first_visit_time:!1,is_page_first_visited:!1,checkIsFirstTime:function(e){"track"===e.type&&"$pageview"===e.event&&(this.is_first_visit_time?(e.properties.$is_first_time=!0,this.is_first_visit_time=!1):e.properties.$is_first_time=!1)},setDeviceId:function(){},storeInitCheck:function(){if(rn.is_first_visitor){var e=new Date,t={h:23-e.getHours(),m:59-e.getMinutes(),s:59-e.getSeconds()};In.isSupport()?In.set(ye("new_user"),"1",3600*t.h+60*t.m+t.s+"s"):xn.set(xn.getNewUserFlagMemoryKey("new_user"),"1",3600*t.h+60*t.m+t.s+"s"),this.is_first_visit_time=!0,this.is_page_first_visited=!0}else be()||(this.checkIsAddSign=function(e){"track"===e.type&&(e.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(e){"track"===e.type&&"$pageview"===e.event&&(e.properties.$is_first_time=!1)}}},En=function(){this._events=[],this.pendingEvents=[]};En.prototype={emit:function(e){var t=[].slice.call(arguments,1);O(this._events,(function(n){n.type===e&&n.callback.apply(n.context,t)})),this.pendingEvents.push({type:e,data:t}),this.pendingEvents.length>20&&this.pendingEvents.shift()},on:function(t,n,r,i){e(n)&&(this._events.push({type:t,callback:n,context:r||this}),i=!1!==i,this.pendingEvents.length>0&&i&&O(this.pendingEvents,(function(e){e.type===t&&n.apply(r,e.data)})))},tempAdd:function(e,t){if(t&&e)return this.emit(e,t)},isReady:function(){}};var Dn={data:{},id:function(){return this.data.id||(this.data.id=Oe()),this.data.id},type:function(){return this.data.type||(this.data.type=ke()),this.data.type}},Ln={distinct_id:function(){},jssdkDebug:function(){},_sendDebug:function(e){},apph5:function(e){var t="app_h5打通失败-",r={1:t+"use_app_track为false",2:t+"Android或者iOS，没有暴露相应方法",3.1:t+"Android校验server_url失败",3.2:t+"iOS校验server_url失败",4.1:t+"H5 校验 iOS server_url 失败",4.2:t+"H5 校验 Android server_url 失败"},i=e.output,a=e.step,o=e.data||"";"all"!==i&&"console"!==i||_e(r[a]),("all"===i||"code"===i)&&n(On.is_debug)&&On.is_debug.apph5&&(o.type&&"profile"===o.type.slice(0,7)||(o.properties._jssdk_debug_info="apph5-"+String(a)))},defineMode:function(e){var t={1:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 App SDK 的配置，详细信息请查看文档。",link_text:"",link_url:""},2:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 Web JS SDK 的配置，详细信息请查看文档。",link_text:"",link_url:""},3:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 没有开启全埋点配置，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"",link_url:""},4:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 配置的数据校验地址与 App SDK 配置的数据校验地址不一致，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"",link_url:""}};return!(!e||!t[e])&&t[e]},protocol:{protocolIsSame:function(e,t){try{if(_(e).protocol!==_(t).protocol)return!1}catch(e){return he("不支持 _.URL 方法"),!1}return!0},serverUrl:function(){p(On.server_url)&&""!==On.server_url&&!this.protocolIsSame(On.server_url,location.href)&&he("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。\n因为：1、https 下面发送 http 的图片请求会失败。2、http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。")},ajax:function(e){return e!==On.server_url&&void(p(e)&&""!==e&&!this.protocolIsSame(e,location.href)&&he("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。因为 http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。"))}}},$n={initPage:function(){var e=Te(),t=q(),n=ve(t);n||Ln.jssdkDebug("url_domain异常_"+t+"_"+n),this.pageProp={referrer:e,referrer_host:e?R(e):"",url:t,url_host:R(t,"url_host取值异常"),url_domain:n}},pageProp:{},campaignParams:function(){return rn.kit.getUtmData()},campaignParamsStandard:function(e,t){e=e||"",t=t||"";var n=$n.campaignParams(),r={},i={};return O(n,(function(n,a,o){-1!==(" "+An+" ").indexOf(" "+a+" ")?r[e+a]=o[a]:i[t+a]=o[a]})),{$utms:r,otherUtms:i}},properties:function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body&&document.body.clientHeight||0,t=window.innerWidth||document.documentElement.clientWidth||document.body&&document.body.clientWidth||0;return{$timezone_offset:(new Date).getTimezoneOffset(),$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$viewport_height:e,$viewport_width:t,$lib:"js",$lib_version:Pn}},currentProps:{},register:function(e){T($n.currentProps,e)}},Un={},Bn=new l;Un.spa=Bn,Un.sdk=new l,Un.data=new l,Un.initSystemEvent=function(){!function(t){var n,r=location.href,i=window.history.pushState,a=window.history.replaceState;e(window.history.pushState)&&(window.history.pushState=function(){i.apply(window.history,arguments),t(r),r=location.href}),e(window.history.replaceState)&&(window.history.replaceState=function(){a.apply(window.history,arguments),t(r),r=location.href}),n=window.document.documentMode?"hashchange":i?"popstate":"hashchange",w(window,n,(function(){t(r),r=location.href}))}((function(e){Bn.emit("switch",e)}))},Un.EVENT_LIST={spaSwitch:["spa","switch"],sdkBeforeInit:["sdk","beforeInit"],sdkInitPara:["sdk","initPara"],sdkAfterInitPara:["sdk","afterInitPara"],sdkInitAPI:["sdk","initAPI"],sdkAfterInitAPI:["sdk","afterInitAPI"],sdkAfterInit:["sdk","afterInit"],sdkReady:["sdk","ready"],dataSendSuccess:["data","sendSuccess"],dataSendFail:["data","sendFail"]};var Rn=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=e.data,this.origin_data=e.origin_data};Rn.prototype.start=function(){var e=this,t=new Date;Ue({url:this.server_url,type:"POST",data:e.data,credentials:!1,timeout:On.datasend_timeout,cors:!0,success:function(n,r){Un.data.emit("sendSuccess",{status:String(r),resText:n,type:"ajax_single",timeout_config:On.datasend_timeout,request_timeout:new Date-t,data:e.origin_data}),e.end()},error:function(n,r){Un.data.emit("sendFail",{status:String(r),resText:n,type:"ajax_single",timeout_config:On.datasend_timeout,request_timeout:new Date-t,data:e.origin_data}),e.end()}})},Rn.prototype.end=function(){if(this.callback){if(_e("warning: sdk callback is deprecated."),!e(this.callback))return void _e("error: sdk callback must be function.");this.callback()}};var Mn="sawebjssdk-",Hn="tab-sawebjssdk-";He.prototype={batchInterval:function(){""===this.serverUrl&&this.getServerUrl(),this.hasTabStorage||(this.generateTabStorage(),this.hasTabStorage=!0);var e=this;e.timer=setTimeout((function(){e.updateExpireTime(),e.recycle(),e.send(),clearTimeout(e.timer),e.batchInterval()}),On.batch_send.send_interval)},getServerUrl:function(){return p(On.server_url)&&""!==On.server_url||y(On.server_url)&&On.server_url.length?void(this.serverUrl=y(On.server_url)?On.server_url[0]:On.server_url):me("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},send:function(){if(this.sendTimeStamp&&t()-this.sendTimeStamp<On.batch_send.send_interval)return!1;var e=sn.get(this.tabKey);if(e){this.sendTimeStamp=t();var n=fe((e=a(e)||this.generateTabStorageVal()).data);if(n.length){for(var r=[],i=0;i<n.length;i++){var o=rn.store.readObjectVal(n[i]);o&&(o._flush_time=(new Date).getTime(),r.push(o))}r.length&&this.request(r,e.data)}}},updateExpireTime:function(){var e=sn.get(this.tabKey);e&&((e=a(e)||this.generateTabStorageVal()).expireTime=t()+2*On.batch_send.send_interval,e.serverUrl=this.serverUrl,sn.set(this.tabKey,JSON.stringify(e)))},request:function(e,t){var n=this,r=new Date;Ue({url:this.serverUrl,type:"POST",data:"data_list="+encodeURIComponent(j(JSON.stringify(e))),credentials:!1,timeout:On.batch_send.datasend_timeout,cors:!0,success:function(i,a){Un.data.emit("sendSuccess",{status:String(a),resText:i,type:"ajax_batch",timeout_config:On.batch_send.datasend_timeout,request_timeout:new Date-r,data:e}),n.remove(t),n.sendTimeStamp=0},error:function(t,i){Un.data.emit("sendFail",{status:String(i),resText:t,type:"ajax_batch",timeout_config:On.batch_send.datasend_timeout,request_timeout:new Date-r,data:e}),n.sendTimeStamp=0}})},remove:function(e){var t=sn.get(this.tabKey);if(t){for(var n=(a(t)||this.generateTabStorageVal()).data,r=0;r<e.length;r++){var i=X(n,e[r]);i>-1&&n.splice(i,1),sn.remove(e[r])}n=fe(n),sn.set(this.tabKey,JSON.stringify(this.generateTabStorageVal(n)))}},add:function(e){var n=Mn+String(r()),i=sn.get(this.tabKey);null===i?(this.tabKey=Hn+String(r()),i=this.generateTabStorageVal()):i=a(i)||this.generateTabStorageVal(),i.data.push(n),i.expireTime=t()+2*On.batch_send.send_interval,sn.set(this.tabKey,JSON.stringify(i)),rn.store.saveObjectVal(n,e),"track_signup"!==e.type&&"$pageview"!==e.event||this.sendImmediately()},generateTabStorage:function(){this.tabKey=Hn+String(r()),sn.set(this.tabKey,JSON.stringify(this.generateTabStorageVal()))},generateTabStorageVal:function(e){return{data:e=e||[],expireTime:t()+2*On.batch_send.send_interval,serverUrl:this.serverUrl}},sendImmediately:function(){this.send()},recycle:function(){for(var e={},n="sajssdk-lock-get-",r=0;r<localStorage.length;r++){var i=localStorage.key(r),o=this;if(0===i.indexOf(Hn)){for(var c=a(sn.get(i))||this.generateTabStorageVal(),l=0;l<c.data.length;l++)e[c.data[l]]=!0;i!==o.tabKey&&t()>c.expireTime&&this.serverUrl===c.serverUrl&&new s(n).get(i,1e4,1e3,(function(e){if(e){null===sn.get(o.tabKey)&&o.generateTabStorage();var t=a(e)||o.generateTabStorageVal(),n=a(sn.get(o.tabKey))||o.generateTabStorageVal();n.data=fe(n.data.concat(t.data)),sn.set(o.tabKey,JSON.stringify(n))}}))}else if(0===i.indexOf(n)){var u=a(sn.get(i))||{expireTime:0};t()-u.expireTime>1e4&&sn.remove(i)}}for(var d=0;d<localStorage.length;d++){var p=localStorage.key(d);0!==p.indexOf(Mn)||e[p]||sn.remove(p)}}};var Jn=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=e.data};Jn.prototype.start=function(){var e=this;"object"==("undefined"==typeof navigator?"undefined":i(navigator))&&"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.server_url,this.data),setTimeout((function(){e.end()}),40)},Jn.prototype.end=function(){if(this.callback){if(_e("warning: sdk callback is deprecated."),!e(this.callback))return void _e("error: sdk callback must be function.");this.callback()}};var Fn=function(e){this.callback=e.callback,this.img=document.createElement("img"),this.img.width=1,this.img.height=1,On.img_use_crossorigin&&(this.img.crossOrigin="anonymous"),this.server_url=e.data};Fn.prototype.start=function(){var e=this;On.ignore_oom&&(this.img.onload=function(){this.onload=null,this.onerror=null,this.onabort=null,e.end()},this.img.onerror=function(){this.onload=null,this.onerror=null,this.onabort=null,e.end()},this.img.onabort=function(){this.onload=null,this.onerror=null,this.onabort=null,e.end()}),this.img.src=this.server_url},Fn.prototype.lastClear=function(){void 0!==V().ie?this.img.src="about:blank":this.img.src=""},Fn.prototype.end=function(){if(this.callback){if(_e("warning: sdk callback is deprecated."),!e(this.callback))return void _e("error: sdk callback must be function.");this.callback()}var t=this;setTimeout((function(){t.lastClear&&t.lastClear()}),On.datasend_timeout-On.callback_timeout)};var Vn={__proto__:null,addEvent:we,EventEmitterSa:En,cookie:In,info:$n,getReferrer:Te,getCurrentDomain:ve,isBaiduTraffic:Se,getReferrerEqid:Oe,getReferrerEqidType:ke,getBaiduKeyword:Dn,isReferralTraffic:Ae,getKeywordFromReferrer:Pe,getReferSearchEngine:Ne,getSourceFromReferrer:je,getWxAdIdFromUrl:Ie,parseSuperProperties:xe,searchConfigData:Ce,strip_empty_properties:Ee,getEleInfo:De,getElementContent:$e,ajax:Ue,optimizeServerUrl:Be,encodeTrackData:Re,AjaxSend:Rn,BatchSend:He,BeaconSend:Jn,ImageSend:Fn},qn=new En,Kn={requests:[],_sessionState:{},_state:{distinct_id:"",first_id:"",props:{},identities:{}},getProps:function(){return this._state.props||{}},getSessionProps:function(){return this._sessionState},getOriginDistinctId:function(){return this._state._distinct_id||this._state.distinct_id},getOriginUnionId:function(e){var t={},n=(e=e||this._state)._first_id||e.first_id,r=e._distinct_id||e.distinct_id;return n&&r?(t.login_id=r,t.anonymous_id=n):t.anonymous_id=r,t},getIdentities:function(){var e=JSON.parse(JSON.stringify(this._state.identities));return e.$identity_anonymous_id=this.getAnonymousId(),e},getAnonymousId:function(){return Kn._state._first_id||Kn._state.first_id||Kn._state._distinct_id||Kn._state.distinct_id},getDistinctId:function(){var e=this.getUnionId();return e.login_id||e.anonymous_id},getUnionId:function(e){var t=this.getOriginUnionId(e);return t.login_id&&this._state.history_login_id&&this._state.history_login_id.name&&this._state.history_login_id.name!==jn.LOGIN&&(t.login_id=this._state.history_login_id.name+"+"+t.login_id),t},getFirstId:function(){return this._state._first_id||this._state.first_id},initSessionState:function(){var e=In.get("sensorsdata2015session"),t=null;null!==(e=rn.kit.userDecryptIfNeeded(e))&&"object"==i(t=a(e))&&(this._sessionState=t||{})},setOnce:function(e,t){e in this._state||this.set(e,t)},set:function(e,t){this._state=this._state||{};var n=this._state.distinct_id;this._state[e]=t,"first_id"===e?delete this._state._first_id:"distinct_id"===e&&delete this._state._distinct_id,this.save(),"distinct_id"===e&&n&&qn.tempAdd("changeDistinctId",t)},change:function(e,t){this._state["_"+e]=t},setSessionProps:function(e){rn.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问");var t=this._sessionState;T(t,e),this.sessionSave(t)},setSessionPropsOnce:function(e){rn.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问");var t=this._sessionState;I(t,e),this.sessionSave(t)},setProps:function(e,t){var n={};for(var r in n=t?e:T(this._state.props||{},e))"string"==typeof n[r]&&(n[r]=n[r].slice(0,rn.para.max_referrer_string_length));this.set("props",n)},setPropsOnce:function(e){var t=this._state.props||{};I(t,e),this.set("props",t)},clearAllProps:function(e){var t;if(this._sessionState={},y(e)&&e.length>0)for(t=0;t<e.length;t++)p(e[t])&&-1===e[t].indexOf("latest_")&&n(this._state.props)&&e[t]in this._state.props&&delete this._state.props[e[t]];else if(n(this._state.props))for(t in this._state.props)1!==t.indexOf("latest_")&&delete this._state.props[t];this.sessionSave({}),this.save()},sessionSave:function(e){rn.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问"),this._sessionState=e;var t=JSON.stringify(this._sessionState);rn.para.encrypt_cookie&&(t=rn.kit.userEncrypt(t)),In.set("sensorsdata2015session",t,0)},save:function(){var e=JSON.parse(JSON.stringify(this._state));delete e._first_id,delete e._distinct_id,e.identities&&(e.identities=j(JSON.stringify(e.identities)));var t=JSON.stringify(e);rn.para.encrypt_cookie&&(t=rn.kit.userEncrypt(t)),In.set(this.getCookieName(),t,360,rn.para.cross_subdomain)},getCookieName:function(){var e="";if(!1===rn.para.cross_subdomain){try{var t=location.host;v(rn.para.white_list[t])||(e=rn.para.white_list[t])}catch(e){he(e)}e="string"==typeof e&&""!==e?"sa_jssdk_2015_"+rn.para.sdk_id+e.replace(/\./g,"_"):"sa_jssdk_2015_root"+rn.para.sdk_id}else e="sensorsdata2015jssdkcross"+rn.para.sdk_id;return e},init:function(){this.initSessionState();var e,t,r=ln();In.isSupport()&&(e=In.get(this.getCookieName()),t=a(e=rn.kit.userDecryptIfNeeded(e))),In.isSupport()&&null!==e&&re(e)&&n(t)&&(!n(t)||t.distinct_id)?(Kn._state=T(function(e){var t;e.identities&&(0===e.identities.indexOf("\n/")?e.identities=a(le(e.identities)):e.identities=a(N(e.identities)));var r=Kn.getOriginUnionId(e);e.identities&&n(e.identities)&&!ee(e.identities)||(e.identities={},e.identities.$identity_cookie_id=ln()),e.history_login_id=e.history_login_id||{};var i=e.history_login_id.name;if(r.login_id)if(i&&e.identities.hasOwnProperty(i)){if(e.identities[i]!==r.login_id){for(t in e.identities[i]=r.login_id,e.identities)e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&t!==i&&delete e.identities[t];e.history_login_id.value=r.login_id}}else{var o=i||jn.LOGIN;for(t in e.identities[o]=r.login_id,e.identities)e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&t!==o&&delete e.identities[t];e.history_login_id={name:o,value:r.login_id}}else{if(e.identities.hasOwnProperty("$identity_login_id")||e.identities.hasOwnProperty(i))for(t in e.identities)e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&"$identity_anonymous_id"!==t&&delete e.identities[t];e.history_login_id={name:"",value:""}}return e}(t)),Kn.save()):(rn.is_first_visitor=!0,function(e){Kn.set("distinct_id",e),Kn.set("identities",{$identity_cookie_id:e}),Kn.set("history_login_id",{name:"",value:""})}(r)),Cn.setDeviceId(r,this),Cn.storeInitCheck()},saveObjectVal:function(e,t){p(t)||(t=JSON.stringify(t)),1==rn.para.encrypt_cookie&&(t=rn.kit.userEncrypt(t)),sn.set(e,t)},readObjectVal:function(e){var t=sn.get(e);return t?a(t=rn.kit.userDecryptIfNeeded(t)):null}},Wn={string:function(e){he(e+" must be string")},emptyString:function(e){he(e+"'s is empty")},regexTest:function(e){he(e+" is invalid")},idLength:function(e){he(e+" length is longer than "+On.max_id_length)},keyLength:function(e){he(e+" length is longer than "+On.max_key_length)},stringLength:function(e){he(e+" length is longer than "+On.max_string_length)},voidZero:function(e){he(e+"'s is undefined")},reservedLoginId:function(e){he(e+" is invalid")},reservedBind:function(e){he(e+" is invalid")},reservedUnbind:function(e){he(e+" is invalid")}},zn={regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$|^user_tag.*|^user_group.*)[a-zA-Z_$][a-zA-Z\d_$]*)$/i,loginIDReservedNames:["$identity_anonymous_id","$identity_cookie_id"],bindReservedNames:["$identity_login_id","$identity_anonymous_id","$identity_cookie_id"],unbindReservedNames:["$identity_anonymous_id",jn.LOGIN],string:function(e){return!!p(e)},emptyString:function(e){return!(!p(e)||0===f(e).length)},regexTest:function(e){return!(!p(e)||!this.regName.test(e))},idLength:function(e){return!(!p(e)||e.length>On.max_id_length)},keyLength:function(e){return!(!p(e)||e.length>On.max_key_length)},stringLength:function(e){return!(!p(e)||e.length>On.max_string_length)},voidZero:function(e){return void 0!==e},reservedLoginId:function(e){return!(X(this.loginIDReservedNames,e)>-1)},reservedUnbind:function(e){return!(X(this.unbindReservedNames,e)>-1)},reservedBind:function(e){var t=Kn._state.history_login_id;return!(t&&t.name&&t.name===e||X(this.bindReservedNames,e)>-1)}},Gn={distinct_id:{rules:["string","emptyString","idLength"],onComplete:function(t,n,r){return!t&&("emptyString"===r&&(n="Id"),e(Wn[r])&&Wn[r](n),"idLength"===r)||t}},event:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(t,n,r){return t||("emptyString"===r&&(n="eventName"),e(Wn[r])&&Wn[r](n)),!0}},propertyKey:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(t,n,r){return t||("emptyString"===r&&(n="Property key"),e(Wn[r])&&Wn[r](n)),!0}},propertyValue:{rules:["voidZero"],onComplete:function(t,n,r){return t||e(Wn[r])&&Wn[r]("Property Value"),!0}},properties:function(t){return n(t)?O(t,(function(t,n){Je({propertyKey:n}),Je({propertyValue:t},(function(t,r,i){return t||(r=n+"'s Value",e(Wn[i])&&Wn[i](r)),!0}))})):zn.voidZero(t)&&he("properties可以没有，但有的话必须是对象"),!0},propertiesMust:function(e){return void 0!==e&&n(e)&&!ee(e)?this.properties.call(this,e):he("properties必须是对象"),!0},item_type:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(t,n,r){return t||("emptyString"===r&&(n="item_type"),e(Wn[r])&&Wn[r](n)),!0}},item_id:{rules:["string","emptyString","stringLength"],onComplete:function(t,n,r){return t||("emptyString"===r&&(n="item_id"),e(Wn[r])&&Wn[r](n)),!0}},loginIdKey:{rules:["string","emptyString","keyLength","regexTest","reservedLoginId"],onComplete:function(t,n,r){return!t&&("emptyString"===r&&(n="login_id_key"),e(Wn[r])&&Wn[r](n),"keyLength"===r)||t}},bindKey:{rules:["string","emptyString","keyLength","regexTest","reservedBind"],onComplete:function(t,n,r){return!t&&("emptyString"===r&&(n="Key"),e(Wn[r])&&Wn[r](n),"keyLength"===r)||t}},unbindKey:{rules:["string","emptyString","keyLength","regexTest","reservedUnbind"],onComplete:function(t,n,r){return!t&&("emptyString"===r&&(n="Key"),e(Wn[r])&&Wn[r](n),"keyLength"===r)||t}},bindValue:{rules:["string","emptyString","idLength"],onComplete:function(t,n,r){return!t&&("emptyString"===r&&(n="Value"),e(Wn[r])&&Wn[r](n),"idLength"===r)||t}},check:function(t,n,r){var i=this[t];if(e(i))return i.call(this,n);if(!i)return!1;for(var a=0;a<i.rules.length;a++){var o=i.rules[a],s=zn[o](n),c=e(r)?r(s,n,o):i.onComplete(s,n,o);if(!s)return c}return!0}},Yn={initUrl:function(){var e,t,n={server_url:{project:"",host:""},page_url:{host:"",pathname:""}};if(!te(rn.para.server_url))return me("----vcollect---server_url必须为有效 URL 字符串"),!1;try{e=_(rn.para.server_url),n.server_url.project=e.searchParams.get("project")||"default",n.server_url.host=e.host}catch(e){return me("----vcollect---server_url解析异常",e),!1}try{t=_(location.href),n.page_url.host=t.hostname,n.page_url.pathname=t.pathname}catch(e){return me("----vcollect---页面地址解析异常",e),!1}return n},isDiv:function(e){return!e.element_path||"div"===f(e.element_path.split(">").pop()).slice(0,3)},configIsMatchNew:function(e,t){if(p(e.$element_selector)&&p(t.element_selector)){if("element_selector"===t.element_field&&"equal"===t.function)return e.$element_selector===t.element_selector;if("element_selector"===t.element_field&&"contain"===t.function)return e.$element_selector.indexOf(t.element_selector)>-1}if(p(e.$element_path)&&p(t.element_path)){if("element_path"===t.element_field&&"equal"===t.function)return e.$element_path===t.element_path;if("element_path"===t.element_field&&"contain"===t.function)return e.$element_path.indexOf(t.element_path)>-1}return!1},configIsMatch:function(e,t){return(!t.limit_element_content||t.element_content===e.$element_content)&&(!t.limit_element_position||t.element_position===String(e.$element_position))&&(t.element_field&&t.function?Yn.configIsMatchNew(e,t):Yn.configIsMatchOldVersion(e,t))},configIsMatchOldVersion:function(e,t){if(!t.element_path)return!1;if(void 0!==e.$element_position){if(t.element_path!==e.$element_path)return!1}else if(Yn.isDiv({element_path:t.element_path})){if(e.$element_path.indexOf(t.element_path)<0)return!1}else if(t.element_path!==e.$element_path)return!1;return!0},filterConfig:function(e,t,r){var i=[];if(!r){var a=Yn.initUrl();if(!a)return[];r=a.page_url}return"$WebClick"===e.event&&O(t,(function(t){n(t)&&("webclick"===t.event_type||"appclick"===t.event_type)&&n(t.event)&&t.event.url_host===r.host&&t.event.url_path===r.pathname&&Yn.configIsMatch(e.properties,t.event)&&i.push(t)})),i},getPropElInLi:function(e,t){if(!(e&&h(e)&&p(t)))return null;if("li"!==e.tagName.toLowerCase())return null;var n=rn.heatmap.getDomSelector(e);if(n){var r=U(n+t);return r||null}return he("----custom---获取同级属性元素失败，selector信息异常",n,t),null},getProp:function(e,t){if(!n(e))return!1;if(!(p(e.name)&&e.name.length>0))return he("----vcustom----属性名不合法,属性抛弃",e.name),!1;var r,i,a={};if("content"===e.method){var o;if(p(e.element_selector)&&e.element_selector.length>0)o=U(e.element_selector);else{if(!t||!p(e.list_selector))return he("----vcustom----属性配置异常，属性抛弃",e.name),!1;var s=U(t.properties.$element_selector);if(!s)return he("----vcustom----点击元素获取异常，属性抛弃",e.name),!1;var c=rn.heatmap.getClosestLi(s);o=Yn.getPropElInLi(c,e.list_selector)}if(!o||!h(o))return he("----vcustom----属性元素获取失败，属性抛弃",e.name),!1;if("input"===o.tagName.toLowerCase())r=o.value||"";else if("select"===o.tagName.toLowerCase()){var l=o.selectedIndex;ie(l)&&h(o[l])&&(r=$e(o[l],"select"))}else r=$e(o,o.tagName.toLowerCase());if(e.regular){try{i=new RegExp(e.regular).exec(r)}catch(t){return he("----vcustom----正则处理失败，属性抛弃",e.name),!1}if(null===i)return he("----vcustom----属性规则处理，未匹配到结果,属性抛弃",e.name),!1;if(!y(i)||!p(i[0]))return he("----vcustom----正则处理异常，属性抛弃",e.name,i),!1;r=i[0]}if("STRING"===e.type)a[e.name]=r;else if("NUMBER"===e.type){if(r.length<1)return he("----vcustom----未获取到数字内容，属性抛弃",e.name,r),!1;if(isNaN(Number(r)))return he("----vcustom----数字类型属性转换失败，属性抛弃",e.name,r),!1;a[e.name]=Number(r)}return a}return me("----vcustom----属性不支持此获取方式",e.name,e.method),!1},getAssignConfigs:function(e,t){var r=Yn.initUrl();if(!r||!r.page_url)return[];if(!n(t))return[];var i=[];return t.events=t.events||t.eventList,y(t.events)&&t.events.length>0?(O(t.events,(function(t){n(t)&&n(t.event)&&t.event.url_host===r.page_url.host&&t.event.url_path===r.page_url.pathname&&e(t)&&i.push(t)})),i):[]}},Xn={events:[],getAssignConfigs:Yn.getAssignConfigs,filterConfig:Yn.filterConfig,getProp:Yn.getProp,initUrl:Yn.initUrl,updateEvents:function(e){y(e)&&(this.events=e)},init:function(){this.initAppGetPropsBridge()},geth5Props:function(e){var t={},r=[],i=this;if(!this.events.length)return{};if("$WebClick"===e.event){var a=this.filterConfig(e,this.events);if(!a.length)return{};O(a,(function(a){n(a)&&(y(a.properties)&&a.properties.length>0&&O(a.properties,(function(r){if(n(r))if(!1===r.h5)y(t.sensorsdata_app_visual_properties)||(t.sensorsdata_app_visual_properties=[]),t.sensorsdata_app_visual_properties.push(r);else{var a=i.getProp(r,e);n(a)&&(t=T(t,a))}})),p(a.event_name)&&r.push(a.event_name))})),rn.bridge.hasVisualModeBridge()&&(t.sensorsdata_web_visual_eventName=r)}return t.sensorsdata_app_visual_properties&&(t.sensorsdata_app_visual_properties=j(JSON.stringify(t.sensorsdata_app_visual_properties))),t},initAppGetPropsBridge:function(){var e=this,t=new rn.SDKJSBridge("getJSVisualProperties");return t.onAppNotify((function(r){var i={};try{r=JSON.parse(N(r))}catch(e){me("getJSVisualProperties data parse error!")}if(n(r)){var a=r.sensorsdata_js_visual_properties,o=e.initUrl();o&&(o=o.page_url,y(a)&&a.length>0&&O(a,(function(t){if(n(t)&&t.url_host===o.host&&t.url_path===o.pathname&&t.h5){var r=e.getProp(t);n(r)&&(i=T(i,r))}})))}return"android"===rn.bridge.bridge_info.platform&&t.notifyApp({data:i},r.message_id),i})),t}},Zn={events:[],customProp:Xn,getAssignConfigs:Yn.getAssignConfigs,initUrl:Yn.initUrl,init:function(){if(this.initUrl()){var e=this.getConfigFromApp();e&&this.updateConfigs(e),this.customProp.init(),this.initAppUpdateConfigBridge()}},initAppUpdateConfigBridge:function(){var e=this;return new rn.SDKJSBridge("updateH5VisualConfig").onAppNotify((function(t){if(t){try{t=JSON.parse(N(t))}catch(e){return void me("updateH5VisualConfig result parse error！")}e.updateConfigs(t)}}))},getConfigFromApp:function(){var e=new rn.SDKJSBridge("sensorsdata_get_app_visual_config").notifyApp();if(e)try{e=JSON.parse(N(e))}catch(t){e=null,me("getAppVisualConfig result parse error！")}return e},updateConfigs:function(e){this.events=this.filterConfigs(e),this.customProp.updateEvents(this.events)},filterConfigs:function(e){return this.getAssignConfigs((function(e){return!(!n(e)||!1===e.h5)}),e)}},Qn={events:[],init:function(e){this.filterWebClickEvents(e)},filterWebClickEvents:function(e){this.events=tr.getAssignConfigs((function(e){return!(!n(e)||!0!==e.event.unlimited_div||"webclick"!==e.event_type)}),e)},isTargetEle:function(e){var t=rn.heatmap.getEleDetail(e);if(!n(t)||!p(t.$element_path))return!1;for(var r=0;r<this.events.length;r++)if(n(this.events[r])&&n(this.events[r].event)&&tr.configIsMatch(t,this.events[r].event))return!0;return!1}},er={events:[],configSwitch:!1,collectAble:function(){return this.configSwitch&&n(rn.para.heatmap)&&rn.para.heatmap.get_vtrack_config},updateEvents:function(e){this.events=tr.getAssignConfigs((function(e){return!!(n(e)&&y(e.properties)&&e.properties.length>0)}),e),this.events.length?this.configSwitch=!0:this.configSwitch=!1},getVtrackProps:function(e){var t={};return this.collectAble()?("$WebClick"===e.event&&(t=this.clickCustomPropMaker(e,this.events)),t):{}},clickCustomPropMaker:function(e,t,r){var i=this;r=r||this.filterConfig(e,t,tr.url_info.page_url);var a={};return r.length?(O(r,(function(t){y(t.properties)&&t.properties.length>0&&O(t.properties,(function(t){var r=i.getProp(t,e);n(r)&&T(a,r)}))})),a):{}},getProp:Yn.getProp,getPropElInLi:Yn.getPropElInLi,filterConfig:Yn.filterConfig},tr={unlimitedDiv:Qn,config:{},storageEnable:!0,storage_name:"webjssdkvtrackcollect",para:{session_time:18e5,timeout:5e3,update_interval:18e5},url_info:{},timer:null,update_time:null,customProp:er,initUrl:function(){var e=Yn.initUrl();if(e){var t;try{(t=new g(rn.para.server_url))._values.Path="/config/visualized/Web.conf",e.api_url=t.getUrl()}catch(e){return me("----vtrackcollect---API地址解析异常",e),!1}this.url_info=e}return e},init:function(){if(!n(rn.para.heatmap)||!rn.para.heatmap.get_vtrack_config)return!1;if(sn.isSupport()||(this.storageEnable=!1),!this.initUrl())return me("----vtrackcustom----初始化失败，url信息解析失败"),!1;if(this.storageEnable){var e=Kn.readObjectVal(this.storage_name);if(n(e)&&n(e.data))if(this.serverUrlIsSame(e.serverUrl)){this.config=e.data,this.update_time=e.updateTime,this.updateConfig(e.data);var t=(new Date).getTime()-this.update_time;if(ie(t)&&t>0&&t<this.para.session_time){var r=this.para.update_interval-t;this.setNextFetch(r)}else this.getConfigFromServer()}else this.getConfigFromServer();else this.getConfigFromServer()}else this.getConfigFromServer();this.pageStateListenner()},serverUrlIsSame:function(e){return!!n(e)&&e.host===this.url_info.server_url.host&&e.project===this.url_info.server_url.project},getConfigFromServer:function(){var e=this;this.sendRequest((function(t,r){e.update_time=(new Date).getTime();var i={};200===t?r&&n(r)&&"Web"===r.os&&(i=r,e.updateConfig(i)):205===t?e.updateConfig(i):304===t?i=e.config:(me("----vtrackcustom----数据异常",t),e.updateConfig(i)),e.updateStorage(i),e.setNextFetch()}),(function(t){e.update_time=(new Date).getTime(),me("----vtrackcustom----配置拉取失败",t),e.setNextFetch()}))},setNextFetch:function(e){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),e=e||this.para.update_interval,this.timer=setTimeout((function(){t.getConfigFromServer()}),e)},pageStateListenner:function(){var e=this;oe({visible:function(){var t=(new Date).getTime()-e.update_time;if(ie(t)&&t>0&&t<e.para.update_interval){var n=e.para.update_interval-t;e.setNextFetch(n)}else e.getConfigFromServer()},hidden:function(){e.timer&&(clearTimeout(e.timer),e.timer=null)}})},updateConfig:function(e){return!!n(e)&&(this.config=e,this.customProp.updateEvents(e),void this.unlimitedDiv.init(e))},updateStorage:function(e){if(!this.storageEnable)return!1;if(!n(e))return!1;var t;if(this.url_info.server_url)t=this.url_info.server_url;else{var r=tr.initUrl();if(!r)return!1;t=r.server_url}var i={updateTime:(new Date).getTime(),data:e,serverUrl:t};Kn.saveObjectVal(this.storage_name,i)},sendRequest:function(e,t){var n={app_id:this.url_info.page_url.host};this.config.version&&(n.v=this.config.version),ae({url:this.url_info.api_url,callbackName:"saJSSDKVtrackCollectConfig",data:n,timeout:this.para.timeout,success:function(t,n){e(t,n)},error:function(e){t(e)}})},getAssignConfigs:Yn.getAssignConfigs,configIsMatch:Yn.configIsMatch},nr={basicProps:{priority:0,entry:function(e,t){try{var r=t.sensors,i={};n(e)&&n(e.identities)&&!ee(e.identities)?T(i,e.identities):T(i,Kn.getIdentities());var a={identities:i,distinct_id:Kn.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(r.lib_version)},properties:{}};return n(e)&&n(e.properties)&&!ee(e.properties)&&(e.properties.$lib_detail&&(a.lib.$lib_detail=e.properties.$lib_detail,delete e.properties.$lib_detail),e.properties.$lib_method&&(a.lib.$lib_method=e.properties.$lib_method,delete e.properties.$lib_method)),D(a,Kn.getUnionId(),e),n(e.properties)&&!ee(e.properties)&&T(a.properties,e.properties),"$UnbindID"===a.event&&(a.login_id&&delete a.login_id,a.anonymous_id&&delete a.anonymous_id),e.type&&"profile"===e.type.slice(0,7)||(a.properties=T({},$n.properties(),Kn.getProps(),Kn.getSessionProps(),$n.currentProps,a.properties),r.para.preset_properties.latest_referrer&&!p(a.properties.$latest_referrer)&&(a.properties.$latest_referrer="取值异常"),r.para.preset_properties.latest_search_keyword&&!p(a.properties.$latest_search_keyword)&&(r.para.preset_properties.search_keyword_baidu&&p(a.properties.$search_keyword_id)&&ie(a.properties.$search_keyword_id_hash)&&p(a.properties.$search_keyword_id_type)||(a.properties.$latest_search_keyword="取值异常")),r.para.preset_properties.latest_traffic_source_type&&!p(a.properties.$latest_traffic_source_type)&&(a.properties.$latest_traffic_source_type="取值异常"),r.para.preset_properties.latest_landing_page&&!p(a.properties.$latest_landing_page)&&(a.properties.$latest_landing_page="取值异常"),"not_collect"===r.para.preset_properties.latest_wx_ad_click_id?(delete a.properties._latest_wx_ad_click_id,delete a.properties._latest_wx_ad_hash_key,delete a.properties._latest_wx_ad_callbacks):r.para.preset_properties.latest_wx_ad_click_id&&!p(a.properties._latest_wx_ad_click_id)&&(a.properties._latest_wx_ad_click_id="取值异常",a.properties._latest_wx_ad_hash_key="取值异常",a.properties._latest_wx_ad_callbacks="取值异常"),p(a.properties._latest_wx_ad_click_id)&&(a.properties.$url=q())),a.properties.$time&&C(a.properties.$time)?(a.time=1*a.properties.$time,delete a.properties.$time):a.time=1*new Date,function(e){if(r.bridge&&"success"===r.bridge.bridge_info.verify_success){var t=Zn.customProp.geth5Props(JSON.parse(JSON.stringify(e)));n(t)&&!ee(t)&&(e.properties=T(e.properties,t))}var i=tr.customProp.getVtrackProps(JSON.parse(JSON.stringify(e)));n(i)&&!ee(i)&&(e.properties=T(e.properties,i))}(a),xe(a),Cn.checkIsAddSign(a),Cn.checkIsFirstTime(a),function(e){var t=!e.type||"profile"!==e.type.slice(0,7),r="取值异常";n(e.properties)&&t&&("$referrer"in e.properties&&(e.properties.$referrer_host=""===e.properties.$referrer?"":R(e.properties.$referrer,r)),On.preset_properties.latest_referrer&&On.preset_properties.latest_referrer_host&&(e.properties.$latest_referrer_host=""===e.properties.$latest_referrer?"":R(e.properties.$latest_referrer,r)))}(a),function(e){var t=!e.type||"profile"!==e.type.slice(0,7),n=On.preset_properties&&t;n&&On.preset_properties.url&&v(e.properties.$url)&&(e.properties.$url=q()),n&&On.preset_properties.title&&v(e.properties.$title)&&(e.properties.$title=document.title)}(a),a}catch(e){return{_debug_web_msg:String(e)}}}},formatData:{priority:0,entry:function(e){var t=e.properties;ue(e),n(t)?(Fe(t),function(e,t){n(e)&&O(["distinct_id","user_id","id","date","datetime","event","events","first_id","original_id","device_id","properties","second_id","time","users"],(function(n,r){n in e&&(X(t||[],n)>-1||(r<3?(delete e[n],he("您的属性- "+n+"是保留字段，我们已经将其删除")):he("您的属性- "+n+"是保留字段，请避免其作为属性名")))}))}(t),function(e){void 0!==e.properties.$project&&(e.project=e.properties.$project,delete e.properties.$project),void 0!==e.properties.$token&&(e.token=e.properties.$token,delete e.properties.$token)}(e),function(e,t){O(e,(function(n,r){-1===X(t||[],r)&&Je({propertyKey:r},(function(t,n,i){return t||"keyLength"===i||delete e[r],!0}))}))}(t),Ve(t)):"properties"in e&&(e.properties={}),function(e){"item_type"in e&&Je({item_type:e.item_type},(function(t){return t||delete e.item_type,!0})),"item_id"in e&&Je({item_id:e.item_id},(function(t,n,r){return t||"string"!==r||delete e.item_id,!0}))}(e)}},finalAdjustData:{priority:0,entry:function(e,t){var n=t.sensors;return e._track_id=Number(String(r()).slice(2,5)+String(r()).slice(2,4)+String((new Date).getTime()).slice(-4)),e._flush_time=(new Date).getTime(),n.events.tempAdd("send",e),e}}},rr={stage:null,init:function(e){this.stage=e},interceptor:nr},ir={};ir.check=Je,ir.sendItem=function(e){var t={lib:{$lib:"js",$lib_method:"code",$lib_version:String(rn.lib_version)},time:1*new Date};T(t,e),function(e){rr.stage.process("formatData",e)}(t),rn.kit.sendData(t)},ir.send=function(e,t){var n=rn.kit.buildData(e);rn.kit.sendData(n,t)};var ar={stage:null,init:function(e){this.stage=e}},or={label:!1,li:!1,a:!0,button:!0},sr={otherTags:[],initUnlimitedTags:function(){O(sr.otherTags,(function(e){e in or&&(or[e]=!0)}))},isUnlimitedTag:function(e){if(!e||1!==e.nodeType)return!1;var t=e.nodeName.toLowerCase();return or[t]||z(e,rn.para.heatmap.track_attr)},getTargetElement:function(e,t){var n=this,r=e;if("object"!=i(r))return null;if("string"!=typeof r.tagName)return null;var a=r.tagName.toLowerCase();if("body"===a.toLowerCase()||"html"===a.toLowerCase())return null;if(!r||!r.parentNode||!r.parentNode.children)return null;var o=r.parentNode,s=n.otherTags;if("a"===a||"button"===a||"input"===a||"textarea"===a)return r;if(X(s,a)>-1)return r;if("area"===a&&"map"===o.tagName.toLowerCase()&&b(o).prev().tagName&&"img"===b(o).prev().tagName.toLowerCase())return b(o).prev();if("div"===a&&rn.para.heatmap.collect_tags.div&&n.isDivLevelValid(r)&&((rn.para.heatmap&&rn.para.heatmap.collect_tags&&rn.para.heatmap.collect_tags.div&&rn.para.heatmap.collect_tags.div.max_level||1)>1||n.isCollectableDiv(r)))return r;if(n.isStyleTag(a)&&rn.para.heatmap.collect_tags.div){var c=n.getCollectableParent(r);if(c&&n.isDivLevelValid(c))return c}var l=n.hasElement({event:t&&t.originalEvent||t,element:e},(function(e){return n.isUnlimitedTag(e)}));return l||null},getDivLevels:function(e,t){var n=sr.getElementPath(e,!0,t).split(" > "),r=0;return O(n,(function(e){"div"===e&&r++})),r},isDivLevelValid:function(e){for(var t=rn.para.heatmap&&rn.para.heatmap.collect_tags&&rn.para.heatmap.collect_tags.div&&rn.para.heatmap.collect_tags.div.max_level||1,n=e.getElementsByTagName("div"),r=n.length-1;r>=0;r--)if(sr.getDivLevels(n[r],e)>t)return!1;return!0},getElementPath:function(e,t,n){for(var r=[];e.parentNode&&h(e);){if(!p(e.tagName))return"unknown";if(e.id&&!t&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.id)){r.unshift(e.tagName.toLowerCase()+"#"+e.id);break}if(n&&e===n){r.unshift(e.tagName.toLowerCase());break}if(e===document.body){r.unshift("body");break}r.unshift(e.tagName.toLowerCase()),e=e.parentNode}return r.join(" > ")},getClosestLi:function(e){return function(e,t){for(;e&&e!==document&&1===e.nodeType;e=e.parentNode)if(e.tagName&&p(e.tagName)&&e.tagName.toLowerCase()===t)return e;return null}(e,"li")},getElementPosition:function(e,t,n){var r=rn.heatmap.getClosestLi(e);if(!r||!h(e)||!p(e.tagName))return null;var i=e.tagName.toLowerCase(),a=r.getElementsByTagName(i),o=a.length,s=[];if(o>1){for(var c=0;c<o;c++)rn.heatmap.getElementPath(a[c],n)===t&&s.push(a[c]);if(s.length>1)return X(s,e)}return function(e){if(!e.parentNode)return"";if(1===b(e).getSameTypeSiblings().length)return 0;for(var t=0,n=e;b(n).previousElementSibling().ele;n=b(n).previousElementSibling().ele,t++);return t}(r)},setNotice:function(e){rn.is_heatmap_render_mode=!0,rn.para.heatmap||(rn.errorMsg="您SDK没有配置开启点击图，可能没有数据！"),e&&"http:"===e.slice(0,5)&&"https:"===location.protocol&&(rn.errorMsg="您的当前页面是https的地址，神策分析环境也必须是https！"),rn.para.heatmap_url||(rn.para.heatmap_url=Ke()+"//static.sensorsdata.cn/sdk/"+rn.lib_version+"/heatmap.min.js")},getDomIndex:function(e){if(!e.parentNode)return-1;for(var t=0,n=e.tagName,r=e.parentNode.children,i=0;i<r.length;i++)if(r[i].tagName===n){if(e===r[i])return t;t++}return-1},selector:function(e,t){if(!e||!h(e)||!p(e.tagName))return"";var n=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.getAttribute&&e.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id"))&&(!rn.para.heatmap||rn.para.heatmap&&"not_use_id"!==rn.para.heatmap.element_selector)&&!t?"#"+e.getAttribute("id"):e.tagName.toLowerCase()+(~n?":nth-of-type("+(n+1)+")":"")},getDomSelector:function(e,t,n){if(!(e&&e.parentNode&&e.parentNode.children&&p(e.tagName)))return"unknown";t=t&&t.join?t:[];var r=e.nodeName.toLowerCase();return e&&"body"!==r&&1==e.nodeType?(t.unshift(this.selector(e,n)),e.getAttribute&&e.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id"))&&rn.para.heatmap&&"not_use_id"!==rn.para.heatmap.element_selector&&!n?t.join(" > "):this.getDomSelector(e.parentNode,t,n)):(t.unshift("body"),t.join(" > "))},na:function(){var e=document.documentElement.scrollLeft||window.pageXOffset;return parseInt(isNaN(e)?0:e,10)},i:function(){var e=0;try{e=o.documentElement&&o.documentElement.scrollTop||m.pageYOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},getEleDetail:function(e){var t=this.getDomSelector(e),n=De({target:e});n.$element_selector=t||"",n.$element_path=rn.heatmap.getElementPath(e,rn.para.heatmap&&"not_use_id"===rn.para.heatmap.element_selector);var r=rn.heatmap.getElementPosition(e,n.$element_path,rn.para.heatmap&&"not_use_id"===rn.para.heatmap.element_selector);return ie(r)&&(n.$element_position=r),n},getPointerEventProp:function(e,t){function n(){return{scrollLeft:document.body.scrollLeft||document.documentElement.scrollLeft||0,scrollTop:document.body.scrollTop||document.documentElement.scrollTop||0}}function r(e){if(document.documentElement.getBoundingClientRect){var t=e.getBoundingClientRect();return{targetEleX:t.left+n().scrollLeft||0,targetEleY:t.top+n().scrollTop||0}}}function i(e){return Number(Number(e).toFixed(3))}return e?function(e){var a=e.pageX||e.clientX+n().scrollLeft||e.offsetX+r(t).targetEleX||0,o=e.pageY||e.clientY+n().scrollTop||e.offsetY+r(t).targetEleY||0;return{$page_x:i(a),$page_y:i(o)}}(e):{}},start:function(t,r,i,a,o){if(n(rn.para.heatmap)&&e(rn.para.heatmap.collect_element)&&!rn.para.heatmap.collect_element(r))return!1;!function(e){ar.stage.process("webClickEvent",e)}(sr.getBasicEleInfo(t,r,i,a,o))},getBasicEleInfo:function(t,r,i,a,o){var s=n(a)?a:{},c=e(o)?o:e(a)?a:void 0,l=this.getEleDetail(r);if(rn.para.heatmap&&rn.para.heatmap.custom_property){var u=rn.para.heatmap.custom_property(r);n(u)&&(l=T(l,u))}return{event:t,target:r,props:l=T(l,this.getPointerEventProp(t,r),s),tagName:i,callback:c}},hasElement:function(e,t){var n;if(e.event){var r=e.event;n=r.path||r._getPath&&r._getPath()}else e.element&&(n=b(e.element).getParents());if(n&&y(n)&&n.length>0)for(var a=0;a<n.length;a++)if("object"==i(n[a])&&1===n[a].nodeType&&t(n[a]))return n[a]},isStyleTag:function(e,t){return!(X(["a","div","input","button","textarea"],e)>-1)&&(!t||rn.para.heatmap&&rn.para.heatmap.collect_tags&&rn.para.heatmap.collect_tags.div?!!(n(rn.para.heatmap)&&n(rn.para.heatmap.collect_tags)&&n(rn.para.heatmap.collect_tags.div)&&y(rn.para.heatmap.collect_tags.div.ignore_tags)&&X(rn.para.heatmap.collect_tags.div.ignore_tags,e)>-1):X(["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"],e)>-1)},isCollectableDiv:function(e,t){try{if(0===e.children.length)return!0;for(var n=0;n<e.children.length;n++)if(1===e.children[n].nodeType){var r=p(e.children[n].tagName)?e.children[n].tagName.toLowerCase():"unknown",i=rn.para&&rn.para.heatmap&&rn.para.heatmap.collect_tags&&rn.para.heatmap.collect_tags.div&&rn.para.heatmap.collect_tags.div.max_level;if(!("div"===r&&i>1||this.isStyleTag(r,t)))return!1;if(!this.isCollectableDiv(e.children[n],t))return!1}return!0}catch(e){me("isCollectableDiv:"+e)}return!1},getCollectableParent:function(e,t){try{var n=e.parentNode,r=n?n.tagName.toLowerCase():"";if("body"===r)return!1;var i=rn.para&&rn.para.heatmap&&rn.para.heatmap.collect_tags&&rn.para.heatmap.collect_tags.div&&rn.para.heatmap.collect_tags.div.max_level;if(r&&"div"===r&&(i>1||this.isCollectableDiv(n,t)))return n;if(n&&this.isStyleTag(r,t))return this.getCollectableParent(n,t)}catch(e){me("getCollectableParent:"+e)}return!1},listenUrlChange:function(e){e(),rn.ee.spa.on("switch",(function(){e()}))},initScrollmap:function(){if(!n(rn.para.heatmap)||"default"!==rn.para.heatmap.scroll_notice_map)return!1;var t=!0;rn.para.scrollmap&&e(rn.para.scrollmap.collect_url)&&this.listenUrlChange((function(){t=!!rn.para.scrollmap.collect_url()}));var r=function(e){var t={};return t.timeout=e.timeout||1e3,t.func=e.func,t.hasInit=!1,t.inter=null,t.main=function(e,t){this.func(e,t),this.inter=null},t.go=function(e){var n={};this.inter||(n.$viewport_position=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,n.$viewport_position=Math.round(n.$viewport_position)||0,e?t.main(n,!0):this.inter=setTimeout((function(){t.main(n)}),this.timeout))},t}({timeout:1e3,func:function(e,t){var n=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,r=new Date,i=r-this.current_time;(i>rn.para.heatmap.scroll_delay_time&&n-e.$viewport_position!=0||t)&&(e.$url=q(),e.$title=document.title,e.$url_path=K(),e.event_duration=Math.min(rn.para.heatmap.scroll_event_duration,parseInt(i)/1e3),e.event_duration=e.event_duration<0?0:e.event_duration,function(e){ar.stage.process("webStayEvent",e)}(e)),this.current_time=r}});r.current_time=new Date,we(window,"scroll",(function(){return!!t&&void r.go()})),we(window,"beforeunload",(function(){return!!t&&void r.go("notime")}))},initHeatmap:function(){var t=this,r=!0;return!(!n(rn.para.heatmap)||"default"!==rn.para.heatmap.clickmap)&&(e(rn.para.heatmap.collect_url)&&this.listenUrlChange((function(){r=!!rn.para.heatmap.collect_url()})),"all"===rn.para.heatmap.collect_elements?rn.para.heatmap.collect_elements="all":rn.para.heatmap.collect_elements="interact",void("all"===rn.para.heatmap.collect_elements?we(document,"click",(function(e){if(!r)return!1;var n=e||window.event;if(!n)return!1;var a=n.target||n.srcElement;if("object"!=i(a))return!1;if("string"!=typeof a.tagName)return!1;var o=a.tagName.toLowerCase();if("body"===o||"html"===o)return!1;if(!a||!a.parentNode||!a.parentNode.children)return!1;var s=p(a.parentNode.tagName)?a.parentNode.tagName.toLowerCase():"unknown";"a"===s||"button"===s?t.start(n,a.parentNode,s):t.start(n,a,o)})):we(document,"click",(function(e){if(!r)return!1;var i=e||window.event;if(!i)return!1;var a=i.target||i.srcElement,o=rn.heatmap.getTargetElement(a,e);return!(!h(o)&&!p(a.tagName))&&void(h(o)&&p(o.tagName)?t.start(i,o,o.tagName.toLowerCase()):h(a)&&"div"===a.tagName.toLowerCase()&&n(rn.para.heatmap)&&rn.para.heatmap.get_vtrack_config&&Qn.events.length>0&&Qn.isTargetEle(a)&&t.start(i,a,a.tagName.toLowerCase(),{$lib_method:"vtrack"}))}))))}},cr={autoTrackIsUsed:!1,isReady:function(t){return e(t)?void t():void rn.log("error: isReady callback must be function")},getUtm:function(){return $n.campaignParams()},getStayTime:function(){return(new Date-rn._t)/1e3},setProfileLocal:function(e){if(!sn.isSupport())return rn.setProfile(e),!1;if(!n(e)||ee(e))return!1;var t=Kn.readObjectVal("sensorsdata_2015_jssdk_profile"),r=!1;if(n(t)&&!ee(t)){for(var i in e)(!(i in t)||t[i]===e[i])&&i in t||(t[i]=e[i],r=!0);r&&(Kn.saveObjectVal("sensorsdata_2015_jssdk_profile",t),rn.setProfile(e))}else Kn.saveObjectVal("sensorsdata_2015_jssdk_profile",e),rn.setProfile(e)},setInitReferrer:function(){var e=Te();rn.setOnceProfile({_init_referrer:e,_init_referrer_host:$n.pageProp.referrer_host})},setSessionReferrer:function(){var e=Te();Kn.setSessionPropsOnce({_session_referrer:e,_session_referrer_host:$n.pageProp.referrer_host})},setDefaultAttr:function(){$n.register({_current_url:location.href,_referrer:Te(),_referring_host:$n.pageProp.referrer_host})},trackHeatMap:function(e,t,n){if("object"==i(e)&&e.tagName&&h(e.parentNode)){var r=e.tagName.toLowerCase(),a=e.parentNode.tagName.toLowerCase(),o=rn.para.heatmap&&rn.para.heatmap.track_attr?rn.para.heatmap.track_attr:["data-sensors-click"];"button"===r||"a"===r||"a"===a||"button"===a||"input"===r||"textarea"===r||z(e,o)||sr.start(null,e,r,t,n)}},trackAllHeatMap:function(e,t,n){if("object"==i(e)&&e.tagName){var r=e.tagName.toLowerCase();sr.start(null,e,r,t,n)}},autoTrackSinglePage:function(e,t){function r(e,t){rn.track("$pageview",T({$referrer:i,$url:q(),$url_path:K(),$title:document.title},e,We()),t),i=q()}var i;i=this.autoTrackIsUsed?$n.pageProp.url:$n.pageProp.referrer;var a=!(e=n(e)?e:{}).not_set_profile;e.not_set_profile&&delete e.not_set_profile,r(e,t),this.autoTrackSinglePage=r,ze(rn.setOnceProfile,!1,a)},autoTrackWithoutProfile:function(e,t){e=n(e)?e:{},this.autoTrack(T(e,{not_set_profile:!0}),t)},autoTrack:function(e,t){e=n(e)?e:{};var r=We(),i=!e.not_set_profile;e.not_set_profile&&delete e.not_set_profile;var a=location.href;rn.para.is_single_page&&S((function(){var n=Te(a,!0);rn.track("$pageview",T({$referrer:n,$url:q(),$url_path:K(),$title:document.title},r,e),t),a=q()})),rn.track("$pageview",T({$referrer:Te(null,!0),$url:q(),$url_path:K(),$title:document.title},r,e),t),ze(rn.setOnceProfile,!0,i),this.autoTrackIsUsed=!0},getAnonymousID:function(){return ee(Kn._state)?"SDK is not initialized.":Kn.getAnonymousId()},setPlugin:function(t){return!!n(t)&&void O(t,(function(t,r){e(t)&&(n(window.SensorsDataWebJSSDKPlugin)&&window.SensorsDataWebJSSDKPlugin[r]||n(rn.modules)&&rn.modules[r]?t(window.SensorsDataWebJSSDKPlugin[r]):he(r+"is not found,please check sensorsdata documents."))}))},useModulePlugin:function(){rn.use.apply(rn,arguments)},useAppPlugin:function(){this.setPlugin.apply(this,arguments)}},lr={state:0,historyState:[],stateType:{1:"1-init未开始",2:"2-init开始",3:"3-store完成"},getState:function(){return this.historyState.join("\n")},setState:function(e){String(e)in this.stateType&&(this.state=e),this.historyState.push(this.stateType[e])}},ur=1,dr={__proto__:null,setInitVar:function(){rn._t=rn._t||1*new Date,rn.is_first_visitor=!1,rn.source_channel_standard=An},initPara:function(e){T(On,e||rn.para||{}),rn.para=On;var t,r={};if(n(rn.para.is_track_latest))for(var a in rn.para.is_track_latest)r["latest_"+a]=rn.para.is_track_latest[a];for(t in rn.para.preset_properties=T({},Tn.preset_properties,r,rn.para.preset_properties||{}),Tn)void 0===rn.para[t]&&(rn.para[t]=Tn[t]);"string"!=typeof rn.para.web_url||"://"!==rn.para.web_url.slice(0,3)&&"//"!==rn.para.web_url.slice(0,2)||("://"===rn.para.web_url.slice(0,3)?rn.para.web_url=location.protocol.slice(0,-1)+rn.para.web_url:rn.para.web_url=location.protocol+rn.para.web_url),Ln.protocol.serverUrl(),rn.bridge&&rn.bridge.initPara();var o=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],s=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],c=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],l={baidu:["wd","word","kw","keyword"],google:"q",bing:"q",yahoo:"p",sogou:["query","keyword"],so:"q",sm:"q"};"object"==i(rn.para.source_type)&&(rn.para.source_type.utm=y(rn.para.source_type.utm)?rn.para.source_type.utm.concat(o):o,rn.para.source_type.search=y(rn.para.source_type.search)?rn.para.source_type.search.concat(s):s,rn.para.source_type.social=y(rn.para.source_type.social)?rn.para.source_type.social.concat(c):c,rn.para.source_type.keyword=n(rn.para.source_type.keyword)?T(l,rn.para.source_type.keyword):l);var u=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"];if(rn.para.heatmap&&!n(rn.para.heatmap)&&(rn.para.heatmap={}),n(rn.para.heatmap)){rn.para.heatmap.clickmap=rn.para.heatmap.clickmap||"default",rn.para.heatmap.scroll_notice_map=rn.para.heatmap.scroll_notice_map||"default",rn.para.heatmap.scroll_delay_time=rn.para.heatmap.scroll_delay_time||4e3,rn.para.heatmap.scroll_event_duration=rn.para.heatmap.scroll_event_duration||18e3,rn.para.heatmap.renderRefreshTime=rn.para.heatmap.renderRefreshTime||1e3,rn.para.heatmap.loadTimeout=rn.para.heatmap.loadTimeout||1e3,!0!==rn.para.heatmap.get_vtrack_config&&(rn.para.heatmap.get_vtrack_config=!1);var d=y(rn.para.heatmap.track_attr)?L(rn.para.heatmap.track_attr,(function(e){return e&&"string"==typeof e})):[];d.push("data-sensors-click"),rn.para.heatmap.track_attr=d,n(rn.para.heatmap.collect_tags)?!0===rn.para.heatmap.collect_tags.div?rn.para.heatmap.collect_tags.div={ignore_tags:u,max_level:1}:n(rn.para.heatmap.collect_tags.div)?(rn.para.heatmap.collect_tags.div.ignore_tags?y(rn.para.heatmap.collect_tags.div.ignore_tags)||(he("ignore_tags 参数必须是数组格式"),rn.para.heatmap.collect_tags.div.ignore_tags=u):rn.para.heatmap.collect_tags.div.ignore_tags=u,rn.para.heatmap.collect_tags.div.max_level&&-1===X([1,2,3],rn.para.heatmap.collect_tags.div.max_level)&&(rn.para.heatmap.collect_tags.div.max_level=1)):rn.para.heatmap.collect_tags.div=!1:rn.para.heatmap.collect_tags={div:!1}}rn.para.server_url=Be(rn.para.server_url),!0===rn.para.noCache?rn.para.noCache="?"+(new Date).getTime():rn.para.noCache="",rn.para.callback_timeout>rn.para.datasend_timeout&&(rn.para.datasend_timeout=rn.para.callback_timeout),rn.para.heatmap&&rn.para.heatmap.collect_tags&&n(rn.para.heatmap.collect_tags)&&O(rn.para.heatmap.collect_tags,(function(e,t){"div"!==t&&e&&rn.heatmap.otherTags.push(t)})),rn.para.heatmap&&"default"===rn.para.heatmap.clickmap&&rn.heatmap.initUnlimitedTags()},quick:function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e.slice(1);return"string"==typeof t&&cr[t]?cr[t].apply(cr,n):void("function"==typeof t?t.apply(rn,n):he("quick方法中没有这个功能"+e[0]))},use:Ze,track:function(e,t,n){Je({event:e,properties:t})&&ir.send({type:"track",event:e,properties:t},n)},bind:function(e,t){return!!Je({bindKey:e,bindValue:t})&&(Kn._state.identities[e]=t,Kn.save(),void ir.send({type:"track_id_bind",event:"$BindID",properties:{}}))},unbind:function(e,t){var n=Xe(e,t);n&&ir.send({identities:n,type:"track_id_unbind",event:"$UnbindID",properties:{}})},trackLink:function(e,t,n){"object"==i(e)&&e.tagName?qe({ele:e},t,n,rn.track):"object"==i(e)&&e.target&&e.event&&qe(e,t,n,rn.track)},trackLinks:function(e,t,n){return n=n||{},!(!e||"object"!=i(e))&&!(!e.href||/^javascript/.test(e.href)||e.target)&&void we(e,"click",(function(r){function i(){a||(a=!0,location.href=e.href)}r.preventDefault();var a=!1;setTimeout(i,1e3),rn.track(t,n,i)}))},setItem:function(e,t,n){Je({item_type:e,item_id:t,properties:n})&&ir.sendItem({type:"item_set",item_type:e,item_id:t,properties:n||{}})},deleteItem:function(e,t){Je({item_type:e,item_id:t})&&ir.sendItem({type:"item_delete",item_type:e,item_id:t})},setProfile:function(e,t){Je({propertiesMust:e})&&ir.send({type:"profile_set",properties:e},t)},setOnceProfile:function(e,t){Je({propertiesMust:e})&&ir.send({type:"profile_set_once",properties:e},t)},appendProfile:function(e,t){Je({propertiesMust:e})&&(O(e,(function(t,n){p(t)?e[n]=[t]:y(t)?e[n]=t:(delete e[n],he("appendProfile属性的值必须是字符串或者数组"))})),ee(e)||ir.send({type:"profile_append",properties:e},t))},incrementProfile:function(e,t){var n=e;p(e)&&((e={})[n]=1),Je({propertiesMust:e})&&(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&!/-*\d+/.test(String(e[t])))return!1;return!0}(e)?ir.send({type:"profile_increment",properties:e},t):me("profile_increment的值只能是数字"))},deleteProfile:function(e){ir.send({type:"profile_delete"},e),Kn.set("distinct_id",ln()),Kn.set("first_id","")},unsetProfile:function(e,t){var n=e,r={};p(e)&&(e=[]).push(n),y(e)?(O(e,(function(e){p(e)?r[e]=!0:he("profile_unset给的数组里面的值必须时string,已经过滤掉",e)})),ir.send({type:"profile_unset",properties:r},t)):me("profile_unset的参数必须是数组")},identify:function(e){"number"==typeof e&&(e=String(e));var t=Kn.getFirstId();if(void 0===e){var n=ln();t?Kn.set("first_id",n):Kn.set("distinct_id",n)}else Je({distinct_id:e})&&(t?Kn.set("first_id",e):Kn.set("distinct_id",e))},resetAnonymousIdentity:function(e){if(Kn.getFirstId())return me("resetAnonymousIdentity must be used in a logout state ！"),!1;if("number"==typeof e&&(e=String(e)),void 0===e){var t=ln();Kn._state.identities.$identity_cookie_id=t,Kn.set("distinct_id",t)}else Je({distinct_id:e})&&(Kn._state.identities.$identity_cookie_id=e,Kn.set("distinct_id",e))},trackSignup:function(e,t,n,r){"number"==typeof e&&(e=String(e)),Je({distinct_id:e,event:t,properties:n})&&Qe(e,t,n,r)},registerPage:function(e){Je({properties:e})?T($n.currentProps,e):me("register输入的参数有误")},clearAllRegister:function(e){Kn.clearAllProps(e)},clearPageRegister:function(e){var t;if(y(e)&&e.length>0)for(t=0;t<e.length;t++)p(e[t])&&e[t]in $n.currentProps&&delete $n.currentProps[e[t]];else if(!0===e)for(t in $n.currentProps)delete $n.currentProps[t]},register:et,registerOnce:function(e){Je({properties:e})?Kn.setPropsOnce(e):me("registerOnce输入的参数有误")},registerSession:function(e){rn.log("registerSession 方法已经弃用，有问题联系技术顾问"),Je({properties:e})?Kn.setSessionProps(e):me("registerSession输入的参数有误")},registerSessionOnce:function(e){rn.log("registerSessionOnce 方法已经弃用，有问题联系技术顾问"),Je({properties:e})?Kn.setSessionPropsOnce(e):me("registerSessionOnce输入的参数有误")},login:tt,loginWithKey:function(e,t){return he("loginWithKey is deprecated !!!"),"number"==typeof t&&(t=String(t)),"number"==typeof e&&(e=String(e)),!!Je({loginIdKey:e})&&(jn.LOGIN===e?(tt(t),!1):void Ge({id:t,callback:null,name:e},Qe))},logout:function(e){var t=Kn.getFirstId();if(t)if(Kn.set("first_id",""),!0===e){var n=ln();Kn.set("distinct_id",n)}else Kn.set("distinct_id",t);Ye({$identity_cookie_id:Kn._state.identities.$identity_cookie_id}),Kn.set("history_login_id",{name:"",value:""})},getPresetProperties:function(){var e={$is_first_day:be(),$is_first_time:Cn.is_page_first_visited,$referrer:$n.pageProp.referrer||"",$referrer_host:$n.pageProp.referrer?R($n.pageProp.referrer):"",$url:q(),$url_path:K(),$title:document.title||"",_distinct_id:Kn.getDistinctId(),identities:Kn.getIdentities()},t=T({},$n.properties(),Kn.getProps(),function(){var e=$n.campaignParams(),t={};return O(e,(function(e,n,r){-1!==(" "+rn.source_channel_standard+" ").indexOf(" "+n+" ")?t["$"+n]=r[n]:t[n]=r[n]})),t}(),e);return rn.para.preset_properties.latest_referrer&&rn.para.preset_properties.latest_referrer_host&&(t.$latest_referrer_host=""===t.$latest_referrer?"":R(t.$latest_referrer)),t},readyState:lr,debug:Ln,on:Me,log:_e};on.setup(_e);var pr=T({},wn,Vn),fr={bridge_info:{touch_app_bridge:!1,verify_success:!1,platform:"",support_two_way_call:!1},is_verify_success:!1,initPara:function(){var e={is_send:!1!==rn.para.use_app_track_is_send&&"only"!==rn.para.use_app_track,white_list:[],is_mui:"mui"===rn.para.use_app_track};"object"==i(rn.para.app_js_bridge)?rn.para.app_js_bridge=T({},e,rn.para.app_js_bridge):!0!==rn.para.use_app_track&&!0!==rn.para.app_js_bridge&&"only"!==rn.para.use_app_track&&"mui"!==rn.para.use_app_track||(rn.para.app_js_bridge=T({},e)),!1===rn.para.app_js_bridge.is_send&&he("设置了 is_send:false,如果打通失败，数据将被丢弃!")},app_js_bridge_v1:function(){var e=null,t=null;window.sensorsdata_app_js_bridge_call_js=function(n){!function(n){re(e=n)&&(e=JSON.parse(e)),t&&(t(e),t=null,e=null)}(n)},rn.getAppStatus=function(n){return function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=document.createElement("iframe");e.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}(),"object"==i(window.SensorsData_APP_JS_Bridge)&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&re(e=window.SensorsData_APP_JS_Bridge.sensorsdata_call_app())&&(e=JSON.parse(e)),n?void(null===e?t=n:(n(e),e=null)):e}},hasVisualModeBridge:function(){var e=window.SensorsData_App_Visual_Bridge,t="sensorsdata_visualized_mode";return n(e)&&e[t]&&(!0===e[t]||e[t]())},validateAppUrl:function(e){function t(e){var t={hostname:"",project:""};try{e=_(e),t.hostname=e.hostname,t.project=e.searchParams.get("project")||"default"}catch(e){me("validateAppUrl:"+e)}return t}var n=t(e),r=t(rn.para.server_url);if(n.hostname===r.hostname&&n.project===r.project)return!0;if(y(rn.para.app_js_bridge.white_list))for(var i=0;i<rn.para.app_js_bridge.white_list.length;i++){var a=t(rn.para.app_js_bridge.white_list[i]);if(a.hostname===n.hostname&&a.project===n.project)return!0}return!1}};nt.prototype.call=function(e,t){var n=this,i=(new Date).getTime().toString(16)+String(r()).replace(".","").slice(1,8);this.resultCbs[i]=n.resultCbs[i]||{result:null,callbacks:[]},this.timeoutCbs[i]=n.timeoutCbs[i]||{isTimeout:!1,callbacks:[]},(e=e.data?e:{data:e}).data.message_id=i;var a=T({callType:this.type},e);return t&&(this.timerId=setTimeout((function(){for(var e in n.timeoutCbs[i].isTimeout=!0,n.timeoutCbs[i].callbacks)n.timeoutCbs[i].callbacks[e].call(null),n.timeoutCbs[i].callbacks.splice(e,1)}),t)),rt(a),{onResult:function(e){return n.resultCbs[i].result?(e(n.resultCbs[i].result),this):(!n.timeoutCbs[i].isTimeout&&n.resultCbs[i].callbacks.push(e),this)},onTimeout:function(e){return n.timeoutCbs[i].isTimeout?(e(),this):(!n.resultCbs[i].result&&n.timeoutCbs[i].callbacks.push(e),this)}}},nt.prototype.onAppNotify=function(e){this.appCallJsCallback=e},nt.prototype.notifyApp=function(e,t){var n=T({callType:this.type},e);return t&&(n.message_id=t),rt(n)},it.prototype={double:function(){},getAppData:function(){},hasAppBridge:function(){return rn.bridge.bridge_info.support_two_way_call},init:function(){},jsCallApp:function(){},requestToApp:function(t){this.bridge.call(t,t.timeout.time).onResult((function(n){e(t.callback)&&t.callback(n)})).onTimeout((function(){e(t.timeout.callback)&&t.timeout.callback()}))}};var gr={isSeachHasKeyword:function(){return""!==H(location.href,"sa-request-id")&&("string"==typeof sessionStorage.getItem("sensors-visual-mode")&&sessionStorage.removeItem("sensors-visual-mode"),!0)},hasKeywordHandle:function(){var e=location.href,t=H(e,"sa-request-id")||null,n=H(e,"sa-request-type")||null,r=H(e,"sa-request-url")||null;if(sr.setNotice(r),mn.isSupport())if(null!==r&&sessionStorage.setItem("sensors_heatmap_url",r),sessionStorage.setItem("sensors_heatmap_id",t),null!==n)"1"===n||"2"===n||"3"===n?sessionStorage.setItem("sensors_heatmap_type",n):n=null;else{var i=sessionStorage.getItem("sensors_heatmap_type");n=null!==i?i:null}this.isReady(t,n)},isReady:function(e,t,n){rn.para.heatmap_url?se({success:function(){setTimeout((function(){"undefined"!=typeof sa_jssdk_heatmap_render&&(sa_jssdk_heatmap_render(rn,e,t,n),"object"==("undefined"==typeof console?"undefined":i(console))&&"function"==typeof console.log&&(rn.heatmap_version&&rn.heatmap_version===rn.lib_version||he("heatmap.js与sensorsdata.js版本号不一致，可能存在风险!")))}),0)},error:function(){},type:"js",url:rn.para.heatmap_url}):me("没有指定heatmap_url的路径")},isStorageHasKeyword:function(){return mn.isSupport()&&"string"==typeof sessionStorage.getItem("sensors_heatmap_id")},storageHasKeywordHandle:function(){sr.setNotice(),gr.isReady(sessionStorage.getItem("sensors_heatmap_id"),sessionStorage.getItem("sensors_heatmap_type"),location.href)},isWindowNameHasKeyword:function(){try{var e=JSON.parse(window.name),t=p(e["sa-request-page-url"])?u(e["sa-request-page-url"]):null;return e["sa-request-id"]&&p(e["sa-request-id"])&&t===location.href}catch(e){return!1}},windowNameHasKeywordHandle:function(){function e(e){var n=t[e];return p(n)?u(n):null}var t=JSON.parse(window.name),n=e("sa-request-id"),r=e("sa-request-type"),i=e("sa-request-url");sr.setNotice(i),mn.isSupport()&&(null!==i&&sessionStorage.setItem("sensors_heatmap_url",i),sessionStorage.setItem("sensors_heatmap_id",n),null!==r?"1"===r||"2"===r||"3"===r?sessionStorage.setItem("sensors_heatmap_type",r):r=null:r=null!==sessionStorage.getItem("sensors_heatmap_type")?sessionStorage.getItem("sensors_heatmap_type"):null),gr.isReady(n,r)}},_r={isStorageHasKeyword:function(){return mn.isSupport()&&"string"==typeof sessionStorage.getItem("sensors-visual-mode")},isSearchHasKeyword:function(){return(!0===at("sa-visual-mode")||"true"===at("sa-visual-mode"))&&("string"==typeof sessionStorage.getItem("sensors_heatmap_id")&&sessionStorage.removeItem("sensors_heatmap_id"),!0)},loadVtrack:function(){se({success:function(){},error:function(){},type:"js",url:rn.para.vtrack_url?rn.para.vtrack_url:Ke()+"//static.sensorsdata.cn/sdk/"+rn.lib_version+"/vtrack.min.js"})},messageListener:function(e){if(!e||!e.data||"sa-fe"!==e.data.source)return!1;if("v-track-mode"===e.data.type){if(e.data.data&&e.data.data.isVtrack)if(mn.isSupport()&&sessionStorage.setItem("sensors-visual-mode","true"),e.data.data.userURL&&location.href.match(/sa-visual-mode=true/)){var t=e.data.data.userURL;p(t)&&(ge(t,"http://")||ge(t,"https://"))&&(window.location.href=encodeURI(t))}else _r.loadVtrack();window.removeEventListener("message",_r.messageListener,!1)}},removeMessageHandle:function(){window.removeEventListener&&window.removeEventListener("message",_r.messageListener,!1)},verifyVtrackMode:function(){window.addEventListener&&window.addEventListener("message",_r.messageListener,!1),_r.postMessage()},postMessage:function(){try{window.parent&&window.parent.postMessage&&window.parent.postMessage({source:"sa-web-sdk",type:"v-is-vtrack",data:{sdkversion:Pn}},"*")}catch(e){me("浏览器版本过低，不支持 postMessage API")}},notifyUser:function(){window.addEventListener&&window.addEventListener("message",(function e(t){return!(!t||!t.data||"sa-fe"!==t.data.source)&&void("v-track-mode"===t.data.type&&(t.data.data&&t.data.data.isVtrack&&alert("当前版本不支持，请升级部署神策数据治理"),window.removeEventListener("message",e,!1)))}),!1),_r.postMessage()}},hr=["setItem","deleteItem","getAppStatus","track","quick","register","registerPage","registerOnce","trackSignup","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","resetAnonymousIdentity","login","logout","trackLink","clearAllRegister","clearPageRegister","bind","unbind","loginWithKey"],mr={track:function(e,t,n){},quick:function(e,t,n,r){},register:function(e){},registerPage:function(e){},registerOnce:function(e){},clearAllRegister:function(e){},trackSignup:function(e,t,n,r){},setProfile:function(e,t){},setOnceProfile:function(e,t){},appendProfile:function(e,t){},incrementProfile:function(e,t){},deleteProfile:function(e){},unsetProfile:function(e,t){},identify:function(e,t){},resetAnonymousIdentity:function(e){},login:function(e,t){},logout:function(e){},trackLink:function(e,t,n){},deleteItem:function(e,t){},setItem:function(e,t,n){},getAppStatus:function(e){},clearPageRegister:function(e){}};pt.prototype.process=function(e,t){if(e&&e in this.processDef){var n=this.registeredInterceptors[e];if(n&&y(n)&&n.length>0)for(var r={current:0,total:n.length},i=new dt(t,r,rn),a=0;a<n.length;a++)try{if(r.current=a+1,t=n[a].call(null,t,i)||t,i.cancellationToken.getCanceled())break;if(i.cancellationToken.getStopped())return}catch(e){me("interceptor error:"+e)}return this.processDef[e]&&this.processDef[e]in this.processDef&&(t=this.process(this.processDef[e],t)),t}me("process ["+e+"] is not supported")},pt.prototype.registerStageImplementation=function(t){t&&t.init&&e(t.init)&&(t.init(this),t.interceptor&&this.registerInterceptor(t.interceptor))},pt.prototype.registerInterceptor=function(t){if(t)for(var r in t){var i=t[r];if(i&&n(i)&&e(i.entry)){ie(i.priority)||(i.priority=Number.MAX_VALUE),this.registeredInterceptors[r]||(this.registeredInterceptors[r]=[]);var a=this.registeredInterceptors[r];i.entry.priority=i.priority,a.push(i.entry),a.sort((function(e,t){return e.priority-t.priority}))}}};var vr=new pt({basicProps:"extendProps",extendProps:"formatData",formatData:"finalAdjustData",finalAdjustData:null}),yr=new pt({send:null}),br=new pt({getUtmData:null,callSchema:null}),wr=new pt({webClickEvent:null,webStayEvent:null}),Sr={buildDataStage:function(e){e&&vr.registerInterceptor(e)},businessStage:function(e){e&&br.registerInterceptor(e)},sendDataStage:function(e){e&&yr.registerInterceptor(e)},viewStage:function(e){e&&wr.registerInterceptor(e)}},kr={stage:null,init:function(e){this.stage=e}},Or={stage:null,init:function(e){this.stage=e},interceptor:{send:{entry:function(e){return e}}}},Tr={buildData:function(e){return function(e){return rr.stage.process("basicProps",e)}(e)},sendData:function(e,t){var n=Ce(e.properties);(function(e){Or.stage.process("send",e)})({origin_data:e,server_url:rn.para.server_url,data:e,config:n||{},callback:t}),rn.log(e)},encodeTrackData:function(e){return Re(e)},getUtmData:function(){return kr.stage&&kr.stage.process("getUtmData")}},Ar={webClickEvent:{entry:function(e,t){var n=t.sensors;"a"===e.tagName&&n.para.heatmap&&!0===n.para.heatmap.isTrackLink?n.trackLink({event:e.event,target:e.target},"$WebClick",e.props):n.track("$WebClick",e.props,e.callback)}},webStayEvent:{entry:function(e,t){t.sensors.track("$WebStay",e)}}},Pr=window.sensors_data_pre_config,Nr=!!pr.isObject(Pr)&&Pr.is_compliance_enabled;rn.init=function(e){return Un.sdk.emit("beforeInit"),!(rn.readyState&&rn.readyState.state&&rn.readyState.state>=2)&&(Nr&&(vt(!0),lt()),Un.initSystemEvent(),rn.setInitVar(),rn.readyState.setState(2),rn.initPara(e),Un.sdk.emit("initPara"),Un.sdk.emit("afterInitPara"),Un.sdk.emit("initAPI"),Un.sdk.emit("afterInitAPI"),rn.detectMode(),function(){var e="",t=" { cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,0); }";rn.heatmap&&y(rn.heatmap.otherTags)&&O(rn.heatmap.otherTags,(function(n){e+=n+t})),ne()&&M()&&M()<13&&(rn.para.heatmap&&rn.para.heatmap.collect_tags&&rn.para.heatmap.collect_tags.div&&de("div, [data-sensors-click]"+t),rn.para.heatmap&&rn.para.heatmap.track_attr&&de("["+rn.para.heatmap.track_attr.join("], [")+"]"+t),""!==e&&de(e))}(),Un.sdk.emit("afterInit"),void Un.sdk.emit("ready"))},Nr?vt(!1):(vt(!0),lt());var jr,Ir,xr,Cr,Er,Dr,Lr,$r,Ur,Br,Rr,Mr,Hr,Jr,Fr,Vr,qr,Kr,Wr="1.26.12",zr=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Wr,e}({init:function(e){var t=e._.isString,n=e._.rot13defs,r=e._.dfmapping,i="data:enc;",a="dfm-enc-";e.ee.sdk.on("afterInitPara",(function(){e.kit.userEncrypt=function(e){return a+r(e)},e.kit.userDecrypt=function(e){return 0===e.indexOf(i)?(e=e.substring(i.length),e=n(e)):0===e.indexOf(a)&&(e=e.substring(a.length),e=r(e)),e},e.kit.userDecryptIfNeeded=function(n){return!t(n)||0!==n.indexOf(i)&&0!==n.indexOf(a)||(n=e.kit.userDecrypt(n)),n}}))},plugin_name:"UserEncryptDefault"}),Gr="1.26.12",Yr=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Gr,e}({sd:null,init:function(e){if(this.sd)return!1;if(this.sd=e,!this.sd||!this.sd._)return!1;var t=this.sd._.cookie.get("sensors_amp_id"),n=this.sd.store._state.distinct_id;if(t&&t.length>0){var r="amp-"===t.slice(0,4);if(t!==n){if(!r)return!1;this.sd.store._state.first_id?(this.sd.identify(t,!0),this.sd.saEvent.send({original_id:t,distinct_id:n,type:"track_signup",event:"$SignUp",properties:{}},null),this.setAmpId(n)):this.sd.identify(t,!0)}}else this.setAmpId(n);this.addListener()},addListener:function(){var e=this;this.sd.events.on("changeDistinctId",(function(t){e.setAmpId(t)})),this.sd.events.isReady()},setAmpId:function(e){this.sd._.cookie.set("sensors_amp_id",e)}},"Amp","sdkReady"),Xr=window.SensorsData_App_Visual_Bridge,Zr=Xr&&Xr.sensorsdata_visualized_mode,Qr=Xr&&Xr.sensorsdata_visualized_alert_info,ei=Xr&&Xr.sensorsdata_hover_web_nodes,ti={isVerify:function(){return Zr&&(!0===Zr||Zr.call(Xr))},commands:{app_alert:function(e){return Qr&&Qr.call(Xr,JSON.stringify(e))},visualized_track:yt,page_info:yt,sensorsdata_get_app_visual_config:function(e,t){return t&&"function"==typeof t[e.callType]&&t[e.callType]()}}},ni="1.26.12",ri={init:function(e){Er=(Cr=e)&&Cr._,Dr=Cr&&Cr.log||console&&console.log||function(){},jr=window.SensorsData_APP_New_H5_Bridge,Ir=jr&&jr.sensorsdata_track,xr=Ir&&jr.sensorsdata_get_server_url&&jr.sensorsdata_get_server_url(),Dr("---test---fail---",!Cr,Cr.bridge.activeBridge,!xr),Cr&&!Cr.bridge.activeBridge&&xr&&(Cr.bridge.activeBridge=ri,Cr.para.app_js_bridge&&!Cr.para.app_js_bridge.is_mui&&(Cr.bridge.is_verify_success=xr&&Cr.bridge.validateAppUrl(xr),Dr("---test---bridge-verify-",Cr.bridge.is_verify_success)),Cr.bridge.bridge_info={touch_app_bridge:!0,platform:"android",verify_success:Cr.bridge.is_verify_success?"success":"fail",support_two_way_call:!!jr.sensorsdata_js_call_app},Cr.para.app_js_bridge?Cr.registerInterceptor("sendDataStage",{send:{priority:60,entry:bt}}):Dr("---test---app_js_bridge is not configured, data will not be sent by android bridge."))},handleCommand:function(e){var t=e.callType;return t in ti.commands?ti.commands[t](e,jr):void(jr&&Er.isFunction(jr.sensorsdata_js_call_app)&&jr.sensorsdata_js_call_app(JSON.stringify(e)))}},ii=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=ni,e}(ri,"AndroidBridge","sdkAfterInitPara"),ai=window.SensorsData_App_Visual_Bridge,oi=ai&&ai.sensorsdata_visualized_mode,si=ai&&ai.sensorsdata_visualized_alert_info,ci=ai&&ai.sensorsdata_hover_web_nodes,li={isVerify:function(){return oi&&(!0===oi||oi.call(ai))},commands:{app_alert:function(e){return si&&si.call(ai,JSON.stringify(e))},visualized_track:wt,page_info:wt,sensorsdata_get_app_visual_config:function(e,t){return t&&"function"==typeof t[e.callType]&&t[e.callType]()}}},ui="1.26.12",di={init:function(e){Mr=(Rr=e)&&Rr._,Hr=Rr&&Rr.log||console&&console.log||function(){},function(){if(Hr("ObsoleteBridge---test---init---"),Lr=window.SensorsData_APP_JS_Bridge,$r=Lr&&Lr.sensorsdata_track,Ur=Lr&&Lr.sensorsdata_verify,Br=Lr&&Lr.sensorsdata_visual_verify,Hr("ObsoleteBridge-",Rr.bridge.activeBridge,Ur,$r,Br),Rr&&!Rr.bridge.activeBridge&&(Ur||$r||Br)){Rr.bridge.activeBridge=di;var e=Ur||$r;if(Br&&(e=!!Br.call(Lr,JSON.stringify({server_url:Rr.para.server_url})),Hr("ObsoleteBridge---called-return",e)),Rr.bridge.bridge_info={touch_app_bridge:!0,platform:"android",verify_success:e?"success":"fail"},!Rr.para.app_js_bridge)return void Hr("app_js_bridge is not configured, data will not be sent by android obsolete bridge.");Rr.registerInterceptor("sendDataStage",{send:{priority:80,entry:St}}),Hr("Android obsolete bridge inits succeed.")}}()},handleCommand:function(e){Hr("ObsoleteBridge---handleCommadn");var t=e.callType;return t in li.commands?(Hr("ObsoleteBridge---",t,li.commands),li.commands[t](e,Lr)):Lr&&Mr.isFunction(Lr.sensorsdata_js_call_app)?(Hr("ObsoleteBridge---handleCommadn-abridge"),Lr.sensorsdata_js_call_app(JSON.stringify(e))):void 0}},pi=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=ui,e}(di,"AndroidObsoleteBridge","sdkAfterInitPara"),fi="1.26.12",gi={event_list:[],latest_event_initial_time:null,max_save_time:2592e6,init:function(e,t){if(Fr||!e)return!1;qr=(t=t||{}).cookie_name||"sensorsdata2015jssdkchannel";var n=this;Jr=(Fr=e)._,Vr=Fr.store,Jr.localStorage.isSupport()&&(Fr.para.max_string_length=1024,n.eventList.init(),n.addLatestChannelUrl(),n.addIsChannelCallbackEvent())},addIsChannelCallbackEvent:function(){Fr.registerPage({$is_channel_callback_event:function(e){if(Jr.isObject(e)&&e.event&&"$WebClick"!==e.event&&"$pageview"!==e.event&&"$WebStay"!==e.event&&"$SignUp"!==e.event)return!gi.eventList.hasEvent(e.event)&&(gi.eventList.add(e.event),!0)}})},addLatestChannelUrl:function(){var e=this.getUrlDomain(),t=this.cookie.getChannel();if("url解析失败"===e)this.registerAndSave({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"url的domain解析失败"});else if(Jr.isReferralTraffic(document.referrer)){var n=Jr.getQueryParam(location.href,"sat_cf");Jr.isString(n)&&n.length>0?(this.registerAndSave({_sa_channel_landing_url:location.href}),gi.channelLinkHandler()):this.registerAndSave({_sa_channel_landing_url:""})}else t?Fr.registerPage(t):Fr.registerPage({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"取值异常"})},registerAndSave:function(e){Fr.registerPage(e),this.cookie.saveChannel(e)},cookie:{getChannel:function(){var e=Fr.kit.userDecryptIfNeeded(Jr.cookie.get(qr));return e=Jr.safeJSONParse(e),!(!Jr.isObject(e)||!e.prop)&&e.prop},saveChannel:function(e){var t={prop:e},n=JSON.stringify(t);Fr.para.encrypt_cookie&&(n=Fr.kit.userEncrypt(n)),Jr.cookie.set(qr,n)}},channelLinkHandler:function(){this.eventList.reset(),Fr.track("$ChannelLinkReaching")},getUrlDomain:function(){var e=Jr.info.pageProp.url_domain;return""===e&&(e="url解析失败"),e},eventList:{init:function(){var e=this.get(),t=(new Date).getTime();if(e&&Jr.isNumber(e.latest_event_initial_time)&&Jr.isArray(e.eventList)){var n=t-e.latest_event_initial_time;n>0&&n<gi.max_save_time?(gi.event_list=e.eventList,gi.latest_event_initial_time=e.latest_event_initial_time):this.reset()}else this.reset()},get:function(){var e={};try{e=Vr.readObjectVal("sawebjssdkchannel")}catch(e){Fr.log(e)}return e},add:function(e){gi.event_list.push(e),this.save()},save:function(){var e={latest_event_initial_time:gi.latest_event_initial_time,eventList:gi.event_list};Vr.saveObjectVal("sawebjssdkchannel",e)},reset:function(){gi.event_list=[],gi.latest_event_initial_time=(new Date).getTime(),this.save()},hasEvent:function(e){var t=!1;return Jr.each(gi.event_list,(function(n){n===e&&(t=!0)})),t}}},_i=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=fi,e}(gi,"SensorsChannel","sdkAfterInitAPI"),hi="1.26.12",mi=(/micromessenger\/([\d.]+)/i.test(navigator.userAgent||""),function(){var e={};return void 0!==document.hidden?(e.hidden="hidden",e.visibilityChange="visibilitychange"):void 0!==document.msHidden?(e.hidden="msHidden",e.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e});Kr=mi().hidden;var vi,yi,bi,wi,Si,ki,Oi,Ti,Ai={android:/Android/i,iOS:/iPhone|iPad|iPod/i},Pi=function(){for(var e in Ai)if(navigator.userAgent.match(Ai[e]))return e;return""}(),Ni=function(){return Ai.hasOwnProperty(Pi)},ji=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},Ii=function(e){return e.match(/\/sd\/(\w+)\/(\w+)$/)},xi=function(e){var t=e._.URL(e.para.server_url);return{origin:t.origin,project:t.searchParams.get("project")||"default"}},Ci={key:null,timer:null,sd:null,data:null,timeout:2500,apiURL:"{origin}/sdk/deeplink/param?key={key}&system_type=JS&project={project}",init:function(e){if(this.sd)return this.log("deeplink已经初始化"),!1;if(this.sd=e,this.log("deeplink init called"),null===this.sd)return this.log("神策JS SDK未成功引入"),!1;var t={};if(arguments.length>0&&(1===arguments.length&&ji(arguments[0])?t=arguments[0]:arguments.length>=2&&ji(arguments[1])&&(t=arguments[1])),!Ni())return this.log("不支持当前系统，目前只支持Android和iOS"),!1;if(ji(t)&&this.sd._.isNumber(t.timeout)&&t.timeout>=2500&&(this.timeout=t.timeout),!this.sd.para.server_url)return this.log("神策JS SDK配置项server_url未正确配置"),!1;var n=xi(this.sd);this.apiURL=this.apiURL.replace("{origin}",n.origin).replace("{project}",n.project);var r=this.sd._.getQueryParam(window.location.href,"deeplink");if(!r)return this.log("当前页面缺少deeplink参数"),!1;r=window.decodeURIComponent(r);var i=Ii(r);return i?(this.key=i[2],this.apiURL=this.apiURL.replace("{key}",window.encodeURIComponent(i[2])),this.sd._.ajax({url:this.apiURL,type:"GET",cors:!0,credentials:!1,success:function(e){return e.errorMsg?(Ci.log("API报错："+e.errorMsg),!1):(Ci.data=e,Ci.log("API查询成功，数据："+JSON.stringify(e,null,"  ")),void(this.data.app_key&&(this.data.android_info&&this.data.android_info.url_schemes&&(this.data.android_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key),this.data.ios_info&&this.data.ios_info.url_schemes&&(this.data.ios_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key))))}.bind(this),error:function(){Ci.log("API查询出错")}}),void this.addListeners()):(this.log("当前页面的deeplink参数无效"),!1)},openDeepLink:function(){if(this.log("openDeeplink()"),!this.data)return this.log("没有Deep link数据!"),!1;if("iOS"===Pi){this.log("当前系统是iOS");var e=this.sd&&this.sd._&&this.sd._.getIOSVersion()>=9&&this.data.ios_info.ios_wake_url?this.data.ios_info.ios_wake_url:this.data.ios_info.url_schemes;this.log("唤起APP的地址："+e),function(e,t,n){e.log("尝试唤起 iOS app:"+t),window.location.href=t,e.timer=setTimeout((function(){return kt()?(e.log("The page is hidden, stop navigating to download page"),!1):(e.log("App可能未安装，跳转到下载地址"),void(window.location.href=n))}),e.timeout),e.log("new timer:"+e.timer)}(this,e,this.data.ios_info.download_url)}else this.log("当前系统是 android"),function(e,t,n){e.log("尝试唤起 android app");var r=t;e.log("唤起APP的地址："+r),window.location=r,e.timer=setTimeout((function(){var t=kt();return e.log("hide:"+Kr+":"+document[Kr]),t?(e.log("The page is hidden, stop navigating to download page"),!1):(e.log("App可能未安装，跳转到下载地址"),void(window.location=n))}),e.timeout)}(this,this.data.android_info.url_schemes,this.data.android_info.download_url)},log:function(e){this.sd&&this.sd.log(e)},addListeners:function(){var e=mi().visibilityChange,t=this;e&&document.addEventListener(e,(function(){clearTimeout(t.timer),t.log("visibilitychange, clear timeout:"+t.timer)}),!1),window.addEventListener("pagehide",(function(){t.log("page hide, clear timeout:"+t.timer),clearTimeout(t.timer)}),!1)}},Ei=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=hi,e}(Ci,"Deeplink","sdkReady"),Di="1.26.12",Li={init:function(e){wi=(bi=e)&&bi._,Si=bi&&bi.log||console&&console.log||function(){},function(){if(vi=window.SensorsData_iOS_JS_Bridge&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url,yi=function(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker},bi&&!bi.bridge.activeBridge&&yi()&&yi().postMessage){if(bi.bridge.activeBridge=Li,bi.para.app_js_bridge&&!bi.para.app_js_bridge.is_mui&&(bi.bridge.is_verify_success=vi&&bi.bridge.validateAppUrl(vi)),bi.bridge.bridge_info={touch_app_bridge:!0,platform:"ios",verify_success:bi.bridge.is_verify_success?"success":"fail",support_two_way_call:!0},!bi.para.app_js_bridge)return void Si("app_js_bridge is not configured, data will not be sent by iOS bridge.");bi.registerInterceptor("sendDataStage",{send:{priority:70,entry:Ot}}),Si("IOS bridge inits succeed.")}}()},handleCommand:function(e){var t=e.callType;return"page_info"!==t&&"visualized_track"!==t||bi.bridge.hasVisualModeBridge()?"sensorsdata_get_app_visual_config"===t?wi.isObject(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge[t]:yi()&&yi().postMessage(JSON.stringify(e)):null}},$i=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Di,e}(Li,"IOSBridge","sdkAfterInitPara"),Ui="1.26.12",Bi={init:function(e){Oi=(ki=e)&&ki._,Ti=ki&&ki.log||console&&console.log||function(){},Tt()}},Ri=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Ui,e}(Bi,"IOSObsoleteBridge","sdkAfterInitPara"),Mi="1.26.12",Hi=432e3;Nt.prototype.init=function(e,t){if(e){if(this.sd=e,this._=this.sd._,t){this.option=t;var n=t.heartbeat_interval_time;n&&(this._.isNumber(n)||this._.isNumber(1*n))&&1*n>0&&(this.heartbeat_interval_time=1e3*n);var r=t.max_duration;r&&(this._.isNumber(r)||this._.isNumber(1*r))&&1*r>0&&(this.max_duration=r)}this.page_id=Number(String(this._.getRandom()).slice(2,5)+String(this._.getRandom()).slice(2,4)+String((new Date).getTime()).slice(-4)),this.addEventListener(),!0===document.hidden?this.page_show_status=!1:this.addHeartBeatInterval(),this.log("PageLeave初始化完毕")}else this.log("神策JS SDK未成功引入")},Nt.prototype.log=function(e){this.sd&&this.sd.log(e)},Nt.prototype.refreshPageEndTimer=function(){var e=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){e.page_hidden_status=!1}),5e3)},Nt.prototype.hiddenStatusHandler=function(){clearTimeout(this.timer),this.timer=null,this.page_hidden_status=!1},Nt.prototype.pageStartHandler=function(){this.start_time=+new Date,1==!document.hidden?this.page_show_status=!0:this.page_show_status=!1,this.url=location.href,this.title=document.title},Nt.prototype.pageEndHandler=function(){if(!0!==this.page_hidden_status){var e=this.getPageLeaveProperties();!1===this.page_show_status&&delete e.event_duration,this.page_show_status=!1,this.page_hidden_status=!0,this.isCollectUrl(this.url)&&this.sd.track("$WebPageLeave",e),this.refreshPageEndTimer(),this.delHeartBeatData()}},Nt.prototype.addEventListener=function(){this.addPageStartListener(),this.addPageSwitchListener(),this.addSinglePageListener(),this.addPageEndListener()},Nt.prototype.addPageStartListener=function(){var e=this;"onpageshow"in window&&this._.addEvent(window,"pageshow",(function(){e.pageStartHandler(),e.hiddenStatusHandler()}))},Nt.prototype.isCollectUrl=function(e){return"function"!=typeof this.option.isCollectUrl||"string"!=typeof e||""===e||this.option.isCollectUrl(e)},Nt.prototype.addSinglePageListener=function(){var e=this;this.sd.ee&&this.sd.ee.spa.prepend("switch",(function(t){t!==location.href&&(e.url=t,e.pageEndHandler(),e.stopHeartBeatInterval(),e.current_page_url=e.url,e.pageStartHandler(),e.hiddenStatusHandler(),e.addHeartBeatInterval())}))},Nt.prototype.addPageEndListener=function(){var e=this;this._.each(["pagehide","beforeunload","unload"],(function(t){"on"+t in window&&e._.addEvent(window,t,(function(){e.pageEndHandler(),e.stopHeartBeatInterval()}))}))},Nt.prototype.addPageSwitchListener=function(){var e=this;this._.listenPageState({visible:function(){e.pageStartHandler(),e.hiddenStatusHandler(),e.addHeartBeatInterval()},hidden:function(){e.url=location.href,e.title=document.title,e.pageEndHandler(),e.stopHeartBeatInterval()}})},Nt.prototype.addHeartBeatInterval=function(){this._.localStorage.isSupport()&&this.startHeartBeatInterval()},Nt.prototype.startHeartBeatInterval=function(){var e=this;this.heartbeat_interval_timer&&this.stopHeartBeatInterval();var t=!0;this.isCollectUrl(this.url)||(t=!1),this.heartbeat_interval_timer=setInterval((function(){t&&e.saveHeartBeatData()}),this.heartbeat_interval_time),t&&this.saveHeartBeatData("is_first_heartbeat"),this.reissueHeartBeatData()},Nt.prototype.stopHeartBeatInterval=function(){clearInterval(this.heartbeat_interval_timer),this.heartbeat_interval_timer=null},Nt.prototype.saveHeartBeatData=function(e){var t=this.getPageLeaveProperties(),n=new Date;t.$time=n,"is_first_heartbeat"===e&&(t.event_duration=3.14);var r=this.sd.kit.buildData({type:"track",event:"$WebPageLeave",properties:t});r.heartbeat_interval_time=this.heartbeat_interval_time,this.sd.store.saveObjectVal(this.storage_name+"-"+this.page_id,r)},Nt.prototype.delHeartBeatData=function(e){this._.localStorage.isSupport()&&this._.localStorage.remove(e||this.storage_name+"-"+this.page_id)},Nt.prototype.reissueHeartBeatData=function(){for(var e=window.localStorage.length-1;e>=0;e--){var t=window.localStorage.key(e);if(t&&t!==this.storage_name+"-"+this.page_id&&0===t.indexOf(this.storage_name+"-")){var n=this.sd.store.readObjectVal(t);this._.isObject(n)&&1*new Date-n.time>n.heartbeat_interval_time+5e3&&(delete n.heartbeat_interval_time,n._flush_time=(new Date).getTime(),this.sd.kit.sendData(n),this.delHeartBeatData(t))}}},Nt.prototype.getPageLeaveProperties=function(){var e=(+new Date-this.start_time)/1e3;(isNaN(e)||e<0||e>this.max_duration)&&(e=0),e=Number(e.toFixed(3));var t=this._.getReferrer(this.current_page_url),n=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0;n=Math.round(n)||0;var r={$title:this.title,$url:this._.getURL(this.url),$url_path:this._.getURLPath(this._.URL(this.url).pathname),$referrer_host:t?this._.getHostname(t):"",$referrer:t,$viewport_position:n};return 0!==e&&(r.event_duration=e),this._.extend(r,this.option.custom_props)};var Ji=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Mi,e}(new Nt,"PageLeave","sdkReady"),Fi="1.26.12",Vi=!1,qi={init:function(e,t){function n(){var r=0,i=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,a={$url:e._.getURL(),$title:document.title,$url_path:e._.getURLPath(),$referrer:e._.getReferrer(null,!0)};if(i?(r=function(t){var n=0;return e._.isFunction(t.getEntriesByType)&&(n=((t.getEntriesByType("navigation")||[{}])[0]||{}).domContentLoadedEventEnd||0),n}(i)||function(t){var n=0;if(t.timing){var r=t.timing;0!==r.fetchStart&&e._.isNumber(r.fetchStart)&&0!==r.domContentLoadedEventEnd&&e._.isNumber(r.domContentLoadedEventEnd)?n=r.domContentLoadedEventEnd-r.fetchStart:e.log("performance 数据获取异常")}return n}(i),function(t,n){if(t.getEntries&&"function"==typeof t.getEntries){for(var r=t.getEntries(),i=null,a=0;a<r.length;a++)"transferSize"in r[a]&&(i+=r[a].transferSize);e._.isNumber(i)&&i>=0&&i<10737418240&&(n.$page_resource_size=Number((i/1024).toFixed(3)))}}(i,a)):e.log("浏览器未支持 performance API."),r>0){var o=e._.isObject(t)&&t.max_duration||1800;r=Number((r/1e3).toFixed(3)),(!e._.isNumber(o)||o<=0||r<=o)&&(a.event_duration=r)}Vi||(e.track("$WebPageLoad",a),Vi=!0),window.removeEventListener?window.removeEventListener("load",n):window.detachEvent&&window.detachEvent("onload",n)}"complete"==document.readyState?n():window.addEventListener?window.addEventListener("load",n):window.attachEvent&&window.attachEvent("onload",n)}},Ki=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Fi,e}(qi,"PageLoad","sdkReady");jt.prototype.init=function(e){if(e){this.sd=e,this._=e._,this.log=e.log;var t=this;e.registerInterceptor("buildDataStage",{extendProps:{priority:0,entry:function(e){return function(e,t){if("track"!==e.type)return e;var n=t.sd,r=n._,i=n.saEvent.check,a=r.extend2Lev({properties:{}},e),o=t.customRegister,s=a.properties,c=a.event,l={};return r.each(o,(function(e){if(r.isObject(e))r.indexOf(e.events,c)>-1&&i({properties:e.properties})&&(l=r.extend(l,e.properties));else if(r.isFunction(e)){var t=e({event:c,properties:s,data:a});r.isObject(t)&&!r.isEmptyObject(t)&&i({properties:t})&&(l=r.extend(l,t))}})),e.properties=r.extend(s,l),e}(e,t)}}})}else this.log("神策JS SDK未成功引入")},jt.prototype.register=function(e){return this.sd?void(this._.isObject(e)&&this._.isArray(e.events)&&e.events.length>0&&this._.isObject(e.properties)&&!this._.isEmptyObject(e.properties)?this.customRegister.push(e):this.log("RegisterProperties: register 参数错误")):void this.log("神策JS SDK未成功引入")},jt.prototype.hookRegister=function(e){return this.sd?void(this._.isFunction(e)?this.customRegister.push(e):this.log("RegisterProperties: hookRegister 参数错误")):void this.log("神策JS SDK未成功引入")};var Wi="1.26.12";jt.prototype.plugin_name="RegisterProperties";var zi,Gi,Yi,Xi,Zi,Qi,ea,ta,na,ra,ia,aa,oa,sa,ca,la=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Wi,e}(new jt),ua="1.26.12",da=window.console&&window.console.log||function(){},pa={init:function(e){return da=(zi=e)&&zi.log||da,e&&e.kit&&e.kit.buildData?(Gi=zi.kit.buildData,zi.kit.buildData=It,void da("RegisterPropertyPageHeight 插件初始化完成")):void da("RegisterPropertyPageHeight 插件初始化失败,当前主sdk不支持 RegisterPropertyPageHeight 插件，请升级主sdk")}},fa=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=ua,e}(pa,"RegisterPropertyPageHeight","sdkReady"),ga="1.26.12",_a={getPart:function(e){var t=this.option.length;if(t)for(var n=0;n<t;n++)if(e.indexOf(this.option[n].part_url)>-1)return!0;return!1},getPartHash:function(e){var t=this.option.length;if(t)for(var n=0;n<t;n++)if(e.indexOf(this.option[n].part_url)>-1)return this.option[n].after_hash;return!1},getCurrenId:function(){var e=this.store.getDistinctId()||"",t=this.store.getFirstId()||"";return this._.urlSafeBase64&&this._.urlSafeBase64.encode?e=e?this._.urlSafeBase64.trim(this._.urlSafeBase64.encode(this._.base64Encode(e))):"":this._.rot13obfs&&(e=e?this._.rot13obfs(e):""),encodeURIComponent(t?"f"+e:"d"+e)},rewriteUrl:function(e,t){var n=this,r=/([^?#]+)(\?[^#]*)?(#.*)?/.exec(e),i="";if(r){var a,o=r[1]||"",s=r[2]||"",c=r[3]||"",l="_sasdk="+this.getCurrenId(),u=function(e){var t=e.split("&"),r=[];return n._.each(t,(function(e){e.indexOf("_sasdk=")>-1?r.push(l):r.push(e)})),r.join("&")};return this.getPartHash(e)?(a=c.indexOf("_sasdk"),i=c.indexOf("?")>-1?a>-1?o+s+"#"+c.substring(1,a)+u(c.substring(a,c.length)):o+s+c+"&"+l:o+s+"#"+c.substring(1)+"?"+l):(a=s.indexOf("_sasdk"),i=/^\?(\w)+/.test(s)?a>-1?o+"?"+u(s.substring(1))+c:o+s+"&"+l+c:o+"?"+l+c),t&&(t.href=i),i}},getUrlId:function(){var e=location.href.match(/_sasdk=([aufd][^\?\#\&\=]+)/);if(this._.isArray(e)&&e[1]){var t=decodeURIComponent(e[1]);return!t||"f"!==t.substring(0,1)&&"d"!==t.substring(0,1)||(this._.urlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64(t)?t=t.substring(0,1)+this._.base64Decode(this._.urlSafeBase64.decode(t.substring(1))):this._.rot13defs&&(t=t.substring(0,1)+this._.rot13defs(t.substring(1)))),t}return""},setRefferId:function(e){var t=this.store.getDistinctId(),n=this.getUrlId();if(n&&""!==n){var r="a"===n.substring(0,1)||"d"===n.substring(0,1);(n=n.substring(1))!==t&&(r?(this.sd.identify(n,!0),this.store.getFirstId()&&this.sd.saEvent.send({original_id:n,distinct_id:t,type:"track_signup",event:"$SignUp",properties:{}},null)):this.store.getFirstId()&&!e.re_login||this.sd.login(n))}},addListen:function(){var e=this,t=function(t){var n,r,i=t.target,a=i.tagName.toLowerCase(),o=i.parentNode;if("a"===a&&i.href||o&&o.tagName&&"a"===o.tagName.toLowerCase()&&o.href){"a"===a&&i.href?(n=i.href,r=i):(n=o.href,r=o);var s=e._.URL(n).protocol;"http:"!==s&&"https:"!==s||e.getPart(n)&&e.rewriteUrl(n,r)}};e._.addEvent(document,"mousedown",t),window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0&&e._.addEvent(document,"pointerdown",t)},init:function(e,t){return this.sd=e,this._=e._,this.store=e.store,this.para=e.para,this._.isObject(t)&&this._.isArray(t.linker)&&t.linker.length>0?(this.setRefferId(t),this.addListen(),this.option=t.linker,void(this.option=function(t){for(var n=t.length,r=[],i=0;i<n;i++)/[A-Za-z0-9]+\./.test(t[i].part_url)&&"[object Boolean]"==Object.prototype.toString.call(t[i].after_hash)?r.push(t[i]):e.log("linker 配置的第 "+(i+1)+" 项格式不正确，请检查参数格式！");return r}(this.option))):void e.log("请配置打通域名参数！")}},ha=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=ga,e}(_a,"SiteLinker","sdkReady"),ma="1.26.12",va={init:function(e){e&&!Yi&&(Yi=e).registerInterceptor("businessStage",{getUtmData:{priority:0,entry:function(){return function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",n={};return Yi._.isArray(Yi.para.source_channel)&&Yi.para.source_channel.length>0&&(e=e.concat(Yi.para.source_channel),e=Yi._.unique(e)),Yi._.each(e,(function(e){(t=Yi._.getQueryParam(location.href,e)).length&&(n[e]=t)})),n}()}}})}},ya=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=ma,e}(va,"Utm","sdkAfterInitPara"),ba="1.26.12",wa=!1,Sa=null,ka={init:function(e){(Sa=e).disableSDK=xt,Sa.enableSDK=Ct,Sa.getDisabled=Et}},Oa=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=ba,e}(ka,"DisableSDK","sdkInitAPI"),Ta="1.26.12",Aa={plugin_name:"DebugSender",init:function(e){Zi=(Xi=e)._,Lt()}},Pa=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Ta,e}(Aa),Na="1.26.12",ja={plugin_name:"JsappSender",init:function(e){ea=(Qi=e)._,Qi.on("sdkAfterInitAPI",(function(){ea.isObject(Qi.commonWays)&&(Qi.commonWays.setOnlineState=Ut),Qi.registerInterceptor("sendDataStage",{send:{priority:40,entry:$t}})}))}},Ia=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Na,e}(ja),xa="1.26.12",Ca=null,Ea={plugin_name:"BatchSender",init:function(e){na=(ta=e)._,Rt()}},Da=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=xa,e}(Ea),La="1.26.12",$a={plugin_name:"BeaconSender",init:function(e){ia=(ra=e)._,Jt()}},Ua=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=La,e}($a),Ba="1.26.12",Ra={plugin_name:"AjaxSender",init:function(e){oa=(aa=e)._,qt()}},Ma=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Ba,e}(Ra),Ha="1.26.12",Ja={plugin_name:"ImageSender",init:function(e){ca=(sa=e)._,Gt()}},Fa=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Ha,e}(Ja),Va=null,qa=null,Ka=[],Wa={init:function(e){e&&(qa=(Va=e)._,Va.logger&&Va.logger.appendWriter(Yt),Va.on&&Va.on("sdkAfterInitPara",(function(){for(var e=0;e<Ka.length;e++)Xt(Ka[e]);Ka=null})),Va.on&&Va.on("sdkInitAPI",(function(){Va.enableLocalLog=en,Va.disableLocalLog=tn})))}},za=function(e,t,n){return function(e,t,n){if(t&&(e.plugin_name=t),n&&e.init){var r=e.init;e.init=function(i,a){function o(){r.call(e,i,a)}return function(e,t,n){function r(t,r){e.logger?e.logger.msg.apply(e.logger,r).module(n+""||"").level(t).log():e.log&&e.log.apply(e,r)}t.log=function(){r("log",arguments)},t.warn=function(){r("warn",arguments)},t.error=function(){r("error",arguments)}}(i,e,t),i.readyState&&i.readyState.state>=3||!i.on?o():void i.on(n,o)}}}(e,t,n),e.plugin_version=Pn,e}(Wa,"ConsoleLogger"),Ga="sensorsdata_jssdk_debug";rn.modules=rn.modules||{};for(var Ya=[za,Yr,ii,pi,_i,Ei,$i,Ri,Ji,Ki,la,fa,ha,ya,Oa,Pa,Ia,Da,Ua,Ma,Fa],Xa=[za,zr,ya,Oa,Ia,Pa,ii,$i,pi,Ri,Da,Ua,Ma,Fa],Za=0;Za<Ya.length;Za++){var Qa=Ya[Za];rn._.isString(Qa.plugin_name)?rn.modules[Qa.plugin_name]=Qa:rn._.isArray(Qa.plugin_name)&&rn._.each(Qa.plugin_name,(function(e){rn.modules[e]=Qa}))}for(Za=0;Za<Xa.length;Za++)rn.use(Xa[Za]);var eo=rn;try{"string"==typeof window.sensorsDataAnalytic201505?(rn.para=window[sensorsDataAnalytic201505].para,rn._q=window[sensorsDataAnalytic201505]._q,window[sensorsDataAnalytic201505]=rn,window.sensorsDataAnalytic201505=rn,rn.init()):void 0===window.sensorsDataAnalytic201505?window.sensorsDataAnalytic201505=rn:eo=window.sensorsDataAnalytic201505}catch(e){me(e)}return eo},"object"==i(t)&&"object"==i(e)?e.exports=r():r()},989:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,c,"next",e)}function c(e){t(o,i,a,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},57:function(e,t,n){var r=n(157);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},448:function(e,t,n){var r=n(57);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},558:function(e,t,n){var r=n(570).default;function i(){"use strict";e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return s(a,"_invoke",{value:N(e,n,o)}),a}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var _="suspendedStart",h="executing",m="completed",v={};function y(){}function b(){}function w(){}var S={};p(S,l,(function(){return this}));var k=Object.getPrototypeOf,O=k&&k(k(E([])));O&&O!==a&&o.call(O,l)&&(S=O);var T=w.prototype=y.prototype=Object.create(S);function A(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(i,a,s,c){var l=g(e[i],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var i;s(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function N(e,n,r){var i=_;return function(a,o){if(i===h)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=j(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===_)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var l=g(e,n,r);if("normal"===l.type){if(i=r.done?m:"suspendedYield",l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function j(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=g(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function E(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=w,s(T,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:b,configurable:!0}),b.displayName=p(w,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,d,"GeneratorFunction")),e.prototype=Object.create(T),e},n.awrap=function(e){return{__await:e}},A(P.prototype),p(P.prototype,u,(function(){return this})),n.AsyncIterator=P,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new P(f(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(T),p(T,d,"Generator"),p(T,l,(function(){return this})),p(T,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},579:function(e,t,n){var r=n(570).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},157:function(e,t,n){var r=n(570).default,i=n(579);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},570:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var r={};return function(){"use strict";n.d(r,{default:function(){return Br}});var e=n(448),t=n.n(e);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=n(50),c=n.n(s);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var u=Object.prototype,d="object"==(void 0===n.g?"undefined":l(n.g))&&n.g&&n.g.Object===Object&&n.g,p="object"==("undefined"==typeof self?"undefined":l(self))&&self&&self.Object===Object&&self,f=((d||p||Function("return this")()).isFinite,Symbol?Symbol.toStringTag:void 0),g=(Symbol&&Symbol.isConcatSpreadable,u.toString),_=u.propertyIsEnumerable,h=u.hasOwnProperty,m=u.toString,v=function(e){return!!e&&"object"==l(e)},y=function(e){var t=l(e);return!!e&&("object"==t||"function"==t)};function b(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":f&&f in Object(e)?function(e){var t=h.call(e,f),n=e[f];try{e[f]=void 0;var r=!0}catch(e){}var i=g.call(e);return r&&(t?e[f]=n:delete e[f]),i}(e):m(e)}function w(e){return v(e)&&"[object Arguments]"==b(e)}w(function(){return arguments}());function S(e,t,n,r,i){var a=t;-1!==t.indexOf(";")&&(a=escape(t));var o="".concat(e,"=").concat(a);if(n&&(o+="; domain=".concat(n)),r&&(o+="; path=".concat(r)),i>0){var s=new Date;s.setTime(s.getTime()+60*i*1e3),o+=";expires=".concat(s.toGMTString())}"undefined"!=typeof window&&(document.cookie=o)}function k(e){if("undefined"!=typeof window){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?unescape(t[2]):null}return null}var O,T={set:function(e,t){return"undefined"!=typeof window&&window.localStorage?void 0===t?localStorage.removeItem(e):localStorage.setItem(e,t):null},setObject:function(e,t){return this.set(e,JSON.stringify(t))},get:function(e){if("undefined"!=typeof window&&window.localStorage)try{return localStorage.getItem(e)}catch(e){return null}return""},getObject:function(e){try{return JSON.parse(this.get(e))}catch(e){return{}}},remove:function(e){"undefined"!=typeof window&&window.localStorage&&localStorage.removeItem(e)}},A="",P={};"undefined"!=typeof window&&(O=window.location.hostname,A=window.location.protocol,P=window.__BYBIT_GLOBAL_CONFIG__||{});var N=/^[^.]+\.[^.]+\.[^.]+$/.test(O)||/^[^.]+\.[^.]+\.[^.]+\.(hk|uae|us|uk|jp|fr|de|au|ca|br|in|ru)$/.test(O),j=N&&/^[^.]*testnet[^.]*\./.test(O),I=N&&!j,x=!j&&!I,C=A,E=P.enableAutoman&&P.automan||{},D=E.AUTOMAN_RUNTIME_ENV,L=E.AUTOMAN_API2_HOST,$=E.AUTOMAN_WS2_HOST,U=E.AUTOMAN_TMS_HOST,B=E.AUTOMAN_TMS_PATH,R=E.AUTOMAN_TMS_FULL_PATH,M=(E.AUTOMAN_SERVICE_DOMAINS,E.AUTOMAN_APM_ENABLED,E.AUTOMAN_APM_URL,E.AUTOMAN_SENTRY_ENABLED,E.AUTOMAN_SENTRY_DSN,E.AUTOMAN_LOGGER_ENABLED,E.AUTOMAN_LOGGER_URL,E.AUTOMAN_METRIC_URL,E.AUTOMAN_METRIC_ENABLED,E.AUTOMAN_SENSORS_URL,E.AUTOMAN_SENSORS_ENABLED,"local");j?M="testnet":I?M="prod":x&&(M="test");var H=D||M,J={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_I18N_SOURCE_URL||B||(x?"/download/{{projectId}}/{{ns}}/{{lng}}/":"/translations/{{projectId}}/{{lng}}/{{ns}}.json");R||"".concat({NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_TMS_HOST||U||(x?"https://tms.ffe390afd658c19dcbf707e0597b846d.de":"")).concat(J);var F=O,V=["cloud","announcements","sandbox","blog","newblog","learn"];if(O&&V.some((function(e){return O.includes(e)}))){var q=new RegExp("(?:(?:".concat(V.join("|"),")-testnet|testnet-(?:").concat(V.join("|"),"))"),"g"),K=new RegExp("^(?:".concat(V.join("|"),")(?=.)"),"g");F=O.replace(q,"testnet").replace(K,"www")}/^[^.]+\.[^.]+\.[^.]+\.hk$/.test(O)||/^[^.]+\.[^.]+\.[^.]+\.[^.]+\.hk$/.test(O)||/^[^.]+\.[^.]+\.ae$/.test(O)||/^[^.]+\.[^.]+\.[^.]+\.ae$/.test(O);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_COOKIE_DOMAIN,Y={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_API2_HOST,X={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_WS2_HOST,Z="https:"===C?"wss:":"ws:",Q=!0,ee="public-test-1",te="bybit",ne="com",re="";Q=!1;var ie=F?F.split("."):[];if(3===ie.length){var ae=z(ie,3);ee=ae[0],te=ae[1],ne=ae[2]}if(4===ie.length)if(N){var oe=z(ie,4);ee=oe[0],te=oe[1],ne=oe[2],re=oe[3],ne="".concat(ne,".").concat(re)}else{var se=z(ie,4);ee=se[1],te=se[2],ne=se[3]}if(5===ie.length){var ce=z(ie,5);ee=ce[1],te=ce[2],ne=ce[3],re=ce[4],ne="".concat(ne,".").concat(re)}var le=Q&&("dev-3"===ee||"test-3"===ee),ue=/^(www|m)$/,de="testnet"===ee||"m-testnet"===ee,pe="s1.bycsi.com",fe=de?"t1.bycsi.com":pe,ge=/^(www|m|testnet|m-testnet)$/.test(ee),_e=("".concat(te,".").concat(ne),"api2.".concat(ue.test(ee)?"":"".concat(ee,"."))),he="ws2.".concat(ue.test(ee)?"":"".concat(ee,".")),me="chat.".concat(ue.test(ee)?"":"".concat(ee,".")),ve="affiliates.";de&&(_e="api2-testnet.",me="chat-testnet.",he="ws2-testnet.",ve="affiliates-testnet.");ge||("https://tms.ffe390afd658c19dcbf707e0597b846d.de",ve="affiliates.".concat(ee,"."));"https://".concat(ve).concat(te,".").concat(ne);var ye=_e,be=he,we=te,Se=(G||"b_t_c_k".concat(ue.test(ee)?"":"_".concat(ee)),"https://".concat(pe)),ke=("https://".concat(fe),"".concat(C,"//").concat(me).concat(te,".").concat(ne,"/chat/by-chat-widget.js"),le?"wss:":Z),Oe=(Y||L||"".concat(C,"//").concat(ye).concat(te,".").concat(ne),X||$||"".concat(ke,"//").concat(be).concat(te,".").concat(ne),"".concat(C,"//infra-gateway.").concat(ee,".").concat(te,".").concat(ne),"".concat(ke,"//www.").concat(ee,".").concat(te,".").concat(ne),ue.test(ee)||"_".concat(ee),"https://help.".concat(te,".com")),Te=("https://blog.".concat(te,".com"),"".concat(Oe,"/hc"),"BYBIT_LANG_KEY"),Ae="_by_l_g_d",Pe=("".concat(Se,"/asset/image/logo-white.svg"),"".concat(Se,"/asset/image/logo-dark.svg"),"".concat(Se,"/assets/image/d-").concat(we,".png"),"BYBIT");if("undefined"!=typeof window){var Ne=window.location.hostname;Pe=/^[^.]+\.[^.]+\.[^.]+\.hk$/.test(Ne)||/^[^.]+\.[^.]+\.[^.]+\.[^.]+\.hk$/.test(Ne)?"HKG":/^[^.]+\.[^.]+\.ae$/.test(Ne)||/^[^.]+\.[^.]+\.[^.]+\.ae$/.test(Ne)?"ARE":"BYBIT"}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search;return t?t.slice(1).split("&").reduce((function(e,t){var n=Ie(t.split("="),2),r=n[0],a=n[1];return o(o({},e),{},i({},r,decodeURIComponent(a)))}),{}):{}},Ce=function(e){return null==e?"":"".concat(e)},Ee=["utm_medium","utm_source","utm_term","utm_content","utm_campaign"],De=["c","dtpid","pid","sa_utm_medium","sa_utm_source","sa_utm_lang","sa_utm_channel","sa_utm_team","sa_utm_pmt","sa_utm_cet","sa_utm_markets","sa_utm_ci","sa_utm_csm","sa_utm_csy","sa_utm_cem","sa_utm_cey","sa_utm_cpt","sa_utm_cco","sa_utm_cct","sa_utm_ccbt","sa_utm_cta","sa_utm_tcn","sa_utm_tcv","sa_utm_tvcl","sa_utm_tcf","sa_utm_tcaw","sa_utm_tcah"],Le=function(e){return e&&"undefined"!==e&&"null"!==e},$e=function(e){if(location.hostname.includes(".zoomex.")){var t;if(Le(e.affiliate_id))return{utm_medium:"affiliate",utm_source:document.referrer,utm_campaign:(null===(t=e.utm_campaign)||void 0===t?void 0:t.trim())||"",utm_term:"",utm_content:""};if(Le(e.ref))return{utm_medium:"referral",utm_source:document.referrer,utm_campaign:"",utm_term:"",utm_content:""}}return null},Ue=function(){var e=De;return e.push.apply(e,Ee),e},Be=function(){var e=xe(window.location),t=$e(e);return t||Ue().reduce((function(t,n){var r=e[n]||"",i=null==r?void 0:r.trim();return Le(i)&&(t[n]=i),t}),{})},Re=function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=Be(),c="_a_u_v";(null==e||null===(t=e.register)||void 0===t||t.call(e,i({},c,"0.0.6")),Object.keys(s).length>0)&&(null==e||e.clearAllRegister(Ue()),null==e||null===(n=e.register)||void 0===n||n.call(e,o({},s)));a&&(null==e||null===(r=e.quick)||void 0===r||r.call(e,"autoTrack"))};function Me(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var He,Je,Fe,Ve,qe,Ke,We=function(){return k(Te)||T.get(Te)||window.navigator.language},ze={env:H,app_id:1e4,lang:function(){return We()},notify_lang:function(){return We()},project_type:"",project_name:"",ga_id:function(){if(window.ga){var e=window.ga.getAll&&window.ga.getAll()||[];if(e.length)return e[0].get("clientId")}var t=k("_ga");return t?t.slice(6):"none client id"},page_url:function(){return window.location.href||""},page_path:function(){return window.location.pathname||""},referrer_url:function(){return document.referrer||""},referrer_path:function(){if(!document.referrer)return"";if(window.URL)return new URL(document.referrer).pathname;var e=document.createElement("a");return e.href=document.referrer,e.pathname},tdid:function(){return T.get("BYBIT_TDID_V2")||""},guid:function(){var e,t=k(Ae);return t&&36===t.length||(t="".concat(Me()).concat(Me(),"-").concat(Me(),"-").concat(Me(),"-").concat(Me(),"-").concat(Me()).concat(Me()).concat(Me())),S(Ae,t,-1!==(e=window.location.host).indexOf("localhost")?"localhost":e.replace(/^(www|m|testnet|blog-test|blog|learn|announcements)/,""),"/",172800),t},u:function(){return window.GA_UID||""},platform_type:(He=navigator.userAgent,Je=/(?:Android)/.test(He),Fe=/(?:Firefox)/.test(He),Ve=/(?:iPad|PlayBook)/.test(He)||Je&&!/(?:Mobile)/.test(He)||Fe&&/(?:Tablet)/.test(He),/(?:iPhone)/.test(He)&&!Ve||Je?"H5":"Web"),dx_id:function(){return k("35CJa4376")||""},dx_cp:function(){return k("35CJa4376-cp")||""},isTg:function(){var e;return!!(null===(e=window)||void 0===e?void 0:e.TelegramWebviewProxy)},user_agent:window.navigator.userAgent||""},Ge=c(),Ye=n(558),Xe=n.n(Ye),Ze=n(989),Qe=n.n(Ze),et=n(828),tt={};"undefined"!=typeof window&&(Ke=window.location.hostname,window.location.protocol,tt=window.__BYBIT_GLOBAL_CONFIG__||{});var nt=/^[^.]+\.[^.]+\.[^.]+$/.test(Ke)||/^[^.]+\.[^.]+\.[^.]+\.(hk|uae|us|uk|jp|fr|de|au|ca|br|in|ru)$/.test(Ke),rt=nt&&/^[^.]*testnet[^.]*\./.test(Ke),it=nt&&!rt,at=!rt&&!it,ot=tt.enableAutoman&&tt.automan||{},st=ot.AUTOMAN_RUNTIME_ENV,ct=(ot.AUTOMAN_API2_HOST,ot.AUTOMAN_WS2_HOST,ot.AUTOMAN_TMS_HOST),lt=ot.AUTOMAN_TMS_PATH,ut=ot.AUTOMAN_TMS_FULL_PATH,dt=(ot.AUTOMAN_SERVICE_DOMAINS,ot.AUTOMAN_APM_ENABLED,ot.AUTOMAN_APM_URL,ot.AUTOMAN_SENTRY_ENABLED,ot.AUTOMAN_SENTRY_DSN,ot.AUTOMAN_LOGGER_ENABLED,ot.AUTOMAN_LOGGER_URL,ot.AUTOMAN_METRIC_URL,ot.AUTOMAN_METRIC_ENABLED,ot.AUTOMAN_SENSORS_URL,ot.AUTOMAN_SENSORS_ENABLED,"local");rt?dt="testnet":it?dt="prod":at&&(dt="test");var pt=st||dt,ft={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_I18N_SOURCE_URL||lt||(at?"/download/{{projectId}}/{{ns}}/{{lng}}/":"/translations/{{projectId}}/{{lng}}/{{ns}}.json");ut||"".concat({NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_TMS_HOST||ct||(at?"https://tms.ffe390afd658c19dcbf707e0597b846d.de":"")).concat(ft);var gt=["cloud","announcements","sandbox","blog","newblog","learn"];if(Ke&&gt.some((function(e){return Ke.includes(e)}))){var _t=new RegExp("(?:(?:".concat(gt.join("|"),")-testnet|testnet-(?:").concat(gt.join("|"),"))"),"g"),ht=new RegExp("^(?:".concat(gt.join("|"),")(?=.)"),"g");Ke.replace(_t,"testnet").replace(ht,"www")}(null===(mt=Ke)||void 0===mt?void 0:mt.includes("bybit.eu"))||(null===(vt=Ke)||void 0===vt?void 0:vt.includes("bybit.kz"))||(null===(yt=Ke)||void 0===yt?void 0:yt.includes("bybit-tr.com"))||/^[^.]+\.[^.]+\.[^.]+\.hk$/.test(Ke)||/^[^.]+\.[^.]+\.[^.]+\.[^.]+\.hk$/.test(Ke)||(null===(bt=Ke)||void 0===bt?void 0:bt.includes("byhkbit.com"))||/^[^.]+\.[^.]+\.ae$/.test(Ke)||/^[^.]+\.[^.]+\.[^.]+\.ae$/.test(Ke)||/^[^.]+\.[^.]+\.nl$/.test(Ke)||/^[^.]+\.[^.]+\.[^.]+\.nl$/.test(Ke);var mt,vt,yt,bt,wt="undefined"!=typeof window,St=["android","ios"];function kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|Telegram-Android/i,n=/android|ipad|playbook|silk/i,r=null==e?void 0:e.ua;if(r||"undefined"==typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var i=t.test(r)||!!e.tablet&&n.test(r);return!i&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(i=!0),i}function Ot(){var e;return"undefined"!=typeof window&&!!(null===(e=window)||void 0===e?void 0:e.TelegramWebviewProxy)}var Tt="pc_tg",At="ios_tg",Pt="android_tg";function Nt(){var e,t,n,r,i=(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent)||"",a=(null===(n=window)||void 0===n||null===(r=n.navigator)||void 0===r?void 0:r.platform)||"",o=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?o="macos":-1!==["iPhone","iPad","iPod"].indexOf(a)?o="ios":-1!==["Win32","Win64","Windows","WinCE"].indexOf(a)?o="windows":/Android/.test(i)?o="android":!o&&/Linux/.test(a)&&(o="linux"),o}(function(e){try{if(wt){if(Ot()){var t=Nt();return t&&St.includes(t)?"ios"===t?At:Pt:Tt}return null!=e?e:kt()?"h5":"pc"}null!=e||kt()}catch(t){return null!=e?e:kt()?"h5":"pc"}})(),function(){try{if(wt){if(!Ot())return;var e=Nt()||(kt()?"android":"windows"),t=St.includes(e)?"phone":"pc";return"company/bybit platform/tg-mini system/".concat(e," device/").concat(t)}}catch(e){return}}();var jt=new Map([["https://fh-static.bycsi.com","/common-static/fhs"],["https://t1.bycsi.com","/bycsi-root"],["https://s1.bycsi.com","/bycsi-root"]]),It=void 0!==et&&"development"===(null===(qe={NODE_ENV:"production",PUBLIC_PATH:"/"})||void 0===qe?void 0:qe.NODE_ENV);function xt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=new URL(e);if(!jt.has(n.origin))return e;var r=e;return r=e.replace(n.origin,jt.get(n.origin)),(It||t)&&(r=n.origin.includes("t1.bycsi.com")?"https://testnet.bybit.com".concat(r):"https://www.bybit.com".concat(r)),r}catch(t){return e}}var Ct=function(e){return new Promise((function(t,n){if("undefined"!=typeof window){var r=document,i="script",a=r.getElementsByTagName(i)[0],o=r.createElement(i);o.async=!0,o.src=e,o.onload=function(){t()},o.onerror=function(){n()},a.parentNode.insertBefore(o,a)}}))},Et=xt("https://s1.bycsi.com/common-static/infra-static/data-core/plugins/abtest-0.1.5.min.js"),Dt=xt("https://t1.bycsi.com/common-static/infra-static/data-core/plugins/abtest-0.1.5.min.js"),Lt="https://sc-abtest.ffe390afd658c19dcbf707e0597b846d.de/api/v2/abtest/online/results?project-key=E1495F5FC222C591662AA2A5131BE697A4ADE442",$t="https://sc-abtest.ffe390afd658c19dcbf707e0597b846d.de/api/v2/abtest/online/results?project-key=04998C9B84A38A7D810A5ADAF48229BA568BF954",Ut=function(){var e=Qe()(Xe()().mark((function e(){var n,r,i,a,o=arguments;return Xe()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},i=window.FORCE_PROD||it,a=i?Et:Dt,e.next=5,Ct(a).then((function(){var e=i?Lt:$t;window.sensorsAbtest=Ge.use("SensorsABTest",t()({url:e,multilink:!1},r))}));case 5:return e.abrupt("return",null===(n=window)||void 0===n?void 0:n.sensorsAbtest);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bt=function(){var e=Qe()(Xe()().mark((function e(t,n){var r,i,a;return Xe()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=window)&&void 0!==r&&r.sensorsAbtest){e.next=3;break}return e.next=3,Ut(n);case 3:return e.abrupt("return",null===(i=window)||void 0===i||null===(i=i.sensorsAbtest)||void 0===i||null===(a=i.fastFetchABTest)||void 0===a?void 0:a.call(i,t));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rt=function(e){var t;if(!e)return t;try{t=new URL(e)}catch(e){console.warn(e)}return t},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(".");return t.slice(-(t.length-1)).join(".")},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Mt(e),r=Mt(t);return n===r};function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}var Ft=Object.prototype,Vt="object"==(void 0===n.g?"undefined":Jt(n.g))&&n.g&&n.g.Object===Object&&n.g,qt="object"==("undefined"==typeof self?"undefined":Jt(self))&&self&&self.Object===Object&&self,Kt=((Vt||qt||Function("return this")()).isFinite,Symbol?Symbol.toStringTag:void 0),Wt=(Symbol&&Symbol.isConcatSpreadable,Ft.toString),zt=Ft.propertyIsEnumerable,Gt=Ft.hasOwnProperty,Yt=Ft.toString,Xt=function(e){return!!e&&"object"==Jt(e)},Zt=function(e,t){return t.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{})};function Qt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Kt&&Kt in Object(e)?function(e){var t=Gt.call(e,Kt),n=e[Kt];try{e[Kt]=void 0;var r=!0}catch(e){}var i=Wt.call(e);return r&&(t?e[Kt]=n:delete e[Kt]),i}(e):Yt(e)}function en(e){return Xt(e)&&"[object Arguments]"==Qt(e)}en(function(){return arguments}());var tn;function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var an="",on={};"undefined"!=typeof window&&(tn=window.location.hostname,an=window.location.protocol,on=window.__BYBIT_GLOBAL_CONFIG__||{});var sn=/^[^.]+\.[^.]+\.[^.]+$/.test(tn)||/^[^.]+\.[^.]+\.[^.]+\.(hk|uae|us|uk|jp|fr|de|au|ca|br|in|ru)$/.test(tn),cn=sn&&/^[^.]*testnet[^.]*\./.test(tn),ln=sn&&!cn,un=!cn&&!ln,dn=an,pn=on.enableAutoman&&on.automan||{},fn=(pn.AUTOMAN_RUNTIME_ENV,pn.AUTOMAN_API2_HOST),gn=pn.AUTOMAN_WS2_HOST,_n=pn.AUTOMAN_TMS_HOST,hn=pn.AUTOMAN_TMS_PATH,mn=pn.AUTOMAN_TMS_FULL_PATH;pn.AUTOMAN_SERVICE_DOMAINS,pn.AUTOMAN_APM_ENABLED,pn.AUTOMAN_APM_URL,pn.AUTOMAN_SENTRY_ENABLED,pn.AUTOMAN_SENTRY_DSN,pn.AUTOMAN_LOGGER_ENABLED,pn.AUTOMAN_LOGGER_URL,pn.AUTOMAN_METRIC_URL,pn.AUTOMAN_METRIC_ENABLED,pn.AUTOMAN_SENSORS_URL,pn.AUTOMAN_SENSORS_ENABLED;var vn={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_I18N_SOURCE_URL||hn||(un?"/download/{{projectId}}/{{ns}}/{{lng}}/":"/translations/{{projectId}}/{{lng}}/{{ns}}.json");mn||"".concat({NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_TMS_HOST||_n||(un?"https://tms.ffe390afd658c19dcbf707e0597b846d.de":"")).concat(vn);var yn=tn,bn=["cloud","announcements","sandbox","blog","newblog","learn"];if(tn&&bn.some((function(e){return tn.includes(e)}))){var wn=new RegExp("(?:(?:".concat(bn.join("|"),")-testnet|testnet-(?:").concat(bn.join("|"),"))"),"g"),Sn=new RegExp("^(?:".concat(bn.join("|"),")(?=.)"),"g");yn=tn.replace(wn,"testnet").replace(Sn,"www")}/^[^.]+\.[^.]+\.[^.]+\.hk$/.test(tn)||/^[^.]+\.[^.]+\.[^.]+\.[^.]+\.hk$/.test(tn)||/^[^.]+\.[^.]+\.ae$/.test(tn)||/^[^.]+\.[^.]+\.[^.]+\.ae$/.test(tn);var kn={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_COOKIE_DOMAIN,On={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_API2_HOST,Tn={NODE_ENV:"production",PUBLIC_PATH:"/"}.BYBIT_WS2_HOST,An="https:"===dn?"wss:":"ws:",Pn=!0,Nn="public-test-1",jn="bybit",In="com",xn="";Pn=!1;var Cn=yn?yn.split("."):[];if(3===Cn.length){var En=rn(Cn,3);Nn=En[0],jn=En[1],In=En[2]}if(4===Cn.length)if(sn){var Dn=rn(Cn,4);Nn=Dn[0],jn=Dn[1],In=Dn[2],xn=Dn[3],In="".concat(In,".").concat(xn)}else{var Ln=rn(Cn,4);Nn=Ln[1],jn=Ln[2],In=Ln[3]}if(5===Cn.length){var $n=rn(Cn,5);Nn=$n[1],jn=$n[2],In=$n[3],xn=$n[4],In="".concat(In,".").concat(xn)}var Un=Pn&&("dev-3"===Nn||"test-3"===Nn),Bn=/^(www|m)$/,Rn="testnet"===Nn||"m-testnet"===Nn,Mn="s1.bycsi.com",Hn=Rn?"t1.bycsi.com":Mn,Jn=/^(www|m|testnet|m-testnet)$/.test(Nn),Fn=("".concat(jn,".").concat(In),"api2.".concat(Bn.test(Nn)?"":"".concat(Nn,"."))),Vn="ws2.".concat(Bn.test(Nn)?"":"".concat(Nn,".")),qn="chat.".concat(Bn.test(Nn)?"":"".concat(Nn,".")),Kn="affiliates.";Rn&&(Fn="api2-testnet.",qn="chat-testnet.",Vn="ws2-testnet.",Kn="affiliates-testnet.");Jn||("https://tms.ffe390afd658c19dcbf707e0597b846d.de",Kn="affiliates.".concat(Nn,"."));var Wn="https://".concat(Kn).concat(jn,".").concat(In),zn=Fn,Gn=Vn,Yn=jn,Xn=(kn||"b_t_c_k".concat(Bn.test(Nn)?"":"_".concat(Nn)),"https://".concat(Mn)),Zn=("https://".concat(Hn),"".concat(dn,"//").concat(qn).concat(jn,".").concat(In,"/chat/by-chat-widget.js"),Un?"wss:":An),Qn=On||fn||"".concat(dn,"//").concat(zn).concat(jn,".").concat(In),er=(Tn||gn||"".concat(Zn,"//").concat(Gn).concat(jn,".").concat(In),"".concat(dn,"//infra-gateway.").concat(Nn,".").concat(jn,".").concat(In),"".concat(Zn,"//www.").concat(Nn,".").concat(jn,".").concat(In),Bn.test(Nn)||"_".concat(Nn),"https://help.".concat(jn,".com"));"https://blog.".concat(jn,".com"),"".concat(er,"/hc");function tr(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var nr="_by_l_g_d",rr=("".concat(Xn,"/asset/image/logo-white.svg"),"".concat(Xn,"/asset/image/logo-dark.svg"),"".concat(Xn,"/assets/image/d-").concat(Yn,".png"),"BYBIT");if("undefined"!=typeof window){var ir=window.location.hostname;rr=/^[^.]+\.[^.]+\.[^.]+\.hk$/.test(ir)||/^[^.]+\.[^.]+\.[^.]+\.[^.]+\.hk$/.test(ir)?"HKG":/^[^.]+\.[^.]+\.ae$/.test(ir)||/^[^.]+\.[^.]+\.[^.]+\.ae$/.test(ir)?"ARE":"BYBIT"}function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function or(e){var t=function(e,t){if("object"!=ar(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ar(t)?t:t+""}function sr(e,t,n){return(t=or(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,or(r.key),r)}}var pr=null;try{pr="AbortController"in window}catch(e){pr=null}var fr="json",gr={},_r=function(e){var t=String(e).toLowerCase();return{json:!0,text:!0,formData:!0,blob:!0,arrayBuffer:!0}[t]?t:fr},hr=function(e){return e>=200&&e<300},mr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ur(this,e),this.defaultOpts=lr(lr({},gr),t),this.timeout=n.timeout||3e4,this.validateStatus=n.validateStatus||hr,this.defaultRespType=n.defaultRespType||fr,this.interceptors={response:[],request:[],errorHandler:[],finally:[]}}var t,n,r;return t=e,n=[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e;if(t.body){var i=t.body,a=Object.keys(i);a.forEach((function(e){var t="".concat(e,"=").concat(i[e]);r=r.indexOf("?")>-1?"".concat(r,"&").concat(t):"".concat(r,"?").concat(t)})),delete t.body}return this.fetch(r,lr(lr({},t),{},{method:"get"}),n)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.fetch(e,lr(lr({},t),{},{method:"post"}),n)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.fetch(e,lr(lr({},t),{},{method:"delete"}),n)}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.fetch(e,lr(lr({},t),{},{method:"put"}),n)}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=i||this.defaultRespType,o=lr(lr(lr({url:e},this.defaultOpts),r),{},{headers:lr(lr({},this.defaultOpts.headers),r.headers)}),s=this.interceptors.request.reduce((function(t,n){return n(t,e)}),o),c=pr?new AbortController:{};s.signal=c.signal;var l=new Promise((function(r,i){t=setTimeout((function(){i({ret_code:9000001,ret_msg:"Request timeout, please re-try!",url:e}),pr&&c.abort()}),n.timeout)})),u=fetch(e,s);return Promise.race([u,l]).then((function(e){return clearTimeout(t),e})).then((function(e){return n.validateStatus(e.status)?e.ok?new Promise((function(t){e[_r(a)]().then((function(n){t({headers:e.headers,data:n})}))})):{headers:{},data:{}}:Promise.reject({status:e.status,statusText:e.statusText})})).then((function(t){var r=t.data,i=t.headers;return n.interceptors.response.reduce((function(e,t){return e.then(t)}),Promise.resolve({headers:i,data:r,config:s,url:e}))})).catch((function(r){return clearTimeout(t),n.interceptors.errorHandler.forEach((function(t){return t(r,s,e)})),Promise.reject(r)})).finally((function(){n.interceptors.finally.forEach((function(t){return t(s,e)}))}))}))}],n&&dr(t.prototype,n),r&&dr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),vr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"undefined"!=typeof window&&"fetch"in window||console&&console.error&&console.error("fetch function doesn't detected in you environment");var n=new mr(e,t),r=n.fetch.bind(n);return r.get=n.get.bind(n),r.post=n.post.bind(n),r.put=n.put.bind(n),r.delete=n.delete.bind(n),r.interceptors=n.interceptors,r};function yr(){window.OpenID||(window.OpenID={getIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.TDID&&T.set("BYBIT_TDID_V2",e.TDID)}})}var br=function(){if(-1!==yn.indexOf("localhost"))return"localhost";var e=yn;return cn&&(e=window.location.hostname),e.replace(/^(www|m|blog-test)/,"")},wr=function(e,t){var n=br();!function(e,t,n,r,i){var a=new Date;a.setTime(a.getTime()+60*i*1e3);var o="expires=".concat(a.toUTCString()),s="".concat(e,"=").concat(t,";").concat(o);n&&(s+=";domain=".concat(n)),s+=r?";path=".concat(r):";path=/",document.cookie=s}(e,JSON.stringify(t),n,"/",1440)},Sr=function(){var e=k(nr);return e&&36===e.length||(e="".concat(tr()).concat(tr(),"-").concat(tr(),"-").concat(tr(),"-").concat(tr(),"-").concat(tr()).concat(tr()).concat(tr())),S(nr,e,br(),"/",172800),e},kr=function(e){var t=new URL(e),n={};return new URLSearchParams(t.search).forEach((function(e,t){n[t]=e})),n},Or=function(){var e=vr({headers:{"Content-Type":"application/json"}});return e.interceptors.response.push((function(e){var t;return e&&"OK"===(null==e||null===(t=e.data)||void 0===t?void 0:t.ret_msg)?Promise.resolve():Promise.reject("Non Response!")})),e}(),Tr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";return"production"===e?"BYBIT_REG_REF":"BYBIT_REG_REF_".concat(e)},Ar="".concat(Qn,"/s1/affiliate/click/add"),Pr="".concat(Wn,"/apiv2/click/add"),Nr="explorebybit.com",jr=function(e){if(e){var t=e.hostname,n=e.pathname,r=e.search;return{referrer:"".concat(t).concat(n).concat(r),source:Mt(t)}}return{}},Ir=function(e){var t=e.match(/dtpid=(\d+)&/),n=e.match(/sa_utm_tcn=(\d+)&/);return t&&t.length>1?t[1]:n&&n.length>1?n[1]:null},xr=function(e){if("undefined"==typeof window)return"";var t,n,r=Tr(e);n="".concat(r,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"),n+=t?";path=".concat(t):";path=/",document.cookie=n;var i=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}(r),a={};try{var o;(null===(o=a=JSON.parse(i)||{})||void 0===o?void 0:o.ext_json)&&(a.ext_json=JSON.stringify(a.ext_json))}catch(e){console.warn(e)}return a},Cr=function(){!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("undefined"!=typeof window){yr();var i=Rt(document.referrer),a=Ir(window.location.href),s=window.location.hostname,c=i&&Ht(s,i.hostname),l=xr(e)||{},u=l.affiliate_id,d=l.ref,p=null==l||null===(t=l.ext_json)||void 0===t?void 0:t.dtpid,f=kr(window.location.href),g=f.affiliate_id,_=f.ref,h=f.utmsource,m=u===g,v=d===_,y=p&&p===a,b="impact"!==h,w=window===top.window,S=0!==Object.keys(l).length;if(!(w&&c&&S&&m&&v&&y&&b))if(!(s.indexOf(Nr)>=0)){var k=Tr(e),O=f.source,T=void 0===O?n.source:O,A=f.medium,P=void 0===A?n.medium:A,N=f.campaign,j=void 0===N?n.campaign:N,I={stage:f.stage,lang:f.language||navigator.language,regist_channel:f.regist_channel,term:f.term,g:Sr()};if(g){if(m)return;var x=o(o(o({},I),jr(i)),{},{medium:"affiliate"}),C=Zt(f,["affiliate_id","group_id","group_type"]),E=o(o(o({},x),C),{},{url:window.location.href,last_refresh_time:(new Date).toUTCString()});if(o(o({},x),{},{su:E.affiliate_id})){var D=r?Pr:Ar;Or.post(D,{body:JSON.stringify(C)}).catch()}wr(k,E)}else if(_){if(v)return;var L=o(o(o({},I),jr(i)),{},{medium:"referral"}),$=o(o(o({},L),Zt(f,["ref"])),{},{url:window.location.href,last_refresh_time:(new Date).toUTCString()});o(o({},L),{},{su:$.ref}),wr(k,$)}else if(null==P?void 0:P.includes("paid_")){if(y)return;var U=o(o(o({},I),jr(i)),{},{medium:P}),B=o(o({},U),{},{url:window.location.href,last_refresh_time:(new Date).toUTCString(),ext_json:{dtpid:a}});wr(k,B)}else if(h){var R,M=o(o(o({},I),{medium:h,utm_url:window.location.href,utm_data:Math.floor((new Date).getTime()/1e3)}),{},{referrer:jr(i).referrer,url:window.location.href,last_refresh_time:(new Date).toUTCString(),ext_json:{dtpid:a}});l.affiliate_id||l.ref||(null===(R=l.medium)||void 0===R?void 0:R.includes("paid_"))||wr(k,M)}else if(T&&P){var H,J=o(o(o({},I),Zt(f,["content"])),{},{source:T,medium:P,campaign:j,referrer:jr(i).referrer,url:window.location.href,last_refresh_time:(new Date).toUTCString(),ext_json:{dtpid:a}});"web2"!==P&&(l.affiliate_id||l.ref||(null===(H=l.medium)||void 0===H?void 0:H.includes("paid_")))||wr(k,J)}else{var F,V=jr(i),q=V.referrer,K=V.source,W=o(o({},I),{},{referrer:q,source:K,medium:q?"other":"direct",url:window.location.href,last_refresh_time:(new Date).toUTCString(),ext_json:{dtpid:a}});if(!q&&"other"===l.medium)return;l.affiliate_id||l.ref||(null===(F=l.medium)||void 0===F?void 0:F.includes("paid_"))||l.source||"impact"===l.medium||wr(k,W)}}}}(pt)},Er={start:function(){yr()}};Ge.getUTMParamHeader=function(){var e=xe(window.location),t=$e(e);if(t)return t;var n,r,i=Ue().filter((function(t){return t in e})).reduce((function(t,n){return t[n]=e[n]||"",t}),{});return n=JSON.stringify(i),r=Ce(n),btoa(encodeURIComponent(r).replace(/%([\dA-Fa-f]{2})/g,(function(e,t){return String.fromCharCode("0x".concat(t))})))},Ge.getChannelInfo=xr,Ge.initABtest=Ut,Ge.fastFetchABTest=Bt;!function(){if("undefined"!=typeof window){Cr(),Er.start();var e=window.initOpts,n=void 0===e?{}:e,r=window.registerOpts,i=void 0===r?{}:r;!function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoUTM:!1,heatmap:{},autoTrack:!0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(r)){var a=window.FORCE_PROD||I?"production":"default",s="https://sc-datasink.ffe390afd658c19dcbf707e0597b846d.de/sa?project=".concat(a);c().init(o({is_track_single_page:!0,show_log:!1,send_type:"ajax",web_url:"https://sc-web.ffe390afd658c19dcbf707e0597b846d.de?project=".concat(a),server_url:s,heatmap:o({clickmap:"default",scroll_notice_map:"default"},r.heatmap),app_js_bridge:!0},r));var l={anonymous_id:null===c()||void 0===c()||null===(e=c().store)||void 0===e||null===(t=e.getUnionId())||void 0===t?void 0:t.anonymous_id};y(i)&&(c().registerPage(o(o(o({},ze),i),l)),r.autoUTM&&Re(c()));var u=null===c()||void 0===c()||null===(n=c().getPresetProperties())||void 0===n?void 0:n._distinct_id;0!==u&&"0"!==u&&"NaN"!==u||c().logout(),(void 0===r.autoTrack||r.autoTrack)&&c().quick("autoTrack")}}(t()({autoUTM:!0,autoTrack:!0},n),t()({project_type:window.PROJECT_TYPE||"",project_name:window.PROJECT_NAME||""},i))}}();var Dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t()(t()({},e),{},{page_name:e.page_name||e.title||"",page_section:e.page_section||e.plate_area||e.section||e.section_type||"",button_name:e.button_name||e.token_action_type||"",is_login:e.is_login||e.is_loginuser||e.is_loginsuccess,lang:e.lang||e.page_language||""})},Lr=Ge.track,$r=Ge.login,Ur=Ge.identify;Ge.click=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ge.track("click",Dr(e))},Ge.callback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ge.track("callback",Dr(e))},Ge.exposure=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ge.track("exposure",Dr(e))},Ge.login=function(e){e&&0!==e&&"0"!==e&&"NaN"!==e&&$r(e)},Ge.identify=function(e){e&&0!==e&&"0"!==e&&"NaN"!==e&&Ur(e)},Ge.track=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lr(e,Dr(t))};!function(){if("undefined"!=typeof window){var e={init:function(){},sensors:Ge,fastFetchABTest:Bt};window.BySensor=e,window.BySensors=e,window.sensors=Ge,window.skynet={init:function(){},sensors:Ge,BySensors:e,fastFetchABTest:Bt}}}();var Br=Ge}(),r=r.default}()}));