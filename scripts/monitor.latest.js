/**
 * @license
 * @fe/monitor v1.0.30
 * Released under the MIT license.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Monitor=e()}(this,(function(){"use strict";function t(){t=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new S(r||[]);return o(a,"_invoke",{value:x(t,n,u)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f={};function h(){}function p(){}function v(){}var g={};c(g,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(O([])));y&&y!==n&&r.call(y,a)&&(g=y);var _=v.prototype=h.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function x(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=d(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function O(t){if(t||""===t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=v,o(_,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),c(_,s,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function e(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function n(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=t.apply(n,r);function u(t){e(a,o,i,u,s,"next",t)}function s(t){e(a,o,i,u,s,"throw",t)}u(void 0)}))}}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),r)}var o,i}function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o.apply(this,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function s(t,e,n){return s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o},s.apply(null,arguments)}function c(t){var e="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)},c(t)}function l(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h={exports:{}};!function(t,e){function n(t,e){var n=[],r=[];return null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(e)).join(".")+"]"}),function(o,i){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?r.splice(a,1/0,o):r.push(o),~n.indexOf(i)&&(i=e.call(this,o,i))}else n.push(i);return null==t?i:t.call(this,o,i)}}(t.exports=function(t,e,r,o){return JSON.stringify(t,n(e,o),r)}).getSerialize=n}(h);var p=h.exports,v={},g={};!function(t){var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)n(r,o)&&(t[o]=r[o])}}return t},t.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,r,o){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),o);else for(var i=0;i<r;i++)t[o+i]=e[n+i]},flattenChunks:function(t){var e,n,r,o,i,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),o=0,e=0,n=t.length;e<n;e++)i=t[e],a.set(i,o),o+=i.length;return a}},o={arraySet:function(t,e,n,r,o){for(var i=0;i<r;i++)t[o+i]=e[n+i]},flattenChunks:function(t){return[].concat.apply([],t)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(e)}(g);var m={},y=g,_=0,b=1;function w(t){for(var e=t.length;--e>=0;)t[e]=0}var x=0,E=29,k=256,T=k+1+E,S=30,O=19,j=2*T+1,A=15,L=16,I=7,z=256,C=16,N=17,P=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(T+2));w(B);var H=new Array(2*S);w(H);var F=new Array(512);w(F);var q=new Array(256);w(q);var G=new Array(E);w(G);var W,$,J,X=new Array(S);function V(t,e,n,r,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=t&&t.length}function Y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function K(t){return t<256?F[t]:F[256+(t>>>7)]}function Q(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function Z(t,e,n){t.bi_valid>L-n?(t.bi_buf|=e<<t.bi_valid&65535,Q(t,t.bi_buf),t.bi_buf=e>>L-t.bi_valid,t.bi_valid+=n-L):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function tt(t,e,n){Z(t,n[2*e],n[2*e+1])}function et(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function nt(t,e,n){var r,o,i=new Array(A+1),a=0;for(r=1;r<=A;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=e;o++){var u=t[2*o+1];0!==u&&(t[2*o]=et(i[u]++,u))}}function rt(t){var e;for(e=0;e<T;e++)t.dyn_ltree[2*e]=0;for(e=0;e<S;e++)t.dyn_dtree[2*e]=0;for(e=0;e<O;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*z]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function ot(t){t.bi_valid>8?Q(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function it(t,e,n,r){var o=2*e,i=2*n;return t[o]<t[i]||t[o]===t[i]&&r[e]<=r[n]}function at(t,e,n){for(var r=t.heap[n],o=n<<1;o<=t.heap_len&&(o<t.heap_len&&it(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!it(e,r,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=r}function ut(t,e,n){var r,o,i,a,u=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],o=t.pending_buf[t.l_buf+u],u++,0===r?tt(t,o,e):(tt(t,(i=q[o])+k+1,e),0!==(a=R[i])&&Z(t,o-=G[i],a),tt(t,i=K(--r),n),0!==(a=M[i])&&Z(t,r-=X[i],a))}while(u<t.last_lit);tt(t,z,e)}function st(t,e){var n,r,o,i=e.dyn_tree,a=e.stat_desc.static_tree,u=e.stat_desc.has_stree,s=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=j,n=0;n<s;n++)0!==i[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):i[2*n+1]=0;for(;t.heap_len<2;)i[2*(o=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[o]=0,t.opt_len--,u&&(t.static_len-=a[2*o+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)at(t,i,n);o=s;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],at(t,i,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,i[2*o]=i[2*n]+i[2*r],t.depth[o]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,i[2*n+1]=i[2*r+1]=o,t.heap[1]=o++,at(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,o,i,a,u,s=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,d=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,p=e.stat_desc.max_length,v=0;for(i=0;i<=A;i++)t.bl_count[i]=0;for(s[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<j;n++)(i=s[2*s[2*(r=t.heap[n])+1]+1]+1)>p&&(i=p,v++),s[2*r+1]=i,r>c||(t.bl_count[i]++,a=0,r>=h&&(a=f[r-h]),u=s[2*r],t.opt_len+=u*(i+a),d&&(t.static_len+=u*(l[2*r+1]+a)));if(0!==v){do{for(i=p-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[p]--,v-=2}while(v>0);for(i=p;0!==i;i--)for(r=t.bl_count[i];0!==r;)(o=t.heap[--n])>c||(s[2*o+1]!==i&&(t.opt_len+=(i-s[2*o+1])*s[2*o],s[2*o+1]=i),r--)}}(t,e),nt(i,c,t.bl_count)}function ct(t,e,n){var r,o,i=-1,a=e[1],u=0,s=7,c=4;for(0===a&&(s=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=e[2*(r+1)+1],++u<s&&o===a||(u<c?t.bl_tree[2*o]+=u:0!==o?(o!==i&&t.bl_tree[2*o]++,t.bl_tree[2*C]++):u<=10?t.bl_tree[2*N]++:t.bl_tree[2*P]++,u=0,i=o,0===a?(s=138,c=3):o===a?(s=6,c=3):(s=7,c=4))}function lt(t,e,n){var r,o,i=-1,a=e[1],u=0,s=7,c=4;for(0===a&&(s=138,c=3),r=0;r<=n;r++)if(o=a,a=e[2*(r+1)+1],!(++u<s&&o===a)){if(u<c)do{tt(t,o,t.bl_tree)}while(0!=--u);else 0!==o?(o!==i&&(tt(t,o,t.bl_tree),u--),tt(t,C,t.bl_tree),Z(t,u-3,2)):u<=10?(tt(t,N,t.bl_tree),Z(t,u-3,3)):(tt(t,P,t.bl_tree),Z(t,u-11,7));u=0,i=o,0===a?(s=138,c=3):o===a?(s=6,c=3):(s=7,c=4)}}w(X);var dt=!1;function ft(t,e,n,r){Z(t,(x<<1)+(r?1:0),3),function(t,e,n,r){ot(t),r&&(Q(t,n),Q(t,~n)),y.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}m._tr_init=function(t){dt||(!function(){var t,e,n,r,o,i=new Array(A+1);for(n=0,r=0;r<E-1;r++)for(G[r]=n,t=0;t<1<<R[r];t++)q[n++]=r;for(q[n-1]=r,o=0,r=0;r<16;r++)for(X[r]=o,t=0;t<1<<M[r];t++)F[o++]=r;for(o>>=7;r<S;r++)for(X[r]=o<<7,t=0;t<1<<M[r]-7;t++)F[256+o++]=r;for(e=0;e<=A;e++)i[e]=0;for(t=0;t<=143;)B[2*t+1]=8,t++,i[8]++;for(;t<=255;)B[2*t+1]=9,t++,i[9]++;for(;t<=279;)B[2*t+1]=7,t++,i[7]++;for(;t<=287;)B[2*t+1]=8,t++,i[8]++;for(nt(B,T+1,i),t=0;t<S;t++)H[2*t+1]=5,H[2*t]=et(t,5);W=new V(B,R,k+1,T,A),$=new V(H,M,0,S,A),J=new V(new Array(0),D,0,O,I)}(),dt=!0),t.l_desc=new Y(t.dyn_ltree,W),t.d_desc=new Y(t.dyn_dtree,$),t.bl_desc=new Y(t.bl_tree,J),t.bi_buf=0,t.bi_valid=0,rt(t)},m._tr_stored_block=ft,m._tr_flush_block=function(t,e,n,r){var o,i,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return _;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return b;for(e=32;e<k;e++)if(0!==t.dyn_ltree[2*e])return b;return _}(t)),st(t,t.l_desc),st(t,t.d_desc),a=function(t){var e;for(ct(t,t.dyn_ltree,t.l_desc.max_code),ct(t,t.dyn_dtree,t.d_desc.max_code),st(t,t.bl_desc),e=O-1;e>=3&&0===t.bl_tree[2*U[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,(i=t.static_len+3+7>>>3)<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==e?ft(t,e,n,r):4===t.strategy||i===o?(Z(t,2+(r?1:0),3),ut(t,B,H)):(Z(t,4+(r?1:0),3),function(t,e,n,r){var o;for(Z(t,e-257,5),Z(t,n-1,5),Z(t,r-4,4),o=0;o<r;o++)Z(t,t.bl_tree[2*U[o]+1],3);lt(t,t.dyn_ltree,e-1),lt(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),ut(t,t.dyn_ltree,t.dyn_dtree)),rt(t),r&&ot(t)},m._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(q[n]+k+1)]++,t.dyn_dtree[2*K(e)]++),t.last_lit===t.lit_bufsize-1},m._tr_align=function(t){Z(t,2,3),tt(t,z,B),function(t){16===t.bi_valid?(Q(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)};var ht=function(t,e,n,r){for(var o=65535&t|0,i=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{i=i+(o=o+e[r++]|0)|0}while(--a);o%=65521,i%=65521}return o|i<<16|0};var pt=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var vt,gt=function(t,e,n,r){var o=pt,i=r+n;t^=-1;for(var a=r;a<i;a++)t=t>>>8^o[255&(t^e[a])];return-1^t},mt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yt=g,_t=m,bt=ht,wt=gt,xt=mt,Et=0,kt=4,Tt=0,St=-2,Ot=-1,jt=4,At=2,Lt=8,It=9,zt=286,Ct=30,Nt=19,Pt=2*zt+1,Rt=15,Mt=3,Dt=258,Ut=Dt+Mt+1,Bt=42,Ht=103,Ft=113,qt=666,Gt=1,Wt=2,$t=3,Jt=4;function Xt(t,e){return t.msg=xt[e],e}function Vt(t){return(t<<1)-(t>4?9:0)}function Yt(t){for(var e=t.length;--e>=0;)t[e]=0}function Kt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(yt.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function Qt(t,e){_t._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Kt(t.strm)}function Zt(t,e){t.pending_buf[t.pending++]=e}function te(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function ee(t,e){var n,r,o=t.max_chain_length,i=t.strstart,a=t.prev_length,u=t.nice_match,s=t.strstart>t.w_size-Ut?t.strstart-(t.w_size-Ut):0,c=t.window,l=t.w_mask,d=t.prev,f=t.strstart+Dt,h=c[i+a-1],p=c[i+a];t.prev_length>=t.good_match&&(o>>=2),u>t.lookahead&&(u=t.lookahead);do{if(c[(n=e)+a]===p&&c[n+a-1]===h&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(r=Dt-(f-i),i=f-Dt,r>a){if(t.match_start=e,a=r,r>=u)break;h=c[i+a-1],p=c[i+a]}}}while((e=d[e&l])>s&&0!=--o);return a<=t.lookahead?a:t.lookahead}function ne(t){var e,n,r,o,i,a,u,s,c,l,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-Ut)){yt.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=d?r-d:0}while(--n);e=n=d;do{r=t.prev[--e],t.prev[e]=r>=d?r-d:0}while(--n);o+=d}if(0===t.strm.avail_in)break;if(a=t.strm,u=t.window,s=t.strstart+t.lookahead,c=o,l=void 0,(l=a.avail_in)>c&&(l=c),n=0===l?0:(a.avail_in-=l,yt.arraySet(u,a.input,a.next_in,l,s),1===a.state.wrap?a.adler=bt(a.adler,u,l,s):2===a.state.wrap&&(a.adler=wt(a.adler,u,l,s)),a.next_in+=l,a.total_in+=l,l),t.lookahead+=n,t.lookahead+t.insert>=Mt)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+Mt-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<Mt)););}while(t.lookahead<Ut&&0!==t.strm.avail_in)}function re(t,e){for(var n,r;;){if(t.lookahead<Ut){if(ne(t),t.lookahead<Ut&&e===Et)return Gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=Mt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Mt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Ut&&(t.match_length=ee(t,n)),t.match_length>=Mt)if(r=_t._tr_tally(t,t.strstart-t.match_start,t.match_length-Mt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Mt){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Mt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=_t._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Qt(t,!1),0===t.strm.avail_out))return Gt}return t.insert=t.strstart<Mt-1?t.strstart:Mt-1,e===kt?(Qt(t,!0),0===t.strm.avail_out?$t:Jt):t.last_lit&&(Qt(t,!1),0===t.strm.avail_out)?Gt:Wt}function oe(t,e){for(var n,r,o;;){if(t.lookahead<Ut){if(ne(t),t.lookahead<Ut&&e===Et)return Gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=Mt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Mt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Mt-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Ut&&(t.match_length=ee(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===Mt&&t.strstart-t.match_start>4096)&&(t.match_length=Mt-1)),t.prev_length>=Mt&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-Mt,r=_t._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Mt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Mt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=Mt-1,t.strstart++,r&&(Qt(t,!1),0===t.strm.avail_out))return Gt}else if(t.match_available){if((r=_t._tr_tally(t,0,t.window[t.strstart-1]))&&Qt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Gt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=_t._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Mt-1?t.strstart:Mt-1,e===kt?(Qt(t,!0),0===t.strm.avail_out?$t:Jt):t.last_lit&&(Qt(t,!1),0===t.strm.avail_out)?Gt:Wt}function ie(t,e,n,r,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=o}function ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new yt.Buf16(2*Pt),this.dyn_dtree=new yt.Buf16(2*(2*Ct+1)),this.bl_tree=new yt.Buf16(2*(2*Nt+1)),Yt(this.dyn_ltree),Yt(this.dyn_dtree),Yt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new yt.Buf16(Rt+1),this.heap=new yt.Buf16(2*zt+1),Yt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new yt.Buf16(2*zt+1),Yt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=At,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Bt:Ft,t.adler=2===e.wrap?0:1,e.last_flush=Et,_t._tr_init(e),Tt):Xt(t,St)}function se(t){var e=ue(t);return e===Tt&&function(t){t.window_size=2*t.w_size,Yt(t.head),t.max_lazy_match=vt[t.level].max_lazy,t.good_match=vt[t.level].good_length,t.nice_match=vt[t.level].nice_length,t.max_chain_length=vt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Mt-1,t.match_available=0,t.ins_h=0}(t.state),e}function ce(t,e,n,r,o,i){if(!t)return St;var a=1;if(e===Ot&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>It||n!==Lt||r<8||r>15||e<0||e>9||i<0||i>jt)return Xt(t,St);8===r&&(r=9);var u=new ae;return t.state=u,u.strm=t,u.wrap=a,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+Mt-1)/Mt),u.window=new yt.Buf8(2*u.w_size),u.head=new yt.Buf16(u.hash_size),u.prev=new yt.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new yt.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=i,u.method=n,se(t)}vt=[new ie(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ne(t),0===t.lookahead&&e===Et)return Gt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Qt(t,!1),0===t.strm.avail_out))return Gt;if(t.strstart-t.block_start>=t.w_size-Ut&&(Qt(t,!1),0===t.strm.avail_out))return Gt}return t.insert=0,e===kt?(Qt(t,!0),0===t.strm.avail_out?$t:Jt):(t.strstart>t.block_start&&(Qt(t,!1),t.strm.avail_out),Gt)})),new ie(4,4,8,4,re),new ie(4,5,16,8,re),new ie(4,6,32,32,re),new ie(4,4,16,16,oe),new ie(8,16,32,32,oe),new ie(8,16,128,128,oe),new ie(8,32,128,256,oe),new ie(32,128,258,1024,oe),new ie(32,258,258,4096,oe)],v.deflateInit=function(t,e){return ce(t,e,Lt,15,8,0)},v.deflateInit2=ce,v.deflateReset=se,v.deflateResetKeep=ue,v.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?St:(t.state.gzhead=e,Tt):St},v.deflate=function(t,e){var n,r,o,i;if(!t||!t.state||e>5||e<0)return t?Xt(t,St):St;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===qt&&e!==kt)return Xt(t,0===t.avail_out?-5:St);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===Bt)if(2===r.wrap)t.adler=0,Zt(r,31),Zt(r,139),Zt(r,8),r.gzhead?(Zt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Zt(r,255&r.gzhead.time),Zt(r,r.gzhead.time>>8&255),Zt(r,r.gzhead.time>>16&255),Zt(r,r.gzhead.time>>24&255),Zt(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Zt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Zt(r,255&r.gzhead.extra.length),Zt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=wt(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Zt(r,0),Zt(r,0),Zt(r,0),Zt(r,0),Zt(r,0),Zt(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Zt(r,3),r.status=Ft);else{var a=Lt+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=Ft,te(r,a),0!==r.strstart&&(te(r,t.adler>>>16),te(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(t.adler=wt(t.adler,r.pending_buf,r.pending-o,o)),Kt(t),o=r.pending,r.pending!==r.pending_buf_size));)Zt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(t.adler=wt(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=wt(t.adler,r.pending_buf,r.pending-o,o)),Kt(t),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Zt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(t.adler=wt(t.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=wt(t.adler,r.pending_buf,r.pending-o,o)),Kt(t),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Zt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(t.adler=wt(t.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.status=Ht)}else r.status=Ht;if(r.status===Ht&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Kt(t),r.pending+2<=r.pending_buf_size&&(Zt(r,255&t.adler),Zt(r,t.adler>>8&255),t.adler=0,r.status=Ft)):r.status=Ft),0!==r.pending){if(Kt(t),0===t.avail_out)return r.last_flush=-1,Tt}else if(0===t.avail_in&&Vt(e)<=Vt(n)&&e!==kt)return Xt(t,-5);if(r.status===qt&&0!==t.avail_in)return Xt(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==Et&&r.status!==qt){var u=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(ne(t),0===t.lookahead)){if(e===Et)return Gt;break}if(t.match_length=0,n=_t._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Qt(t,!1),0===t.strm.avail_out))return Gt}return t.insert=0,e===kt?(Qt(t,!0),0===t.strm.avail_out?$t:Jt):t.last_lit&&(Qt(t,!1),0===t.strm.avail_out)?Gt:Wt}(r,e):3===r.strategy?function(t,e){for(var n,r,o,i,a=t.window;;){if(t.lookahead<=Dt){if(ne(t),t.lookahead<=Dt&&e===Et)return Gt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=Mt&&t.strstart>0&&(r=a[o=t.strstart-1])===a[++o]&&r===a[++o]&&r===a[++o]){i=t.strstart+Dt;do{}while(r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&o<i);t.match_length=Dt-(i-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Mt?(n=_t._tr_tally(t,1,t.match_length-Mt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=_t._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Qt(t,!1),0===t.strm.avail_out))return Gt}return t.insert=0,e===kt?(Qt(t,!0),0===t.strm.avail_out?$t:Jt):t.last_lit&&(Qt(t,!1),0===t.strm.avail_out)?Gt:Wt}(r,e):vt[r.level].func(r,e);if(u!==$t&&u!==Jt||(r.status=qt),u===Gt||u===$t)return 0===t.avail_out&&(r.last_flush=-1),Tt;if(u===Wt&&(1===e?_t._tr_align(r):5!==e&&(_t._tr_stored_block(r,0,0,!1),3===e&&(Yt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Kt(t),0===t.avail_out))return r.last_flush=-1,Tt}return e!==kt?Tt:r.wrap<=0?1:(2===r.wrap?(Zt(r,255&t.adler),Zt(r,t.adler>>8&255),Zt(r,t.adler>>16&255),Zt(r,t.adler>>24&255),Zt(r,255&t.total_in),Zt(r,t.total_in>>8&255),Zt(r,t.total_in>>16&255),Zt(r,t.total_in>>24&255)):(te(r,t.adler>>>16),te(r,65535&t.adler)),Kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Tt:1)},v.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==Bt&&69!==e&&73!==e&&91!==e&&e!==Ht&&e!==Ft&&e!==qt?Xt(t,St):(t.state=null,e===Ft?Xt(t,-3):Tt):St},v.deflateSetDictionary=function(t,e){var n,r,o,i,a,u,s,c,l=e.length;if(!t||!t.state)return St;if(2===(i=(n=t.state).wrap)||1===i&&n.status!==Bt||n.lookahead)return St;for(1===i&&(t.adler=bt(t.adler,e,l,0)),n.wrap=0,l>=n.w_size&&(0===i&&(Yt(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new yt.Buf8(n.w_size),yt.arraySet(c,e,l-n.w_size,n.w_size,0),e=c,l=n.w_size),a=t.avail_in,u=t.next_in,s=t.input,t.avail_in=l,t.next_in=0,t.input=e,ne(n);n.lookahead>=Mt;){r=n.strstart,o=n.lookahead-(Mt-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+Mt-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=Mt-1,ne(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Mt-1,n.match_available=0,t.next_in=u,t.input=s,t.avail_in=a,n.wrap=i,Tt},v.deflateInfo="pako deflate (from Nodeca project)";var le={},de=g,fe=!0,he=!0;try{String.fromCharCode.apply(null,[0])}catch(t){fe=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){he=!1}for(var pe=new de.Buf8(256),ve=0;ve<256;ve++)pe[ve]=ve>=252?6:ve>=248?5:ve>=240?4:ve>=224?3:ve>=192?2:1;function ge(t,e){if(e<65534&&(t.subarray&&he||!t.subarray&&fe))return String.fromCharCode.apply(null,de.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}pe[254]=pe[254]=1,le.string2buf=function(t){var e,n,r,o,i,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new de.Buf8(u),i=0,o=0;i<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|63&n):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|63&n):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|63&n);return e},le.buf2binstring=function(t){return ge(t,t.length)},le.binstring2buf=function(t){for(var e=new de.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},le.buf2string=function(t,e){var n,r,o,i,a=e||t.length,u=new Array(2*a);for(r=0,n=0;n<a;)if((o=t[n++])<128)u[r++]=o;else if((i=pe[o])>4)u[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&n<a;)o=o<<6|63&t[n++],i--;i>1?u[r++]=65533:o<65536?u[r++]=o:(o-=65536,u[r++]=55296|o>>10&1023,u[r++]=56320|1023&o)}return ge(u,r)},le.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+pe[t[n]]>e?n:e};var me=v,ye=g,_e=le,be=mt,we=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},xe=Object.prototype.toString,Ee=0,ke=-1,Te=0,Se=8;function Oe(t){if(!(this instanceof Oe))return new Oe(t);this.options=ye.assign({level:ke,method:Se,chunkSize:16384,windowBits:15,memLevel:8,strategy:Te,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new we,this.strm.avail_out=0;var n=me.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Ee)throw new Error(be[n]);if(e.header&&me.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?_e.string2buf(e.dictionary):"[object ArrayBuffer]"===xe.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=me.deflateSetDictionary(this.strm,r))!==Ee)throw new Error(be[n]);this._dict_set=!0}}Oe.prototype.push=function(t,e){var n,r,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=_e.string2buf(t):"[object ArrayBuffer]"===xe.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new ye.Buf8(i),o.next_out=0,o.avail_out=i),1!==(n=me.deflate(o,r))&&n!==Ee)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(_e.buf2binstring(ye.shrinkBuf(o.output,o.next_out))):this.onData(ye.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===r?(n=me.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Ee):2!==r||(this.onEnd(Ee),o.avail_out=0,!0)},Oe.prototype.onData=function(t){this.chunks.push(t)},Oe.prototype.onEnd=function(t){t===Ee&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ye.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var je=function(t,e){return(e=e||{}).gzip=!0,function(t,e){var n=new Oe(e);if(n.push(t,!0),n.err)throw n.msg||be[n.err];return n.result}(t,e)},Ae=function(){},Le=function(t,e,n){return function(){var r=t.apply(void 0,arguments),o=n._activePlugin;o&&(o.has(e)||o.set(e,new Set),o.get(e).add(r))}},Ie=function(t){if("complete"===document.readyState)return t(),Ae;var e="load",n=function(){return window.removeEventListener(e,r)},r=function(){t(),n()};return window.addEventListener(e,r),n},ze=function(){return/(ipod|ipad|iphone|android|mobile)/.test(navigator.userAgent.toLowerCase())},Ce=function(){var t=navigator.userAgent;return null!=window.navigator.brave&&"isBrave"==window.navigator.brave.isBrave.name?t+" brave":t},Ne=function(){var t=window.crypto||window.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");var e=t&&t.getRandomValues?function(){return t.getRandomValues(new Uint8Array(1))[0]}:function(){return 16*Math.random()};return"10000000100040008000100000000000".replace(/[018]/g,(function(t){return(Number(t)^(15&e())>>Number(t)/4).toString(16)}))},Pe=function(t,e){void 0===e&&(e={});var n=t;"string"!=typeof t&&(n=p(t));var r=(new TextEncoder).encode(n),i=je(r,o({to:"string"},e));return btoa(i)},Re=function(){function t(){this.eventPool=new Map}var e=t.prototype;return e.on=function(t,e){var n=this,r=this.eventPool.get(t);if(void 0!==r)r.add(e);else{var o=new Set;this.eventPool.set(t,o),o.add(e)}return function(){return n.off(t,e)}},e.off=function(t,e){var n=this.eventPool.get(t);void 0!==n&&(void 0!==e?n.has(e)&&(n.delete(e),0===n.size&&this.eventPool.delete(t)):this.eventPool.delete(t))},t}(),Me=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.once=function(t,e){var n=this.on(t,(function(){e.apply(void 0,arguments),n()}));return n},n.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this.eventPool.get(t);void 0!==o&&o.forEach((function(t){return t.apply(void 0,n)}))},e}(Re),De=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.once=function(t,e){var n=this.on(t,(function(t){var r=e(t);return n(),r}));return n},n.emit=function(t,e){var n=this.eventPool.get(t);if(void 0!==n){for(var r,o=e,i=f(n);!(r=i()).done;){o=(0,r.value)(o)}return o}},e}(Me),Ue=function(t){return t.DEV="dev",t.SITNET="sitnet",t.TESTNET="testnet",t.MAINNET="mainnet",t}({}),Be="undefined"==typeof window,He=window.location.hostname,Fe=/^[^.]+\.[^.]+\.[^.]+$/.test(He)||/^[^.]+\.[^.]+\.[^.]+\.(hk|uae|us|uk|jp|fr|de|au|ca|br|in|ru)$/.test(He),qe=Fe&&/^[^.]*testnet[^.]*\./.test(He),Ge=Fe&&!qe?Ue.MAINNET:qe?Ue.TESTNET:Ue.SITNET;var We=function(){var t="bybit.com";try{var e=He,n=["cloud","announcements","sandbox","blog","newblog","learn"];if(He&&n.some((function(t){return He.includes(t)}))){var r=new RegExp("(?:(?:"+n.join("|")+")-testnet|testnet-(?:"+n.join("|")+"))","g"),o=new RegExp("^(?:"+n.join("|")+")(?=.)","g");e=He.replace(r,"testnet").replace(o,"www")}var i=e?e.split("."):[];3===i.length&&(t=i.slice(-2).join(".")),4===i.length&&(t=Fe?i.slice(-3).join("."):i.slice(-2).join(".")),5===i.length&&(t=i.slice(-3).join("."))}catch(t){}return t}(),$e=!!localStorage.getItem("monitor_debug"),Je=Be?{}:window,Xe="GLOBAL_MONITOR_NOTICE",Ve=Je[Xe]||(Je[Xe]=new Me),Ye=function(t){return t.MONITOR_READY="onMonitorReady",t}({}),Ke="LISTEN_MONITOR_READY";Je[Ke]||(Je[Ke]=function(t){null!=Je&&Je.Monitor?t():Ve.once(Ye.MONITOR_READY,t)});var Qe=function(t){return t.INIT="init",t.BEFORE_UPLOAD="beforeUpload",t.AFTER_UPLOAD="afterUpload",t.UNINSTALL="uninstall",t}({}),Ze={syncHook:new Me,syncWaterfall:new De},tn="@fe/monitor",en="1.0.30";function nn(t,e){return t===e||t!=t&&e!=e}function rn(t,e){for(var n=t.length;n--;)if(nn(t[n][0],e))return n;return-1}var on=Array.prototype.splice;function an(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}an.prototype.clear=function(){this.__data__=[],this.size=0},an.prototype.delete=function(t){var e=this.__data__,n=rn(e,t);return!(n<0)&&(n==e.length-1?e.pop():on.call(e,n,1),--this.size,!0)},an.prototype.get=function(t){var e=this.__data__,n=rn(e,t);return n<0?void 0:e[n][1]},an.prototype.has=function(t){return rn(this.__data__,t)>-1},an.prototype.set=function(t,e){var n=this.__data__,r=rn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var un="object"==typeof global&&global&&global.Object===Object&&global,sn="object"==typeof self&&self&&self.Object===Object&&self,cn=un||sn||Function("return this")(),ln=cn.Symbol,dn=Object.prototype,fn=dn.hasOwnProperty,hn=dn.toString,pn=ln?ln.toStringTag:void 0;var vn=Object.prototype.toString;var gn="[object Null]",mn="[object Undefined]",yn=ln?ln.toStringTag:void 0;function _n(t){return null==t?void 0===t?mn:gn:yn&&yn in Object(t)?function(t){var e=fn.call(t,pn),n=t[pn];try{t[pn]=void 0;var r=!0}catch(t){}var o=hn.call(t);return r&&(e?t[pn]=n:delete t[pn]),o}(t):function(t){return vn.call(t)}(t)}function bn(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var wn="[object AsyncFunction]",xn="[object Function]",En="[object GeneratorFunction]",kn="[object Proxy]";function Tn(t){if(!bn(t))return!1;var e=_n(t);return e==xn||e==En||e==wn||e==kn}var Sn,On=cn["__core-js_shared__"],jn=(Sn=/[^.]+$/.exec(On&&On.keys&&On.keys.IE_PROTO||""))?"Symbol(src)_1."+Sn:"";var An=Function.prototype.toString;var Ln=/^\[object .+?Constructor\]$/,In=Function.prototype,zn=Object.prototype,Cn=In.toString,Nn=zn.hasOwnProperty,Pn=RegExp("^"+Cn.call(Nn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rn(t){return!(!bn(t)||(e=t,jn&&jn in e))&&(Tn(t)?Pn:Ln).test(function(t){if(null!=t){try{return An.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function Mn(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Rn(n)?n:void 0}var Dn=Mn(cn,"Map"),Un=Mn(Object,"create");var Bn=Object.prototype.hasOwnProperty;var Hn=Object.prototype.hasOwnProperty;function Fn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Fn.prototype.clear=function(){this.__data__=Un?Un(null):{},this.size=0},Fn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Fn.prototype.get=function(t){var e=this.__data__;if(Un){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Bn.call(e,t)?e[t]:void 0},Fn.prototype.has=function(t){var e=this.__data__;return Un?void 0!==e[t]:Hn.call(e,t)},Fn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Un&&void 0===e?"__lodash_hash_undefined__":e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Fn,map:new(Dn||an),string:new Fn}},Gn.prototype.delete=function(t){var e=qn(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return qn(this,t).get(t)},Gn.prototype.has=function(t){return qn(this,t).has(t)},Gn.prototype.set=function(t,e){var n=qn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Wn(t){var e=this.__data__=new an(t);this.size=e.size}Wn.prototype.clear=function(){this.__data__=new an,this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Wn.prototype.get=function(t){return this.__data__.get(t)},Wn.prototype.has=function(t){return this.__data__.has(t)},Wn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!Dn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(t,e),this.size=n.size,this};var $n=function(){try{var t=Mn(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function Jn(t,e,n){"__proto__"==e&&$n?$n(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Xn(t,e,n){(void 0!==n&&!nn(t[e],n)||void 0===n&&!(e in t))&&Jn(t,e,n)}var Vn,Yn=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var u=i[Vn?a:++r];if(!1===e(o[u],u,o))break}return t},Kn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qn=Kn&&"object"==typeof module&&module&&!module.nodeType&&module,Zn=Qn&&Qn.exports===Kn?cn.Buffer:void 0,tr=Zn?Zn.allocUnsafe:void 0;var er=cn.Uint8Array;function nr(t,e){var n,r,o=e?(n=t.buffer,r=new n.constructor(n.byteLength),new er(r).set(new er(n)),r):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}var rr=Object.create,or=function(){function t(){}return function(e){if(!bn(e))return{};if(rr)return rr(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function ir(t,e){return function(n){return t(e(n))}}var ar=ir(Object.getPrototypeOf,Object),ur=Object.prototype;function sr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ur)}function cr(t){return null!=t&&"object"==typeof t}function lr(t){return cr(t)&&"[object Arguments]"==_n(t)}var dr=Object.prototype,fr=dr.hasOwnProperty,hr=dr.propertyIsEnumerable,pr=lr(function(){return arguments}())?lr:function(t){return cr(t)&&fr.call(t,"callee")&&!hr.call(t,"callee")},vr=Array.isArray,gr=9007199254740991;function mr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=gr}function yr(t){return null!=t&&mr(t.length)&&!Tn(t)}var _r="object"==typeof exports&&exports&&!exports.nodeType&&exports,br=_r&&"object"==typeof module&&module&&!module.nodeType&&module,wr=br&&br.exports===_r?cn.Buffer:void 0,xr=(wr?wr.isBuffer:void 0)||function(){return!1},Er="[object Object]",kr=Function.prototype,Tr=Object.prototype,Sr=kr.toString,Or=Tr.hasOwnProperty,jr=Sr.call(Object);var Ar={};Ar["[object Float32Array]"]=Ar["[object Float64Array]"]=Ar["[object Int8Array]"]=Ar["[object Int16Array]"]=Ar["[object Int32Array]"]=Ar["[object Uint8Array]"]=Ar["[object Uint8ClampedArray]"]=Ar["[object Uint16Array]"]=Ar["[object Uint32Array]"]=!0,Ar["[object Arguments]"]=Ar["[object Array]"]=Ar["[object ArrayBuffer]"]=Ar["[object Boolean]"]=Ar["[object DataView]"]=Ar["[object Date]"]=Ar["[object Error]"]=Ar["[object Function]"]=Ar["[object Map]"]=Ar["[object Number]"]=Ar["[object Object]"]=Ar["[object RegExp]"]=Ar["[object Set]"]=Ar["[object String]"]=Ar["[object WeakMap]"]=!1;var Lr,Ir="object"==typeof exports&&exports&&!exports.nodeType&&exports,zr=Ir&&"object"==typeof module&&module&&!module.nodeType&&module,Cr=zr&&zr.exports===Ir&&un.process,Nr=function(){try{var t=zr&&zr.require&&zr.require("util").types;return t||Cr&&Cr.binding&&Cr.binding("util")}catch(t){}}(),Pr=Nr&&Nr.isTypedArray,Rr=Pr?(Lr=Pr,function(t){return Lr(t)}):function(t){return cr(t)&&mr(t.length)&&!!Ar[_n(t)]};function Mr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Dr=Object.prototype.hasOwnProperty;function Ur(t,e,n){var r=t[e];Dr.call(t,e)&&nn(r,n)&&(void 0!==n||e in t)||Jn(t,e,n)}function Br(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Hr=9007199254740991,Fr=/^(?:0|[1-9]\d*)$/;function qr(t,e){var n=typeof t;return!!(e=null==e?Hr:e)&&("number"==n||"symbol"!=n&&Fr.test(t))&&t>-1&&t%1==0&&t<e}var Gr=Object.prototype.hasOwnProperty;function Wr(t,e){var n=vr(t),r=!n&&pr(t),o=!n&&!r&&xr(t),i=!n&&!r&&!o&&Rr(t),a=n||r||o||i,u=a?Br(t.length,String):[],s=u.length;for(var c in t)!e&&!Gr.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||qr(c,s))||u.push(c);return u}var $r=Object.prototype.hasOwnProperty;function Jr(t){if(!bn(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=sr(t),n=[];for(var r in t)("constructor"!=r||!e&&$r.call(t,r))&&n.push(r);return n}function Xr(t){return yr(t)?Wr(t,!0):Jr(t)}function Vr(t){return function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var u=e[i],s=r?r(n[u],t[u],u,n,t):void 0;void 0===s&&(s=t[u]),o?Jn(n,u,s):Ur(n,u,s)}return n}(t,Xr(t))}function Yr(t,e,n,r,o,i,a){var u=Mr(t,n),s=Mr(e,n),c=a.get(s);if(c)Xn(t,n,c);else{var l,d=i?i(u,s,n+"",t,e,a):void 0,f=void 0===d;if(f){var h=vr(s),p=!h&&xr(s),v=!h&&!p&&Rr(s);d=s,h||p||v?vr(u)?d=u:cr(l=u)&&yr(l)?d=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(u):p?(f=!1,d=function(t,e){if(e)return t.slice();var n=t.length,r=tr?tr(n):new t.constructor(n);return t.copy(r),r}(s,!0)):v?(f=!1,d=nr(s,!0)):d=[]:function(t){if(!cr(t)||_n(t)!=Er)return!1;var e=ar(t);if(null===e)return!0;var n=Or.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Sr.call(n)==jr}(s)||pr(s)?(d=u,pr(u)?d=Vr(u):bn(u)&&!Tn(u)||(d=function(t){return"function"!=typeof t.constructor||sr(t)?{}:or(ar(t))}(s))):f=!1}f&&(a.set(s,d),o(d,s,r,i,a),a.delete(s)),Xn(t,n,d)}}function Kr(t,e,n,r,o){t!==e&&Yn(e,(function(i,a){if(o||(o=new Wn),bn(i))Yr(t,e,a,n,Kr,r,o);else{var u=r?r(Mr(t,a),i,a+"",t,e,o):void 0;void 0===u&&(u=i),Xn(t,a,u)}}),Xr)}function Qr(t){return t}var Zr=Math.max;var to=$n?function(t,e){return $n(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Qr,eo=Date.now;var no=function(t){var e=0,n=0;return function(){var r=eo(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(to);function ro(t,e){return no(function(t,e,n){return e=Zr(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Zr(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=r[o];return u[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,u)}}(t,e,Qr),t+"")}function oo(t){return ro((function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(t,e,n){if(!bn(n))return!1;var r=typeof e;return!!("number"==r?yr(n)&&qr(e,n.length):"string"==r&&e in n)&&nn(n[e],t)}(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,i)}return e}))}var io=oo((function(t,e,n){Kr(t,e,n)})),ao=function(t){return new Promise((function(e,n){var r=io({method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"}},t),o=r.url,i=r.method,a=r.timeout,u=r.headers,s=r.data,c=r.params;if(void 0===o||""===o)throw new Error("request 参数的 url 为必传项");var l=new XMLHttpRequest,d="[object Object]"===Object.prototype.toString.call(c)?Object.keys(c).reduce((function(t,e){return t+(/\?$/.test(t)?"":"&")+e+"="+c[e]}),o+"?"):o;if(l.open(i.toUpperCase(),d),a&&"number"==typeof a&&(l.timeout=a),"[object Object]"===Object.prototype.toString.call(u))for(var f=0,h=Object.entries(u);f<h.length;f++){var v=h[f],g=v[0],m=v[1];l.setRequestHeader(g,m)}l.onreadystatechange=function(){l.readyState===XMLHttpRequest.DONE&&200===l.status&&e(l.responseText)},l.onabort=function(){l&&n(new Error("Ajax Cancel"))},l.onerror=function(){n(new Error("Network Error"))},l.ontimeout=function(){n(new Error("Ajax Timeout"))},l.send("GET"===i.toUpperCase()?null:"string"==typeof s?s:p(s))}))},uo="function"!=typeof navigator.sendBeacon?ao:function(t){return new Promise((function(e,n){var r=t.url,o=t.data;try{if(!navigator.sendBeacon(r,p(o)))return ao(t).catch((function(t){console.warn(t)}));e("success")}catch(t){console.error(t)}}))},so=function(t){return t.INIT="init",t.PENDING="pending",t.FAIL="fail",t}(so||{}),co={limit:30,interval:15e3,onloadUpload:!0,errorHit:3,gzip:!0},lo=function(t){return!1===t?{isOpen:!1,limit:0,interval:0,onloadUpload:!1}:o({isOpen:!0},co,"[object Object]"===Object.prototype.toString.call(t)?t:{})},fo=function(t,e){return e._requestUrl+(t?"&g=1":"")},ho=function(t,e,n){var r=lo(t.config.batchUpload),i=new Set,a=function(t){var e=[];return t.forEach((function(t){t.state!==so.INIT&&t.state!==so.FAIL||e.push(t)})),e},u=function(e){var n={url:fo(!!r.gzip,t),method:"POST",data:r.gzip?Pe(e):e};return ao(n).catch((function(t){console.warn(t)}))},s=function(e){var n=function(t){for(var e="function"==typeof String.prototype.codePointAt?"codePointAt":"charCodeAt",n=0,r=0,o=t.length;r<o;r++){var i=t[e](r);n+=i<=127?1:i<=2047?2:i<=65535?3:4}return n}(p(e)),o=Math.ceil(n/5e4);if(o<=0)return uo({url:fo(!!r.gzip,t),data:r.gzip?Pe(e):e});for(var i=[],a=Math.ceil(e.length/o),u=0;u<o;u++){var s=u*a,c=e.slice(s,s+a);i.push(uo({url:fo(!!r.gzip,t),data:r.gzip?Pe(c):c}))}return Promise.all(i).then((function(){return"success"}))},c=function(t,e){return void 0===e&&(e=u),t.length<=0?Promise.resolve():e(t.map((function(t){return t.state=so.PENDING,t.data}))).then((function(){t.forEach((function(t){return i.delete(t)}))})).catch((function(){t.forEach((function(t){t.errorHit+=1,t.state=so.FAIL,t.errorHit>=r.errorHit&&i.delete(t)}))})).finally((function(){t.length=0}))},l=null,d=function t(){l=setTimeout((function(){var e=a(i);c(e).finally(t)}),r.interval)},f=Ae,h=Ae,v=function(){var t,e;t=function(){var t=a(i);c(t,s)},e=function(){return t()},ze()?window.addEventListener("pagehide",e):window.addEventListener("beforeunload",e),h=function(){ze()?window.removeEventListener("pagehide",e):window.removeEventListener("beforeunload",e)}},g=function(){clearTimeout(l),f(),h()},m=function(){r.isOpen&&"number"==typeof r.interval&&r.interval>0&&d(),r.isOpen&&!0===r.onloadUpload&&(f=Ie((function(){var t=a(i);c(t)}))),r.isOpen&&v()};return m(),t.hooks.init((function(t){var e=lo(t.batchUpload);if(r.isOpen)if(g(),e.isOpen)r=e,m();else{var n=a(i);c(n)}else e.isOpen&&(r=e,m())})),function(t){if($e&&console.debug("[upload:batch]",t),!r.isOpen)return n(t);var u;i.add({state:so.INIT,errorHit:0,data:o({event_id:Ne(),timestamp:Date.now()/1e3},e(),t)}),"number"==typeof r.limit&&r.limit>0&&(u=a(i)).length>=r.limit&&c(u)}},po=oo((function(t,e,n,r){Kr(t,e,n,r)})),vo=function(t){return t.HASH="hash",t.HISTORY="history",t.NONE="none",t}(vo||{}),go=function(t,e,n){var r=new Map,o=function(t,n){void 0===n&&(n=e);var o=r.get(t);if(void 0!==o){var i=function(t){var e={};return t.forEach((function(t){return po(e,t,(function(t,e){if(Array.isArray(t)&&Array.isArray(e))return[].concat(t,e)}))})),e}(o);n(i),o.clear(),r.delete(t)}},i=function(t){void 0===t&&(t=e);for(var n,i=f(r.keys());!(n=i()).done;){var a=n.value;o(a,t)}};t.hooks.init((function(t){var e=t.roteMode,n=e!==vo.NONE&&e!==vo.HISTORY,r=e!==vo.NONE&&e!==vo.HASH;n&&window.addEventListener("hashchange",(function(){return i()})),r&&function(){function t(t){var e=history[t];return function(){var t=e.apply(this,arguments);return i(),t}}window.addEventListener("popstate",(function(){return i()})),history.pushState=t("pushState"),history.replaceState=t("replaceState")}()}));Ze.syncHook.once(Qe.INIT,(function(){var t,e;t=function(){i(n)},e=function(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||t()},window.addEventListener("pagehide",e),window.addEventListener("visibilitychange",e)}));return function(t,e){if($e&&console.debug("[upload:bucket]",t,e),r.has(t)){r.get(t).add(e)}else{var n=new Set;n.add(e),r.set(t,n);var i=t.toString().match(/Symbol\(.*_t([0-9.]+)(s|m|h)?\)/);null!==i&&function(t,e){var n=e[1],r=0;switch(e[2]){case"s":r=1e3*Number(n);break;case"m":r=60*Number(n)*1e3;break;case"h":r=60*Number(n)*60*1e3;break;default:r=Number(n)}setTimeout((function(){o(t)}),r)}(t,[].concat(i))}}},mo=function(t){if("string"!=typeof t._requestUrl||""===t._requestUrl)throw new Error("Moniter 初始化需传递接口上报地址：config.url");console.info("["+tn+"版本]: "+en);var e=function(){var e=t.config,n=e.env,r=e.release;return{platform:"javascript",environment:n,sdk:{name:tn,version:en},release:r||"1.0.0",request:{ua:Ce()}}},n=function(n){return $e&&console.debug("[upload]",n),ao({url:t._requestUrl,method:"POST",data:[o({event_id:Ne(),timestamp:Date.now()/1e3},e(),n)]}).catch((function(t){console.warn(t)}))},r=function(t,e,n){return"function"!=typeof navigator.sendBeacon?n:function(n){var r={url:t._requestUrl,data:[o({event_id:Ne(),timestamp:Date.now()/1e3},e(),n)]};return uo(r)}}(t,e,n);return{upload:n,batchUpload:ho(t,e,n),bucketUpload:go(t,n,r),beaconUpload:r}},yo="unHookList",_o="unExtendList";function bo(t){return t.url+"/api/"+t.appId+"/batch/"}function wo(t){return function(e){var n=Ze.syncWaterfall.emit(Qe.BEFORE_UPLOAD,e);t(n),Ze.syncHook.emit(Qe.AFTER_UPLOAD)}}var xo=function(){function t(t){var e;this.config={url:"https://monitor-frontend-collector.a.bybit-aws.com",appId:(null==t?void 0:t.appId)||"",env:Ge,debug:$e,traceWhiteList:["api2","/x-api/"],batchUpload:{gzip:!1}},this._requestUrl=bo(this.config),this.hooks={init:Le((function(t){return Ze.syncHook.once(Qe.INIT,t)}),yo,e=this),beforeUpload:Le((function(t){return Ze.syncWaterfall.on(Qe.BEFORE_UPLOAD,t)}),yo,e),afterUpload:Le((function(t){return Ze.syncHook.on(Qe.AFTER_UPLOAD,t)}),yo,e),uninstall:Le((function(t){return Ze.syncHook.once(Qe.UNINSTALL,t)}),yo,e)},this._pluginManager=new Map,this._activePlugin=null,this.initialized=!1;var n=mo(this),r=n.upload,o=n.batchUpload,i=n.bucketUpload,a=n.beaconUpload;this.report={upload:wo(o),uploadOnce:wo(r),beaconUpload:wo(a),bucketUpload:function(t,e){var n=Ze.syncWaterfall.emit(Qe.BEFORE_UPLOAD,e);i(t,n),Ze.syncHook.emit(Qe.AFTER_UPLOAD)}}}var e=t.prototype;return e.init=function(t){if(this.initialized)console.error("Moniter 已经初始化完毕，不能再次初始化");else{var e;this.config=o({},this.config,t),this._requestUrl=bo(this.config);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=Ze.syncHook).emit.apply(e,[Qe.INIT,o({},this.config)].concat(r)),this.initialized=!0}},e.extend=function(t,e){var n,r,o,i,a=this;if(Reflect.has(this.report,t))throw new Error("扩展名称不允许跟 Monitor.report 模块下的方法名称相同");if(Reflect.has(this,t)){if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("不允许覆盖已有内容");r=this[t],o=e,i=[],Object.keys(o).forEach((function(t){if(!Reflect.has(r,t)){var e=Reflect.get(o,t);Reflect.set(r,t,e),i.push(t)}})),n=function(){return i.forEach((function(t){return Reflect.deleteProperty(r,t)}))}}else Reflect.set(this,t,e),n=function(){return Reflect.deleteProperty(a,t)};return n},e._use=function(t,e){var n=this;if(void 0===e&&(e={}),"function"!=typeof t&&"[object Object]"!==Object.prototype.toString.call(t))throw new Error("plugin 期望类型是: Object | Function, 当前类型为: "+Object.prototype.toString.call(t));if(!t.name)throw new Error("函数类型的插件需设置函数名称，而当前插件为匿名插件");var r=this._pluginManager.get(t.name);if(!r||r.get("raw")!==t){if(r)throw new Error("当前插件名称 "+t.name+" 与已有插件名称冲突，请重新命名插件");var i={hooks:this.hooks,report:this.report,detect:this.detect,extend:Le((function(t,e){return n.extend(t,e)}),_o,this),getConfig:function(){return o({},n.config)}},a=new Map;this._pluginManager.set(t.name,a),a.set("raw",t),this._activePlugin=a,"function"==typeof t?t(i,e):"[object Object]"===Object.prototype.toString.call(t)&&t.install(i,e),this._activePlugin=null}},e.use=function(t,e){return void 0===e&&(e={}),this._use(t,e),this},e.useAsync=function(t,e){var n=this;return void 0===e&&(e={}),function(t){return import(t).then((function(t){return t.default}))}(t).then((function(t){return n._use(t,e)})),this},e.unUse=function(t){var e=this._pluginManager.get(t);return e&&(Ze.syncHook.emit(Qe.UNINSTALL),["unHookList","unExtendList"].forEach((function(t){var n=e.get(t);n&&(n.forEach((function(t){return t()})),n.clear(),e.delete(t))}))),this},t}();function Eo(t){return new Promise(((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)}))}let ko;function To(){return ko||(ko=function(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Eo(n);return(t,n)=>r.then((r=>n(r.transaction(e,t).objectStore(e))))}("keyval-store","keyval")),ko}function So(t,e=To()){return e("readonly",(e=>Eo(e.get(t))))}function Oo(t,e,n=To()){return n("readwrite",(n=>(n.put(e,t),Eo(n.transaction))))}var jo="monitor_remote_config",Ao=function(){var e=n(t().mark((function e(n){var r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=jo),t.prev=1,t.next=4,So(n);case 4:return r=t.sent,t.abrupt("return",r);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",null);case 11:case"end":return t.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Lo=function(){var e=n(t().mark((function e(n,r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=jo),t.prev=1,t.next=4,Oo(r,n);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),Io=function(){var e=n(t().mark((function e(){var n,r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ao("monitor_log");case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0={};case 6:return n=t.t0,r=Object.keys(n).reduce((function(t,e){return t.concat(n[e])}),[]),t.abrupt("return",r);case 11:return t.prev=11,t.t1=t.catch(0),console.log(t.t1),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),zo={name:"report-extend-plugin",install:function(e){var r=e.extend,i=function(e){var r=e.upload,i=e.uploadOnce,a=e.bucketUpload,u={type:"custom"},s=function(t){return function(e){var n=o({},u,{extra:o({},e)});t(n)}},c=s(r),l=s(i),d=function(){var e=n(t().mark((function e(n){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{i=JSON.stringify(n),r(o({},u,{extra:{type:"monitor-logs",logs:i}}))}catch(t){console.error("logsData stringify error",t)}case 1:case"end":return t.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=n(t().mark((function e(){var n,r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Io();case 2:for(n=t.sent,r=0;r<n.length;r+=100)d(n.slice(r,r+100));case 4:case"end":return t.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{log:c,logOnce:l,logBucket:function(t,e){var n=o({},u,{extra:o({},e)});a(t,n)},flush:f}}(e.report);r("report",{log:i.log,logOnce:i.logOnce,logBucket:i.logBucket,flush:i.flush})}},Co=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},No=function(t){var e=Co(t)?Object.prototype.toString.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e},Po=["extendConfig"],Ro=function(){function e(){this.CONFIG={operationSampling:{perOperationStrategies:[]},probabilisticSampling:{samplingRate:1},strategyType:0,moduleConfig:void 0,whiteListConfig:[],refresh:{toast:0,threshold:2e3,minThreshold:1e3},resource:{staticSizeThreshold:102400,apiSizeThreshold:102400,staticDurationThreshold:1e3,apiDurationThreshold:1e3},api:[],spider:[]}}var i,a,u,s=e.prototype;return s.getConfig=function(){var e=n(t().mark((function e(n){var r,i,a,u,s,c,d,f,h,p,v,g,m,y;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.url,i=void 0===r?"":r,a=n.appId,u=n.env,s=void 0===u?"mainnet":u,c={mainnet:i,testnet:i,sitnet:window.location.origin,dev:"http://monitor-frontend-collector-efficiency-sit.test.efficiency.ww5sawfyut0k.bitsvc.io"},d=c[s]||c.mainnet,t.prev=3,t.next=6,fetch(d+"/api/v1/client/trace/sampling?projectId="+a+"&env="+s).then((function(t){return t.json()}));case 6:if(0!==(f=t.sent).ret_code){t.next=15;break}return g=f.result||{},m=g.extendConfig,y=l(g,Po),this.config=o({},y,m),t.next=12,Lo(this.config);case 12:localStorage.setItem("isOpenFreshToast",(null==(h=this.config)||null==(h=h.refresh)?void 0:h.toast)+""||"0"),localStorage.setItem("freshThreshold",(null==(p=this.config)||null==(p=p.refresh)?void 0:p.threshold)+""||"2000"),localStorage.setItem("freshMinThreshold",(null==(v=this.config)||null==(v=v.refresh)?void 0:v.minThreshold)+""||"2000");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),console.error(t.t0);case 20:case"end":return t.stop()}}),e,this,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),s.init=function(){var e=n(t().mark((function e(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ao();case 3:(n=t.sent)&&(this.config=n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.isModuleEnabled=function(t){var e=this.CONFIG.moduleConfig;return null==e||null==(null==e?void 0:e[t])||!1!==(null==e?void 0:e[t])},s.isGlobalApi=function(t){var e=this.CONFIG.api||[],n=[];return e.forEach((function(t){return n.push.apply(n,t.config)})),n.some((function(e){return t.includes(e)}))},s.getWhiteList=function(t){var e=(this.CONFIG.whiteListConfig||[]).find((function(e){return e.name===t}));return Array.isArray(null==e?void 0:e.config)?null==e?void 0:e.config:[]},s.getResourceConfig=function(){return this.CONFIG.resource},i=e,(a=[{key:"config",get:function(){return this.CONFIG},set:function(t){this.CONFIG=t}}])&&r(i.prototype,a),u&&r(i,u),Object.defineProperty(i,"prototype",{writable:!1}),e}(),Mo=new Ro;function Do(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return e?unescape(e[2]):null}function Uo(t,e){var n=Number(t),r=Number(e);return isNaN(n)||isNaN(r)||0===r?-1:n/r}Mo.init();var Bo=["Geetest","geetest","chrome-extension","naver","adsrvr","adsct","facebook","twitter","Twitter","yandex","google","tiktok","contentstack","appsflyer","qbox","contentstack","affec.tv","ethers","ethereum","Ethereum","gstatic.com","stripe.com","scriptcdn.net","/akam","qq.com","vk.com","bidr.io","qbox.me","adx.io","apple.com","cdn-apple","ada.support","[web-sdk-error]",".mail.ru","cdn.builder.io","Google Sign","yango.","licdn.","theaudiencestreet","gtimg.com","adx.io","pstatic.net","cf-ipfs.","qcloud.","adnxs.","outbrain.","yads.tech","geevisit.","metrix.net","nftscan.","permutive.com","postimg.","telegram"],Ho=["Non-Error promise rejection","ResizeObserver","user no permission","onConsoleError","Network Error","Script err","Illegal invocation","Cannot set property go of"],Fo=["null","undefined","A client-side exception has occurred","Failed to execute","TypeError","SyntaxError","ChunkLoadError","Loading CSS chunk","client-side","Cannot read properties"],qo=["bot","spider","ether","headless","Headless","Bot","agent"],Go={public:["user no permission","login_fail","Cannot create property 'useCache' on string"],resource:["SCRIPT_ERROR","LINK_ERROR","IMG_ERROR"],network:["RequestError","ResponseError","Network Error","Failed to fetch","Ajax ","timeout","Timeout","网络错误","Network request failed","Request failed","ChunkLoadError","Loading","ret_code","retCode"],js:["TypeError","SyntaxError","onerror","UnhandledRejection","Script error","not defined","client-side exception","Failed to execute","insertBefore","removeChild","undefined is not","null is not","of undefined","of null","is undefined","Minified React"],custom:["onConsoleError"]},Wo=function(){function t(e){this.message=e,this.message=e||"",this.spider=t.isSpider()?1:0,this.vendor=t.isVendor(this.message)?1:0,this.notConcern=t.isNotConcern(this.message)?1:0,this.danger=t.isDanger(this.message)?1:0,this.subType=function(t){return Object.keys(Go).find((function(e){var n=Mo.getWhiteList(e);return[].concat(Go[e],n).some((function(e){return null==t?void 0:t.includes(e)}))}))||"js"}(this.message)}return t.prototype.getExtra=function(){return{vendor:this.vendor,not_concern:this.notConcern||this.spider,sub_type:this.subType,danger:this.danger}},t}();Wo.isVendor=function(t){var e,n=(null==(e=navigator)?void 0:e.userAgent)||"",r=Mo.getWhiteList("spider"),o=[].concat(qo,r).some((function(t){return n.toLowerCase().includes(t)})),i=Mo.getWhiteList("vendor"),a=[].concat(Bo,i).some((function(e){return null==t?void 0:t.includes(e)}));return o||a},Wo.isNotConcern=function(t){var e=Mo.getWhiteList("notConcern");return[].concat(Ho,e).some((function(e){return null==t?void 0:t.includes(e)}))},Wo.isDanger=function(t){var e=Mo.getWhiteList("danger");return[].concat(Fo,e).some((function(e){return null==t?void 0:t.includes(e)}))},Wo.isSpider=function(){var t,e,n=(null==(t=navigator)||null==(t=t.userAgent)?void 0:t.toLowerCase())||"",r=(null==(e=document)||null==(e=e.referrer)?void 0:e.toLowerCase())||"",o=Mo.getWhiteList("spider");return[].concat(qo,o).some((function(t){return(null==n?void 0:n.includes(t))||(null==r?void 0:r.includes(t))}))};var $o,Jo=["extra","user"],Xo="FRONTEND_MONITOR_SDK_SESSION_ID",Vo="FRONTEND_MONITOR_SDK_VISIT_ID",Yo="deviceId",Ko=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},Qo=function(){return""+Ko()+Ko()+"-"+Ko()+"-"+Ko()+"-"+Ko()+"-"+Ko()+Ko()+Ko()},Zo=Qo(),ti=function(){var t=Qo();sessionStorage.setItem(Vo,t),$e&&console.debug("[visit_id:change]",t)},ei=function(){return window.devicePixelRatio},ni=function(){if(!navigator.userAgentData)return"";try{return(navigator.userAgentData.platform||"")+" "+(navigator.userAgentData.brands||[]).map((function(t){return t.brand+","+t.version})).join(" ")}catch(t){return""}},ri={name:"DataLego",userSetData:{},opts:{},eventOpts:{},install:function(t){var e=this,n=t.hooks,r=t.extend;n.init((function(t,n){e.opts=t,e.eventOpts=o({v:0,p:0},n)}));var i=ei();n.beforeUpload((function(t){var n,r,a,u,s,c=navigator.connection,d=e.opts,f=d.getGuid,h=d.getUid,p=Object.keys(e.eventOpts).reduce((function(t,n){var r,i=e.eventOpts[n],a=No(i)?i():i;return o({},t,((r={})[n]=a,r))}),{}),v=sessionStorage.getItem(Xo);v||(v=Qo(),sessionStorage.setItem(Xo,v));var g=Do(Yo);g||(g=Qo(),function(t,e,n,r,o){var i=e;-1!==e.indexOf(";")&&(i=escape(e));var a=t+"="+i;if(n&&(a+="; domain="+n),r&&(a+="; path="+r),o>0){var u=new Date;u.setTime(u.getTime()+60*o*1e3),a+=";expires="+u.toUTCString()}document.cookie=a}(Yo,g,"."+We,"/",5256e3));var m=sessionStorage.getItem(Vo),y="0";try{var _=Do("sensorsdata2015jssdkcross");if(_){var b=JSON.parse(decodeURIComponent(_)).$device_id;y=void 0===b?"0":b}}catch(t){}var w=(null==h?void 0:h())||localStorage.getItem("BYBIT_GA_UID")||window.GA_UID||"",x=t.extra,E=t.user,k=l(t,Jo),T=window.navigator,S=T.hardwareConcurrency,O=void 0===S?0:S,j=T.deviceMemory,A=void 0===j?0:j,L=performance.memory||{},I=localStorage.getItem("BYBIT_LANG_KEY"),z=[].concat(qo,(null==Mo||null==(n=Mo.config)?void 0:n.spider)||[]).some((function(t){var e,n,r=(null==(e=document)||null==(e=e.referrer)||null==e.toLowerCase?void 0:e.toLowerCase())||"";return((null==(n=window.navigator)||null==(n=n.userAgent)||null==n.toLowerCase?void 0:n.toLowerCase())||"").includes(t)||r.includes(t)})),C=ei();return o({},k,{user:o({id:w,deviceId:g,sessionId:v,sensorsId:y},e.userSetData,E),extra:o({url:location.href,accessId:Zo,visitId:m,referrer:null==(r=document)?void 0:r.referrer,o:navigator.onLine,hidden:document.hidden,networkType:c?c.effectiveType:"",g:(null==f?void 0:f())||g,u:w,hc:O||0,mem:A||0,jhc:L.jsHeapSizeLimit,thc:L.totalJSHeapSize,uhc:L.usedJSHeapSize,net:c?c.rtt:-1,w:c?c.downlink>10?99:c.downlink:-1,dt:(new Date).toISOString(),cl:(null==(a=document.cookie)?void 0:a.length)||0,st:localStorage.getItem("simulatedTrading"),zoom:Uo(C,i),scale:(null==(u=window)||null==(u=u.visualViewport)?void 0:u.scale)||"",lang:I,spider:z,sdk:tn+"-"+en,timeOrigin:(null==(s=performance)?void 0:s.timeOrigin)||Date.now(),device:ni()},p,x)})})),r("setUser",(function(t){Object.keys(t).forEach((function(n){if(["deviceId","sessionId"].includes(n))console.warn("字段"+n+"为保留字段, 请更换字段名!");else{var r=t[n];e.userSetData[n]=No(r)?r():r}}))})),ti(),window.addEventListener("hashchange",(function(){ti()}))}},oi=function(t){return t.Empty="empty",t.Hidden="hidden",t.Changed="changed",t.Paint="paint",t}({}),ii=(($o={})[oi.Empty]="content",$o[oi.Hidden]="top",$o[oi.Changed]="immutable",$o[oi.Paint]="paint",$o),ai={},ui=function t(e,n){var r,o;if(void 0===e&&(e=document.body),void 0===n&&(n=oi.Empty),e){var i=ai[r=n]||(ai[r]=[]),a=function(t,e){var n;if(!t)return!1;var r=ii[e];return!!r&&null!=(null==(n=t.dataset)?void 0:n[r])}(e,n);if(a&&!i.includes(e)&&i.push(e),null!=(o=e)&&null!=(o=o.children)&&o.length)for(var u=0;u<e.children.length;u++)t(e.children[u],n)}},si=function(t,e,n){var r,o;return void 0===e&&(e=100),void 0===n&&(n=1e4),function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];var s=Date.now();s-(o=o||s)>n||(clearTimeout(r),r=setTimeout((function(){o=void 0,t.apply(void 0,a)}),e))}},ci=function(t){var e,n=t.tagName.toLowerCase(),r=getComputedStyle(t),o=""!==r.backgroundImage&&"none"!==r.backgroundImage||(null==r||null==(e=r.background)?void 0:e.includes("url(")),i="svg"===n,a="canvas"===n,u=("source"===n||"embed"===n||"img"===n)&&""!==t.src;return o||u||i||a},li=function t(e){var n;return!!ci(e)||0!==(null==e||null==(n=e.children)?void 0:n.length)&&Array.from(e.children).some((function(e){return t(e)}))},di=function t(e,n){return e===n||!(null==e||!e.parentElement)&&t(e.parentElement,n)},fi=function(t){var e={resources:performance.getEntriesByType("resource")||[],markMap:(performance.getEntriesByType("mark")||[]).reduce((function(t,e){return t[e.name]=e.startTime,t}),{})},n=e.resources,r=e.markMap,o=(t||[]).map((function(t){var e=function(t,e){var n,r=e.resources,o=e.markMap;if(ci(t)){var i,a=getComputedStyle(t),u=null==(i=(a.backgroundImage||a.background).match(/url\([\s]*['"]?([^'"]+)['"]?\)/i))?void 0:i[1],s=t.src||u;if(!s)return 0;var c=r.find((function(t){var e;return null==t||null==(e=t.name)||null==e.includes?void 0:e.includes(s)}));return(null==c?void 0:c.responseEnd)||0}return o[(null==(n=t.dataset)?void 0:n.mut)||t.getAttribute("data-mut")||""]||0}(t,{resources:n,markMap:r});return{node:t,value:e}})).filter((function(t){return t.value>0})).sort((function(t,e){return t.value>e.value?1:-1}));return $e&&console.debug("[paint:value]",t,o),null==o?void 0:o[0]},hi=function(t,e){var n=this;this.reportedList=[],this.report=function(t,e){var r=n.genKey(t);n.reportedList.includes(r)||(n.reportFn({extra:t,type:"custom"},e),n.reportedList.push(r))},this.reportInBatch=function(t,e){t.forEach((function(t){n.report(t,e)}))},this.reportFn=t,this.genKey=e||p};hi.getDomInfo=function(t){return t?{element:t.outerHTML,tagName:t.tagName.toLowerCase(),tagId:t.id,tagClass:t.className,domPath:_i(t)}:{}},hi.getDom2Info=function(t){return{element2:t.outerHTML,tagName2:t.tagName.toLowerCase(),tagId2:t.id,tagClass2:t.className,domPath2:_i(t)}};var pi,vi,gi,mi,yi,_i=function(t){for(var e=[];"HTML"!==t.nodeName;){var n,r=(null==(n=t)||null==(n=n.parentElement)?void 0:n.children)||[];if(!r||0===r.length)return"--";var o=Array.from(r).indexOf(t),i="BODY"===t.nodeName,a=void 0;try{a=t.className?t.className.split(" ").join("."):""}catch(t){console.error(t)}var u=t.id||"",s=(u?"#"+u:"")+(a?"."+a:"");e.push(i?""+t.nodeName.toLowerCase()+s:""+t.nodeName.toLowerCase()+s+"["+o+"]"),t=t.parentNode}return e.reverse().join(">")},bi=function(t){return""+t.domPath},wi=function(t){return t.currentValue+"-"+t.domPath},xi=function(t){return t.domPath+"-"+t.domPath2},Ei=function(t){return""+t.domPath},ki=-1,Ti=function(t){addEventListener("pageshow",(function(e){e.persisted&&(ki=e.timeStamp,t(e))}),!0)},Si=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Oi=function(){var t=Si();return t&&t.activationStart||0},ji=function(t,e){var n=Si(),r="navigate";return ki>=0?r="back-forward-cache":n&&(document.prerendering||Oi()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Ai=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch(t){}},Li=function(t,e,n,r){var o,i;return function(a){e.value>=0&&(a||r)&&((i=e.value-(o||0))||void 0===o)&&(o=e.value,e.delta=i,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,n),t(e))}},Ii=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},zi=function(t){var e=function(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||t(e)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},Ci=function(t){var e=!1;return function(n){e||(t(n),e=!0)}},Ni=-1,Pi=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ri=function(t){"hidden"===document.visibilityState&&Ni>-1&&(Ni="visibilitychange"===t.type?t.timeStamp:0,Di())},Mi=function(){addEventListener("visibilitychange",Ri,!0),addEventListener("prerenderingchange",Ri,!0)},Di=function(){removeEventListener("visibilitychange",Ri,!0),removeEventListener("prerenderingchange",Ri,!0)},Ui=function(){return Ni<0&&(Ni=Pi(),Mi(),Ti((function(){setTimeout((function(){Ni=Pi(),Mi()}),0)}))),{get firstHiddenTime(){return Ni}}},Bi=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Hi=[1800,3e3],Fi=function(t,e){e=e||{},Bi((function(){var n,r=Ui(),o=ji("FCP"),i=Ai("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(i.disconnect(),t.startTime<r.firstHiddenTime&&(o.value=Math.max(t.startTime-Oi(),0),o.entries.push(t),n(!0)))}))}));i&&(n=Li(t,o,Hi,e.reportAllChanges),Ti((function(r){o=ji("FCP"),n=Li(t,o,Hi,e.reportAllChanges),Ii((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},qi=[.1,.25],Gi={passive:!0,capture:!0},Wi=new Date,$i=function(t,e){pi||(pi=e,vi=t,gi=new Date,Vi(removeEventListener),Ji())},Ji=function(){if(vi>=0&&vi<gi-Wi){var t={entryType:"first-input",name:pi.type,target:pi.target,cancelable:pi.cancelable,startTime:pi.timeStamp,processingStart:pi.timeStamp+vi};mi.forEach((function(e){e(t)})),mi=[]}},Xi=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){$i(t,e),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,Gi),removeEventListener("pointercancel",r,Gi)};addEventListener("pointerup",n,Gi),addEventListener("pointercancel",r,Gi)}(e,t):$i(e,t)}},Vi=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,Xi,Gi)}))},Yi=[100,300],Ki=0,Qi=1/0,Zi=0,ta=function(t){t.forEach((function(t){t.interactionId&&(Qi=Math.min(Qi,t.interactionId),Zi=Math.max(Zi,t.interactionId),Ki=Zi?(Zi-Qi)/7+1:0)}))},ea=function(){return yi?Ki:performance.interactionCount||0},na=function(){"interactionCount"in performance||yi||(yi=Ai("event",ta,{type:"event",buffered:!0,durationThreshold:0}))},ra=[200,500],oa=0,ia=function(){return ea()-oa},aa=[],ua={},sa=function(t){var e=aa[aa.length-1],n=ua[t.interactionId];if(n||aa.length<10||t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};ua[r.id]=r,aa.push(r)}aa.sort((function(t,e){return e.latency-t.latency})),aa.splice(10).forEach((function(t){delete ua[t.id]}))}},ca=[2500,4e3],la={},da=function(t,e){e=e||{},Bi((function(){var n,r=Ui(),o=ji("LCP"),i=function(t){var e=t[t.length-1];e&&e.startTime<r.firstHiddenTime&&(o.value=Math.max(e.startTime-Oi(),0),o.entries=[e],n())},a=Ai("largest-contentful-paint",i);if(a){n=Li(t,o,ca,e.reportAllChanges);var u=Ci((function(){la[o.id]||(i(a.takeRecords()),a.disconnect(),la[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,u,!0)})),zi(u),Ti((function(r){o=ji("LCP"),n=Li(t,o,ca,e.reportAllChanges),Ii((function(){o.value=performance.now()-r.timeStamp,la[o.id]=!0,n(!0)}))}))}}))},fa=[800,1800],ha=function t(e){document.prerendering?Bi((function(){return t(e)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(e)}),!0):setTimeout(e,0)},pa=["entries"],va=[function(t,e){e=e||{},Fi(Ci((function(){var n,r=ji("CLS",0),o=0,i=[],a=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=i[0],n=i[i.length-1];o&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(o+=t.value,i.push(t)):(o=t.value,i=[t])}})),o>r.value&&(r.value=o,r.entries=i,n())},u=Ai("layout-shift",a);u&&(n=Li(t,r,qi,e.reportAllChanges),zi((function(){a(u.takeRecords()),n(!0)})),Ti((function(){o=0,r=ji("CLS",0),n=Li(t,r,qi,e.reportAllChanges),Ii((function(){return n()}))})),setTimeout(n,0))})))},Fi,function(t,e){e=e||{},Bi((function(){var n,r=Ui(),o=ji("FID"),i=function(t){t.startTime<r.firstHiddenTime&&(o.value=t.processingStart-t.startTime,o.entries.push(t),n(!0))},a=function(t){t.forEach(i)},u=Ai("first-input",a);n=Li(t,o,Yi,e.reportAllChanges),u&&zi(Ci((function(){a(u.takeRecords()),u.disconnect()}))),u&&Ti((function(){var r;o=ji("FID"),n=Li(t,o,Yi,e.reportAllChanges),mi=[],vi=-1,pi=null,Vi(addEventListener),r=i,mi.push(r),Ji()}))}))},da,function(t,e){e=e||{},Bi((function(){na();var n,r=ji("INP"),o=function(t){t.forEach((function(t){t.interactionId&&sa(t),"first-input"===t.entryType&&!aa.some((function(e){return e.entries.some((function(e){return t.duration===e.duration&&t.startTime===e.startTime}))}))&&sa(t)}));var e,o=(e=Math.min(aa.length-1,Math.floor(ia()/50)),aa[e]);o&&o.latency!==r.value&&(r.value=o.latency,r.entries=o.entries,n())},i=Ai("event",o,{durationThreshold:e.durationThreshold||40});n=Li(t,r,ra,e.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),zi((function(){o(i.takeRecords()),r.value<0&&ia()>0&&(r.value=0,r.entries=[]),n(!0)})),Ti((function(){aa=[],oa=ea(),r=ji("INP"),n=Li(t,r,ra,e.reportAllChanges)})))}))},function(t,e){e=e||{};var n=ji("TTFB"),r=Li(t,n,fa,e.reportAllChanges);ha((function(){var o=Si();if(o){var i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-Oi(),0),n.entries=[o],r(!0),Ti((function(){n=ji("TTFB",0),(r=Li(t,n,fa,e.reportAllChanges))(!0)}))}}))}],ga={type:"performance"},ma=function(t){return void 0===t&&(t={}),o({},ga,t)},ya=function(){if(localStorage){var t=0;for(var e in localStorage){if(localStorage.hasOwnProperty(e))t+=2*(localStorage[e].length+e.length)}return t}},_a=function(t,e){va.forEach((function(n){return function(t,e,n){t((function(t){var r,o,i,a,u,s=t.name.toLowerCase();$e&&console.debug("[web-vital]",s,t),null!=n&&n[s]&&(null==n||null==(u=n[s])||u.call(n,t,e)),e(ma({extra:{domPath:null!=(r=t.entries)&&null!=(r=r[0])&&r.element?_i(null==(o=t.entries)||null==(o=o[0])?void 0:o.element):"",paints:(i={},i[s]=t.value,i),rating:(a={},a[s]=t.rating,a)}}))}))}(n,t,e)}))},ba=function(t){Ie((function(){setTimeout((function(){var e;if(window.performance){!function(t){var e;null!=(e=window)&&null!=(e=e.performance)&&e.memory&&window.setTimeout((function(){t(ma({extra:{memory:performance.memory.usedJSHeapSize}}))}),3e3)}(t);var n={};((null==(e=performance)?void 0:e.getEntriesByType("paint"))||[]).forEach((function(t){"first-paint"===t.name&&(n.fp=t.startTime)}));var r=performance.getEntriesByType("navigation");if(r&&Array.isArray(r)&&!(r.length<1)){var o=r[0],i=o.domainLookupStart,a=o.domainLookupEnd,u=o.connectStart,s=o.connectEnd,c=o.requestStart,l=o.responseStart,d=o.responseEnd,f=o.fetchStart,h=o.workerStart,p=o.transferSize,v=o.encodedBodySize,g=o.redirectEnd,m=o.redirectStart,y=o.secureConnectionStart,_=o.domInteractive;o.domComplete;var b=o.loadEventStart,w=o.domContentLoadedEventStart,x=o.domContentLoadedEventEnd,E=o.loadEventEnd,k={appCache:i-f,ttfbNew:l-c,redirect:g-m,dns:a-i,tcp:s-u,ssl:y?s-y:0,download:d-l,serviceWorkerTime:h>0?d-h:0,headerSize:Math.abs(p-v)||0,white:d-f,tti:_-f,dom:_-d,domParsed:w-_,dcl:x-w,domready:x-f,loaded:b-f,resources:b-x,onLoad:E-b};t(ma({extra:{normal:k,paints:n,localStorage:ya()}}))}}}),0)}))},wa=function(t){var e,n;if("string"!=typeof(null==t?void 0:t.release)||0===(null==t||null==(e=t.release)?void 0:e.length))return-1;var r,i=(null==t?void 0:t.appId)||"-1",a="b_m_r",u={};try{u=JSON.parse(localStorage.getItem(a)||"{}")}catch(t){}return(null==(n=u)?void 0:n[i])!==(null==t?void 0:t.release)?(localStorage.setItem(a,p(o({},u,((r={})[i]=null==t?void 0:t.release,r)))),1):0},xa=Symbol("performance_t1m"),Ea={name:"performance-plugin",install:function(t){var e=t.report,n=e.upload,r=e.bucketUpload,i=t.hooks,a=t.getConfig;i.init((function(t){var e=function(e){if(Mo.isModuleEnabled("performance")&&!a().name){var n=wa(t);r(xa,o({},e,{extra:o({},(null==e?void 0:e.extra)||{},{firstVisit:n})}))}};_a(e),function(t,e){var n=1;da((function(r){var i,a,u,s=r.entries,c=l(r,pa),d=s.slice(-1)[0],f=null!=d&&d.element?{tagId:null==(i=d.element)?void 0:i.id,tagName:null==(a=d.element)?void 0:a.tagName,className:null==(u=d.element)?void 0:u.className}:{element:null},h={type:"trace_lcp",detail:o({seq:n},c,{startTime:null==d?void 0:d.startTime,duration:null==d?void 0:d.duration,size:null==d?void 0:d.size,renderTime:null==d?void 0:d.renderTime,loadTime:null==d?void 0:d.loadTime,firstAnimatedFrameTime:null==d?void 0:d.firstAnimatedFrameTime,url:null==d?void 0:d.url},f)};null==e||e(n),$e&&console.debug("[onLCP]",n,d,h),t(h),n+=1}),{reportAllChanges:!0})}((function(t){Mo.isModuleEnabled("performance")&&n(t)}),(function(){var t;null==(t=window.Monitor)||null==(t=t.detect)||null==(t=t.paint)||null==t.collect||t.collect()})),ba(e)}))}},ka=function(t){if(!t)return 0;try{var e=(new TextEncoder).encode(t||"");return(null==e?void 0:e.byteLength)||0}catch(t){return console.log(t),0}},Ta=Math.floor,Sa=Math.random;function Oa(t){var e,n,r=t.length;return r?t[(e=0,n=r-1,e+Ta(Sa()*(n-e+1)))]:void 0}function ja(t,e){return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(e,(function(e){return t[e]}))}var Aa=ir(Object.keys,Object),La=Object.prototype.hasOwnProperty;function Ia(t){return yr(t)?Wr(t):function(t){if(!sr(t))return Aa(t);var e=[];for(var n in Object(t))La.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}function za(t){return Oa(null==(e=t)?[]:ja(e,Ia(e)));var e}var Ca=/\s/;var Na=/^\s+/;function Pa(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Ca.test(t.charAt(e)););return e}(t)+1).replace(Na,""):t}var Ra="[object Symbol]";var Ma=NaN,Da=/^[-+]0x[0-9a-f]+$/i,Ua=/^0b[01]+$/i,Ba=/^0o[0-7]+$/i,Ha=parseInt;function Fa(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||cr(t)&&_n(t)==Ra}(t))return Ma;if(bn(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=bn(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Pa(t);var n=Ua.test(t);return n||Ba.test(t)?Ha(t.slice(2),n?2:8):Da.test(t)?Ma:+t}var qa=1/0,Ga=17976931348623157e292;function Wa(t){var e=function(t){return t?(t=Fa(t))===qa||t===-qa?(t<0?-1:1)*Ga:t==t?t:0:0===t?t:0}(t),n=e%1;return e==e?n?e-n:e:0}var $a=4294967295,Ja=Math.min;function Xa(t,e){if((t=Wa(t))<1||t>9007199254740991)return[];var n,r=$a,o=Ja(t,$a);t-=$a;for(var i=Br(o,e="function"==typeof(n=e)?n:Qr);++r<t;)e(r);return i}var Va="0123456789abcdef".split(""),Ya=function(){return(vr(t=Va)?Oa:za)(t);var t},Ka=function(t){return Xa(t,Ya).join("")},Qa=new RegExp("^(https?:\\/\\/)?api2(-\\d+)?(-\\w+)?."+We);function Za(t){var e="00-"+Ka(32)+"-"+Ka(16)+"-01";try{e=function(t){var e,n,r,o=Mo.config,i="01",a=((null==o||null==(e=o.operationSampling)?void 0:e.perOperationStrategies)||[]).find((function(e){return t.includes(e.operation)}));return i=a?(null==a||null==(n=a.probabilisticSampling)?void 0:n.samplingRate)>=Math.random()?"01":"00":(null==o||null==(r=o.probabilisticSampling)?void 0:r.samplingRate)>=Math.random()?"01":"00","00-"+Ka(32)+"-"+Ka(16)+"-"+i}(t)}catch(t){}return e}function tu(t){var e,n,r;try{var o=t.split("-");e=o[2],n=o[1],r=o[3]||"01"}catch(t){}return{spanId:e,traceId:n,flag:r}}function eu(t){var e,n,r,o,i=(null==t?void 0:t.message)||"";try{var a=JSON.parse(i)||{};return{status:-1,statusText:null==a?void 0:a.status,code:(null==a?void 0:a.code)||(null==a?void 0:a.retCode)||(null==a?void 0:a.ret_code),path:null==a?void 0:a.path,msg:null==a?void 0:a.msg,message:i}}catch(t){}try{var u=i.split("$");e=u[0],n=u[1],r=u[2]||"",o=u[3]||""}catch(t){}return{status:-1,statusText:e,code:n,path:r,msg:o,message:i}}function nu(t,e,n){void 0===t&&(t="");var r=Array.isArray(n.traceWhiteList)?n.traceWhiteList:[],o=Array.isArray(n.blackList)?n.blackList:[],i=["sc-datasink","tms.","/translations/","onfido.com"].concat(o);return!r.find((function(e){return e instanceof RegExp?Boolean(e.test(t)):Boolean(t.includes(e))}))&&!Qa.test(t)||i.find((function(e){return e instanceof RegExp?Boolean(e.test(t)):Boolean(t.includes(e))}))?(Array.isArray(r)||console.info("traceWhiteList 如果未传入不会给接口添加 Trace Header 头"),{}):{traceparent:e}}function ru(t){var e=(null==t?void 0:t.split("?")[0])||"";return e.includes("//")?/^https?/.test(e)||(e=""+location.protocol+e):e=""+location.origin+e,e}function ou(t){return Object.entries({ttfbNew:t.responseStart-t.requestStart,redirect:t.redirectEnd-t.redirectStart,dns:t.domainLookupEnd-t.domainLookupStart,tcp:t.connectEnd-t.connectStart,ssl:t.secureConnectionStart?t.connectEnd-t.secureConnectionStart:0,download:t.responseEnd-t.responseStart,serviceWorkerTime:t.workerStart>0?t.responseEnd-t.workerStart:0,headerSize:Math.abs(t.transferSize-t.encodedBodySize)||0,white:t.responseEnd-t.fetchStart}).reduce((function(t,e){var n;return(null==e?void 0:e[1])>0?o({},t,((n={})[null==e?void 0:e[0]]=Math.floor(e[1]),n)):t}),{})}function iu(t){var e={pathname:"",search:""};try{t=/^\/\//.test(t)?"http:"+t:t,e=new URL(t)}catch(r){var n=t.split("?");e={pathname:n[0]||"",search:n[1]||""}}return e}var au=function(t,e){return void 0===e&&(e=[]),e.some((function(e){return e instanceof RegExp?e.test(t):t.includes(e)}))},uu=function(t){void 0===t&&(t={});var e={};return["userToken","UserToken","user_token","Usertoken","usertoken"].forEach((function(n){var r;null!=(r=t)&&r[n]&&(e[n]="****")})),o({},t,e)},su=Symbol("resource_t1m"),cu=function(t){return void 0===t&&(t={}),o({type:"resource"},t)},lu=null,du=function(t,e){var n,r,o,i;if(lu=t.bind(undefined),window.performance&&!e){var a=(null==Mo||null==(n=Mo.config)||null==(n=n.resource)?void 0:n.staticSizeThreshold)||102400,u=(null==Mo||null==(r=Mo.config)||null==(r=r.resource)?void 0:r.apiSizeThreshold)||102400,s=(null==Mo||null==(o=Mo.config)||null==(o=o.resource)?void 0:o.apiDurationThreshold)||1e3,c=(null==Mo||null==(i=Mo.config)||null==(i=i.resource)?void 0:i.staticDurationThreshold)||1e3,l=function(t){var e,n,r=(null==(e=t.name)?void 0:e.includes("api2"))||(null==(n=t.name)?void 0:n.includes("/x-api/"))?s:c;return t.duration>r?1:0},d=function(t){var e,n,r=(null==(e=t.name)?void 0:e.includes("api2"))||(null==(n=t.name)?void 0:n.includes("/x-api/"))?u:a;return t.transferSize>r?1:0};window.addEventListener("load",(function(){var e=Date.now(),n=performance.getEntriesByType("resource")||[],r=n.filter((function(t){return"img"!==t.initiatorType&&"fetch"!==(null==t?void 0:t.initiatorType)&&"xmlhttprequest"!==(null==t?void 0:t.initiatorType)})).map((function(t){return{url:ru(t.name),rawUrl:t.name,duration:t.duration,normal:ou(t),initiatorType:t.initiatorType,transferSize:t.transferSize,bulk:d(t),slow:l(t),type:"success",pendingTime:t.fetchStart,startDate:e,search:iu(t.name).search,methods:"GET"}}));null==t||t(su,cu({extra:{resource:r}})),$e&&console.debug("[resource]",n,r)})),new PerformanceObserver((function(e){var n=Date.now(),r=((null==e?void 0:e.getEntries())||[]).filter((function(t){return"img"===(null==t?void 0:t.initiatorType)||"fetch"===(null==t?void 0:t.initiatorType)||"xmlhttprequest"===(null==t?void 0:t.initiatorType)})).map((function(t){return{url:ru(t.name),rawUrl:t.name,duration:t.duration,normal:ou(t),initiatorType:t.initiatorType,transferSize:t.transferSize,bulk:d(t),slow:l(t),type:"success",startDate:n,pendingTime:t.fetchStart,search:iu(t.name).search,startTime:t.fetchStart,methods:"GET"}}));(null==r?void 0:r.length)>0&&(null==t||t(su,cu({extra:{resource:r}})),$e&&console.debug("[resource]",r))})).observe({entryTypes:["resource"]})}},fu=function(t){return t[t.AJAX=0]="AJAX",t[t.FETCH=1]="FETCH",t}({});function hu(t){return pu.apply(this,arguments)}function pu(){return(pu=n(t().mark((function e(n){var r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,null==n?void 0:n.json();case 3:return r=t.sent,t.abrupt("return",r);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{});case 10:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function vu(t){return gu.apply(this,arguments)}function gu(){return(gu=n(t().mark((function e(n){var r,o,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},n.type!==fu.AJAX){t.next=5;break}try{r=JSON.parse(null==n?void 0:n.xhrResponse.response)}catch(t){r={}}t.next=10;break;case 5:if(n.type!==fu.FETCH){t.next=10;break}return i=null==(o=n.fetchResponse)?void 0:o.res,t.next=9,hu(null==i?void 0:i.clone());case 9:r=t.sent;case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function mu(t){if(t.type===fu.AJAX){var e=t.xhrResponse;return{status:e.status,statusText:e.statusText,headers:e.config.headers,method:e.config.method,body:e.config.body}}if(t.type===fu.FETCH){var n=t.fetchResponse,r=n.input instanceof Request?n.input.method:n.init.method;return{status:n.res.status,statusText:n.res.statusText,headers:n.init.headers,method:r||"GET",body:n.init.body}}return{}}function yu(t,e,n,r,o){var i,a=(null==o||null==(i=o.fetchResponse)?void 0:i.res)||{},u=(null==a?void 0:a.ret_code)||(null==a?void 0:a.retCode)||0,s=t.find((function(t){return t instanceof RegExp?Boolean(t.test(r)):Boolean(r.includes(t))}));return Boolean(s)||("function"==typeof e.onResponse?u=e.onResponse(n,r,o):Co(n)&&Reflect.has(n,"ret_code")?u=Number(n.ret_code):Co(n)&&Reflect.has(n,"retCode")&&(u=Number(n.retCode))),u}var _u=function(){var e=n(t().mark((function e(n,r,o){var i,a,u,s,c,l,d,f,h,v,g,m,y,_,b,w,x,E,k,T,S,O;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=tu(o.traceparent),s=u.spanId,c=u.traceId,l=u.flag,d=(null==Mo||null==(i=Mo.config)||null==(i=i.resource)?void 0:i.apiSizeThreshold)||102400,f=(null==Mo||null==(a=Mo.config)||null==(a=a.resource)?void 0:a.apiDurationThreshold)||1e3,t.next=5,vu(o);case 5:h=t.sent,v=iu(o.url),m=yu(g=["/api/v1/client/trace/sampling",/\/api\/([0-9])*?\/batch\//],r,h,v.pathname,o),y=mu(o),_=o.endTime-o.startTime,b={},w={},x=0;try{j=ka(y.body),A=ka(p(h)),x=j>=A?j:A,0!==m&&(b="","[object Object]"===Object.prototype.toString.call(h)&&Object.keys(h).forEach((function(t){var e,n=h[t];(null==(e=p(n))?void 0:e.length)<100&&(w[t]=n)})))}catch(t){}$e&&console.debug("[api:response]",y,h,x),(E=null==y?void 0:y.status)<200||E>=300||0!==m?(k={type:"custom",contexts:{trace:{operation_name:v.pathname,span_id:s,tags:{},duration:_,trace_id:c}},extra:{m:y.statusText,r:v.pathname,t:"REQUEST_ERROR",h:null==v?void 0:v.host,d:_,ext:{traceparent:null==o?void 0:o.traceparent,t:"successHooks",retCode:m,retMsg:h.ret_msg||h.retMsg,resData:w,body:b,method:y.method||"GET",headers:uu(y.headers),status:E,url:o.url,path:v.pathname,search:v.search,transferSize:x,bulk:x>=d?1:0,slow:_>=f?1:0,server:o.server}}},n(k)):(T=g.find((function(t){return t instanceof RegExp?Boolean(t.test(v.pathname)):Boolean(v.pathname.includes(t))})),Boolean(T)||(O=ru(null==o?void 0:o.url),e={extra:{resource:[{url:O,rawUrl:o.url,duration:_,initiatorType:"request",span_id:s,trace_id:c,flag:l,transferSize:x,bulk:x>=d?1:0,slow:_>=f?1:0,type:"success",startDate:o.startTime,pendingTime:null==(S=performance)||null==S.now?void 0:S.now(),methods:y.method||"GET",search:v.search,server:o.server}]}},null==lu||lu(su,cu(e))));case 18:case"end":return t.stop()}var e,j,A}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),bu=function(t,e){var n,r,i,a=tu(e.traceparent),u=a.spanId,s=a.traceId,c=(null==Mo||null==(n=Mo.config)||null==(n=n.resource)?void 0:n.apiSizeThreshold)||102400,l=(null==Mo||null==(r=Mo.config)||null==(r=r.resource)?void 0:r.apiDurationThreshold)||1e3,d=function(t){if(t.type===fu.AJAX){var e=t.xhrError;return{status:(null==t?void 0:t.status)||-1,statusText:(null==t?void 0:t.statusText)||"",message:(null==t?void 0:t.message)||"",headers:e.config.headers,method:e.config.method,body:e.config.body,stack:""}}if(t.type===fu.FETCH){var n,r,o=t.fetchError,i=o.input instanceof Request?o.input.method:o.init.method;return{status:(null==t?void 0:t.status)||-1,statusText:(null==t?void 0:t.statusText)||"",message:(null==t?void 0:t.message)||(null==(n=o.err)?void 0:n.message),headers:o.init.headers,method:i||"GET",body:o.init.body,stack:null==(r=o.err)?void 0:r.stack}}return{}}(e),f=iu(e.url),h={},p=0;try{p=ka(d.body),h=""}catch(t){}$e&&console.debug("[api:response]",d,p);var v=ru(null==e?void 0:e.url),g=e.endTime-e.startTime;t({type:"custom",contexts:{trace:{operation_name:e.url,span_id:u,tags:{},duration:g,trace_id:s}},extra:{m:d.message,r:f.pathname,status:d.status||-1,t:"REQUEST_ERROR",h:null==f?void 0:f.host,d:g,ext:o({},e,{status:d.status||-1,statusText:d.statusText,t:"errorHooks",stack:null==d?void 0:d.stack,m:d.message,body:h,method:d.method||"GET",headers:uu(d.headers),retCode:e.code,url:v,path:f.pathname,search:f.search,transferSize:p,bulk:p>=c?1:0,slow:g>=l?1:0,pendingTime:null==(i=performance)||null==i.now?void 0:i.now()})}})},wu=["load","loadend","timeout","error","readystatechange","abort"],xu="__origin_xhr";function Eu(t,e){var n={};for(var r in t)n[r]=t[r];return n.target=n.currentTarget=e,n}var ku=wu[0],Tu=wu[1],Su=wu[2],Ou=wu[3],ju=wu[4],Au=wu[5],Lu="prototype";function Iu(t,e){return function(t,e){var n=t.onRequest,r=t.onResponse,o=t.onError;function i(t){var e=t.responseType;if(!e||"text"===e)return t.responseText;var n=t.response;if("json"===e&&!n)try{return JSON.parse(t.responseText)}catch(t){console.warn(t)}return n}function a(t,e){var n=new Mu(t),o={response:i(e),status:e.status,statusText:e.statusText,config:t.config,headers:t.resHeader||t.getAllResponseHeaders().split("\r\n").reduce((function(t,e){if(""===e)return t;var n=e.split(":");return t[n.shift()]=function(t){return t.replace(/^\s+|\s+$/g,"")}(n.join(":")),t}),{})};if(!r)return n.resolve(o);r(o,n)}function u(t,e,n,r){var i=new Du(t);n={config:t.config,error:n,type:r},o?o(n,i):i.next(n)}function s(){return!0}function c(t){return function(e,n){return u(e,this,n,t),!0}}function l(t,e){return 4===t.readyState&&0!==t.status?a(t,e):4!==t.readyState&&Cu(t,ju),!0}var d=function(t,e){var n=(e=e||window).XMLHttpRequest,r=!0,o=function(){for(var t=new n,e=0;e<wu.length;++e){var r="on"+wu[e];void 0===t[r]&&(t[r]=null)}for(var o in t){var s="";try{s=typeof t[o]}catch(t){}"function"===s?this[o]=u(o):o!==xu&&Object.defineProperty(this,o,{get:i(o),set:a(o),enumerable:!0})}var c=this;t.getProxy=function(){return c},this[xu]=t};function i(e){return function(){var n=this[xu][e];if(r){var o=this.hasOwnProperty(e+"_")?this[e+"_"]:n,i=(t[e]||{}).getter;return i&&i(o,this)||o}return n}}function a(e){return function(n){var o=this[xu];if(r){var i=this,a=t[e];if("on"===e.substring(0,2)&&"function"==typeof n)i[e+"_"]=n,o[e]=function(r){r=Eu(r,i),t[e]&&t[e].call(i,o,r)||n.call(i,r)};else{var u=(a||{}).setter;n=u&&u(n,i)||n,this[e+"_"]=n;try{o[e]=n}catch(t){}}}else o[e]=n}}function u(e){return function(){var n=[].slice.call(arguments);if(t[e]&&r){var o=t[e].call(this,n,this[xu]);if(o)return o}return this[xu][e].apply(this[xu],n)}}return(o.prototype=n.prototype).constructor=o,e.XMLHttpRequest=o,Object.assign(e.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),{originXhr:n,unHook:function(){r=!1,e.XMLHttpRequest===o&&(e.XMLHttpRequest=n,o.prototype.constructor=n,n=void 0)}}}({onload:s,onloadend:s,onerror:c(Ou),ontimeout:c(Su),onabort:c(Au),onreadystatechange:function(t){return l(t,this)},open:function(t,e){var r=this,o=e.config={headers:{}};o.method=t[0],o.url=t[1],o.async=t[2],o.user=t[3],o.password=t[4],o.xhr=e;var i="on"+ju;if(e[i]||(e[i]=function(){return l(e,r)}),n)return!0},send:function(t,e){var r=e.config;if(r.withCredentials=e.withCredentials,r.body=t[0],n){var o=function(){n(r,new Ru(e))};return!1===r.async?o():setTimeout(o),!0}},setRequestHeader:function(t,e){if(e.config.headers[t[0].toLowerCase()]=t[1],n)return!0},addEventListener:function(t,e){var n=this;if(-1!==wu.indexOf(t[0])){var r=t[1];return zu(e).addEventListener(t[0],(function(e){var o=Eu(e,n);o.type=t[0],o.isTrusted=!0,r.call(n,o)})),!0}},getAllResponseHeaders:function(t,e){var n=e.resHeader;if(n){var r="";for(var o in n)r+=o+": "+n[o]+"\r\n";return r}},getResponseHeader:function(t,e){var n=e.resHeader;if(n)return n[(t[0]||"").toLowerCase()]}},e),f=d.originXhr,h=d.unHook;return{originXhr:f,unProxy:h}}(t,e=e||window)}function zu(t){return t.watcher||(t.watcher=document.createElement("a"))}function Cu(t,e){var n,r=t.getProxy(),o="on"+e+"_",i=Eu({type:e},r);r[o]&&r[o](i),"function"==typeof Event?n=new Event(e,{bubbles:!1}):(n=document.createEvent("Event")).initEvent(e,!1,!0),zu(t).dispatchEvent(n)}function Nu(t){this.xhr=t,this.xhrProxy=t.getProxy()}function Pu(t){function e(t){Nu.call(this,t)}return e[Lu]=Object.create(Nu[Lu]),e[Lu].next=t,e}Nu[Lu]=Object.create({resolve:function(t){var e=this.xhrProxy,n=this.xhr;e.readyState=4,n.resHeader=t.headers,e.response=e.responseText=t.response,e.statusText=t.statusText,e.status=t.status,Cu(n,ju),Cu(n,ku),Cu(n,Tu)},reject:function(t){this.xhrProxy.status=0,Cu(this.xhr,t.type),Cu(this.xhr,Tu)}});var Ru=Pu((function(t){var e=this.xhr;for(var n in t=t||e.config,e.withCredentials=t.withCredentials,e.open(t.method,t.url,!1!==t.async,t.user,t.password),t.headers)e.setRequestHeader(n,t.headers[n]);e.send(t.body)})),Mu=Pu((function(t){this.resolve(t)})),Du=Pu((function(t){this.reject(t)}));var Uu={name:"request-plugin",install:function(e){var r=e.hooks,i=e.extend,a=e.report,u=a.upload,s=a.bucketUpload;a.beaconUpload,r.init((function(e){var r=function(t){var n,r,o;if(Mo.isModuleEnabled("request")&&("string"!=typeof(null==t||null==(n=t.extra)?void 0:n.h)||null!=t&&null!=(r=t.extra)&&null!=(r=r.h)&&r.includes(We))&&(e.disableGlobalRequestProxy||!e.name)){var i=Mo.isGlobalApi(null==t||null==(o=t.extra)?void 0:o.r);e.name||!i?u(t):console.debug("[api:global]:",t)}};du((function(t,n){var r;if((e.disableGlobalResourceProxy||!e.name)&&(Mo.isModuleEnabled("request")&&Array.isArray(null==n||null==(r=n.extra)?void 0:r.resource))){var o;if(n.extra.resource=n.extra.resource.filter((function(t){var n,r,o="img"===(null==t?void 0:t.initiatorType);if("fetch"===(null==t?void 0:t.initiatorType)||"xmlhttprequest"===(null==t?void 0:t.initiatorType))return!!(null!=t&&null!=(n=t.url)&&n.includes("api2")||null!=t&&null!=(r=t.url)&&r.includes("/x-api/")||au(null==t?void 0:t.url,null==e?void 0:e.traceWhiteList));if(!o&&"string"==typeof(null==t?void 0:t.url)&&!t.url.includes(We))return!1;var i=Mo.isGlobalApi(null==t?void 0:t.url);return!(!e.name&&i)||(console.debug("[api:global]:",t),!1)})),0===(null==(o=n.extra)||null==(o=o.resource)?void 0:o.length))return;s(t,n)}}),e.disableGlobalResourceProxy),e.disableGlobalRequestProxy||(function(t,e){try{Iu({onRequest:function(t,n){var r=t.url,i=Za(r),a=nu(r,i,e);t.headers="[object Object]"===Object.prototype.toString.call(t.headers)?o({},t.headers,a):a,t.startTime=Date.now(),t.traceparent=i,au(t.url,null==e?void 0:e.blockList)?n.resolve({config:t,status:200,headers:{"content-type":"text/text"},response:""}):n.next(t)},onError:function(e,n){var r,o=Date.now(),i=e.config.startTime,a=null==e||null==(r=e.config)?void 0:r.traceparent;bu(t,{type:fu.AJAX,traceparent:a,url:e.config.url,xhrError:e,status:-1,statusText:"",startTime:i,endTime:o}),n.next(e)},onResponse:function(n,r){var o,i,a=Date.now(),u=n.config.startTime,s=null==n||null==(o=n.config)?void 0:o.traceparent;_u(t,e,{type:fu.AJAX,traceparent:s,url:n.config.url,xhrResponse:n,startTime:u,endTime:a,server:(null==n||null==(i=n.headers)||null==i.get?void 0:i.get("Server"))||""}),r.next(n)}})}catch(t){console.error(t,"request error")}}(r,e),function(e,r){try{var i=window.fetch;window.fetch=function(){var a=n(t().mark((function n(a,u){var s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===u&&(u={}),s=String(a instanceof Request?a.url:a),c=Za(s),l=nu(s,c,r),a instanceof Request?Object.keys(l).forEach((function(t){return a.headers.append(t,l[t])})):u.headers="[object Object]"===Object.prototype.toString.call(u.headers)?o({},u.headers,l):l,d=Date.now(),!au(s,null==r?void 0:r.blockList)){t.next=8;break}return t.abrupt("return",Promise.resolve({}));case 8:return t.abrupt("return",new Promise((function(t,n){i(a,u).then((function(n){var o,i=Date.now();_u(e,r,{type:fu.FETCH,traceparent:c,url:s,fetchResponse:{res:n,input:a,init:u},startTime:d,endTime:i,server:(null==n||null==(o=n.headers)||null==o.get?void 0:o.get("Server"))||""}),t(n)})).catch((function(t){var r=Date.now(),o=eu(t);bu(e,{type:fu.FETCH,traceparent:c,url:s,fetchError:{err:t,input:a,init:u},startTime:d,endTime:r,code:null==o?void 0:o.code,status:(null==o?void 0:o.status)||-1,statusText:null==o?void 0:o.statusText,path:null==o?void 0:o.path,msg:null==o?void 0:o.msg,message:null==o?void 0:o.message}),n(t)}))})));case 9:case"end":return t.stop()}}),n)})));return function(t,e){return a.apply(this,arguments)}}()}catch(t){console.error(t,"request error")}}(r,e)),i("request",{parseFetchError:eu,getTraceparent:Za,getHeaders:function(t,n){return nu(t,n,e)},errorHooks:function(t){bu(r,t)},successHooks:function(t){_u(r,e,t)}}),i("ws",{reportWsOpen:function(t,e){return function(t,e,n){var r={type:"custom",extra:{t:"monitor@ws_open",d:n-e,ext:{startDate:e,endDate:n}}};t(r),$e&&console.debug("[ws:open]",n-e,r)}(r,t,e)},reportWsClose:function(t,e){return function(t,e,n){var r=n-e,o={type:"custom",extra:{t:"monitor@ws_close",d:r,ext:{startDate:e,endDate:n,ratio:window.wsInitTime>0?(r-window.wsInitTime)/r:0}}};t(o),window.wsInitTime=0,$e&&console.debug("[ws:close]",r,o)}(r,t,e)}}),Mo.getConfig(e)}))}},Bu=function(t){return t[t.length-1]},Hu=function(t){return t.replace(/\\/g,"/")},Fu=Hu("")+"/",qu=function(t){function e(){var e;return(e=t.call(this)||this).errorInfo="",e}i(e,t);var n=e.prototype;return n.parse=function(t,e){if(void 0===e&&(e=0),this.errorInfo="","string"==typeof t){var n=this.rawParse(t).slice(e).map(this.extractEntryMetadata),r=this.errorInfo.split(":"),o=r[0],i=r[1];return{stackList:n,errorInfo:this.errorInfo,type:o,value:i}}var a=this.errorInfo.split(":"),u=a[0],s=a[1];return{stackList:[],errorInfo:this.errorInfo,type:u,value:s}},n.extractEntryMetadata=function(t){var n=e.relativePath(t.file||"");return Object.assign(t,{calleeShort:t.calleeShort||Bu((t.callee||"").split(".")),fileShort:e.shortenPath(n),fileName:Bu((t.file||"").split("/"))})},e.shortenPath=function(t){return t.replace(/^node_modules\//,"").replace(/^webpack\/bootstrap\//,"")},e.relativePath=function(t){return t.replace(Fu,"").replace(/^.*\:\/\/?\/?/,"")},e.isThirdParty=function(t){return"~"===t[0]||"/"===t[0]||0===t.indexOf("node_modules")||0===t.indexOf("webpack/bootstrap")},n.rawParse=function(t){var e=(t||"").split("\n");return e[0]&&(this.errorInfo=e[0]),e.map((function(t){var e,n,r,o,i=[];if((r=(t=t.trim()).match(/at (.+) \((.+)\)/))||(r=t.match(/(.*)@(.*)/)))e=r[1],n="native"===r[2],i=(r[2].match(/(.*):(.+):(.+)/)||[]).slice(1);else{if(!(o=t.match(/^(at\s+)*(.+):([0-9]+):([0-9]+)/)))return;i=o.slice(2)}e&&!i[0]&&("Array"===e.split(".")[0]&&(n=!0));return{callee:e||"",native:n||!1,file:Hu(i[0]||""),line:parseInt(i[1]||"",10)||void 0,column:parseInt(i[2]||"",10)||void 0}})).filter((function(t){return void 0!==t&&""!==t.file&&!t.file.includes("app-cache-vue")}))},e}(c(Array)),Gu=function(){function t(t){this.u=t,this.initOnerror(),this.initOnunhandledrejection(),this.initAddEventListener(),this.initConsole()}var e=t.prototype;return e.upload=function(t){var e;try{var n,r=(null==(n=t.newException)||null==(n=n.values)||null==(n=n[0])?void 0:n.value)||"",i=t.message||"",a=p(t.newException)||"";e=new Wo(""+i+r+a).getExtra()}catch(t){console.log(t)}this.u(o({},t,{type:"event",extra:e}))},e.initOnerror=function(){var t=new qu,e=this,n=window.onerror;window.onerror=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n&&n.apply(void 0,o);var a=o[0];o[1],o[2],o[3];var u=o[4],s=t.parse(null==u?void 0:u.stack);s.type;var c=s.value,l=s.errorInfo,d=s.stackList.map((function(t){return{filename:t.file,function:t.callee,in_app:!0,lineno:t.line,colno:t.column}}));if(![l,a,c].includes("Failed to fetch")){var f={message:l||a,newException:{values:[{mechanism:{handled:!1,type:"onerror"},stacktrace:{frames:d},type:c||a,value:c}]}};e.upload(f)}}},e.initOnunhandledrejection=function(){var t=this,e=new qu,n=window.onunhandledrejection;window.onunhandledrejection=function(r){n&&n.call(window,r);var o=r.reason,i=o instanceof Error?o.message:o,a=e.parse(null==o?void 0:o.stack),u=a.type,s=a.value,c=a.stackList,l=a.errorInfo;if(![i,u].includes("Failed to fetch")){var d=c.map((function(t){return{filename:t.file,function:t.callee,in_app:!0,lineno:t.line,colno:t.column}})),f={message:u||l||"UnhandledRejection",newException:{values:[{mechanism:{handled:!1,synthetic:!0,type:"onunhandledrejection"},stacktrace:{frames:d},type:u||"UnhandledRejection",value:s||"Non-Error promise rejection "+p(i)}]}};t.upload(f)}}},e.initConsole=function(){var t=window.console.error,e=this,n=new qu;window.console.error=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t.apply(window,o);var a=[],u="onConsoleError";if(Array.prototype.slice.apply(o).forEach((function(t){if(null!=t&&t.stack){var e=t instanceof Error?t.message:t,r=n.parse(null==t?void 0:t.stack),o=r.type,i=r.value,s=r.stackList,c=r.errorInfo;u+=c||o;var l=s.map((function(t){return{filename:t.file,function:t.callee,in_app:!0,lineno:t.line,colno:t.column}}));"Failed to fetch"!==e&&a.push({mechanism:{handled:!1,type:"onConsoleError"},stacktrace:{frames:l},type:o,value:e||i})}else u+=p(t)||"onConsoleError",a.push({mechanism:{handled:!1,type:"onConsoleError"},type:"onConsoleError",value:p(t)})})),a.length>0){var s={message:u,newException:{values:a}};e.upload(s)}}},e.initAddEventListener=function(){var t=this;window.addEventListener("error",(function(e){var n,r=e.target||e.srcElement;if(!(r instanceof HTMLScriptElement||r instanceof HTMLLinkElement||r instanceof HTMLImageElement))return!1;n=r instanceof HTMLLinkElement?r.href:r.src;var o=(r.tagName||"")+"_ERROR",i={message:o,newException:{values:[{mechanism:{handled:!1,type:o},type:o,value:n}]}};t.upload(i)}),!0)},t}(),Wu=[],$u={},Ju={name:"js-error-plugin",install:function(t){var e=t.report,n=e.upload;e.beaconUpload;var r=t.getConfig;new Gu((function(t){var e,o=r().ignoreErrors;if(Mo.isModuleEnabled("jsError")){if(Array.isArray(o))if(o.some((function(e){var n;return"string"==typeof(null==t?void 0:t.message)&&(null==t||null==(n=t.message)?void 0:n.includes(e))})))return;var i=(null==t?void 0:t.message)+" "+(null==t||null==(e=t.extra)?void 0:e.t);if(!Wu.some((function(t){return i.includes(t)}))){var a=(new Date).toISOString().split(":");a.pop();var u=a.join(":"),s=$u[u]||0;s>=20||($u[u]=s+1,$e&&console.debug("[error]",t),n(t))}}}))}},Xu=function(){};function Vu(){return Xu}function Yu(t){return t.reverse().filter((function(t){return t!==document&&t!==window})).map((function(t){return t.id?t.nodeName.toLowerCase()+"#"+t.id:t.className&&"string"==typeof t.className?t.nodeName.toLowerCase()+"."+t.className.split(" ").join("."):t.nodeName.toLowerCase()})).join(" ")}["click","touchstart","mousedown","keydown","mouseover"].forEach((function(t){document.addEventListener(t,(function(t){Xu=t}),{capture:!0,passive:!0})}));var Ku={name:"long-task-plugin",install:function(t){var e=t.report.beaconUpload;PerformanceObserver&&new PerformanceObserver((function(t){t.getEntries().forEach((function(t){if(t.duration>1e3){var n=Vu(),r=n?function(t){if(Array.isArray(t))return Yu(t);for(var e=[];t;)e.push(t),t=t.parentNode;return Yu(e)}(n.path||n.target):"";requestIdleCallback((function(){if(Mo.isModuleEnabled("longTask")){var o=p(null==t?void 0:t.attribution);e({type:"custom",extra:{t:"LONG_TASK",ext:{kind:"experience",type:"longTask",name:t.name,info:o,eventType:n?n.type:"",duration:t.duration,startTime:t.startTime,selector:r}}})}}))}}))})).observe({entryTypes:["longtask"]})}},Qu=function(){return cn.Date.now()},Zu=Math.max,ts=Math.min;function es(t,e,n){var r,o,i,a,u,s,c=0,l=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,i=o;return r=o=void 0,c=e,a=t.apply(i,n)}function p(t){var n=t-s;return void 0===s||n>=e||n<0||d&&t-c>=i}function v(){var t=Qu();if(p(t))return g(t);u=setTimeout(v,function(t){var n=e-(t-s);return d?ts(n,i-(t-c)):n}(t))}function g(t){return u=void 0,f&&r?h(t):(r=o=void 0,a)}function m(){var t=Qu(),n=p(t);if(r=arguments,o=this,s=t,n){if(void 0===u)return function(t){return c=t,u=setTimeout(v,e),l?h(t):a}(s);if(d)return clearTimeout(u),u=setTimeout(v,e),h(s)}return void 0===u&&(u=setTimeout(v,e)),a}return e=Fa(e)||0,bn(n)&&(l=!!n.leading,i=(d="maxWait"in n)?Zu(Fa(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==u&&clearTimeout(u),c=0,r=s=o=u=void 0},m.flush=function(){return void 0===u?a:g(Qu())},m}var ns=function(){return ai[oi.Empty].filter((function(t){return""===t.innerText&&!li(t)}))},rs=function(t){function e(e){var n;return(n=t.call(this,e,bi)||this).collect=function(){var t=ns(),e=t.map((function(t){return o({},hi.getDomInfo(t),{detectType:oi.Empty})}));(null==t?void 0:t.length)>0&&(n.reportInBatch(e),$e&&console.debug("[empty]",t,e))},n.detect=function(){ui(document.body,oi.Empty),n.run()},n.run=si(n.collect,1500,5e3),n}return i(e,t),e}(hi),os=new WeakMap,is=function(){var t=ai[oi.Hidden].filter((function(t){var e=function(t){var e=t.getBoundingClientRect();e.width,e.height;var n=window,r=n.innerWidth,o=n.innerHeight,i=Math.max(0,e.left),a=Math.max(0,e.top),u=Math.min(r,e.right),s=Math.min(o,e.bottom);return{left:i,top:a,right:u,bottom:s,width:u-i,height:s-a}}(t);if(e.width>0&&e.height>0){var n=function(t,e){void 0===e&&(e=6);for(var n=t.width,r=t.height,o=[],i=Math.random(),a=Math.floor(n/e),u=Math.floor(r/e),s=i*a,c=i*u,l=0;l+s<n;l+=a)for(var d=0;d+c<r;d+=u)o.push({x:t.left+l+s,y:t.top+d+c});return o}(e).some((function(e){var n=document.elementFromPoint(e.x,e.y),r=!di(n,t);return r&&os.set(t,n),r}));return n}return!1}));return t},as=function(t){function e(e){var n;return(n=t.call(this,e,xi)||this).collect=function(){var t=is(),e=t.map((function(t){var e=hi.getDomInfo(t),n=os.get(t);return o({},e,n?hi.getDom2Info(n):{},{detectType:oi.Hidden})}));(null==t?void 0:t.length)>0&&(n.reportInBatch(e),$e&&console.debug("[hidden]",t,e))},n.detect=function(){ui(document.body,oi.Hidden),n.run()},n.run=si(n.collect,1500,5e3),n}return i(e,t),e}(hi),us=new WeakMap,ss=new WeakMap,cs=function(t){function e(e){var n;return(n=t.call(this,e,wi)||this).detect=function(){ui(document.body,oi.Changed);var t=ai[oi.Changed].filter((function(t){var e,n=(null==(e=t.dataset)?void 0:e.freeze)||"innerText",r=us.get(t);if(n){var o,i=null==(o=t[n])?void 0:o.trim();return us.set(t,i),ss.set(t,{currentValue:i,oldValue:r}),!!r&&r!==i}return!1}))||[],e=t.map((function(t){return o({},hi.getDomInfo(t),ss.get(t),{detectType:oi.Changed})}));(null==t?void 0:t.length)>0&&(n.reportInBatch(e),$e&&console.debug("[changed]",t,e))},n}return i(e,t),e}(hi),ls=function(t){function e(e,n){var r;return(r=t.call(this,e,Ei)||this).reported=!1,r.setPaintUpload=function(t){r.paintUpload=t},r.mark=function(){var t,e=ai[oi.Paint]||[];(t=r.count,!!(performance.getEntriesByType("mark")||[]).find((function(e){return e.name===""+t})))||performance.mark(""+r.count),e.forEach((function(t){var e;(null==t||null==(e=t.dataset)?void 0:e.mut)||t.getAttribute("data-mut")||(t.dataset.mut=""+r.count)})),r.count++},r.register=function(){window.addEventListener("click",(function(){r.collect(!0)}),!1),window.addEventListener("scroll",(function(){r.collect(!0)}),!1)},r.reportPaint=function(t){r.report(t);var e=ma({extra:{domPath:t.domPath,paints:{newLcp:t.value},rating:{newLcp:"normal"}}});null==r.paintUpload||r.paintUpload(e),$e&&console.debug("[paint]",t,e)},r.collect=function(t){if(!r.reported||!t){var e,n,i=(e=ai[oi.Paint],n=fi(e),{nodes:e,node:o({},null!=n&&n.node?hi.getDomInfo(null==n?void 0:n.node):{},{value:null==n?void 0:n.value,detectType:oi.Paint})}).node;(null==i?void 0:i.value)>0&&(r.reportPaint(i),t&&(r.reported=!0))}},r.detect=function(){ui(document.body,oi.Paint);try{r.mark()}catch(t){console.error(t)}},n&&(r.paintUpload=n),r.count=0,r.register(),r}return i(e,t),e}(hi),ds=function(){function t(t){this.reportFn=t,this.checkFrequentRefresh()}return t.prototype.checkFrequentRefresh=function(){var t=Number(localStorage.getItem("lastPageLoadedTime"))||0,e=localStorage.getItem("lastPageLoadedUrl")||"",n=Number(localStorage.getItem("isOpenFreshToast"))||0,r=Number(localStorage.getItem("freshThreshold"))||2e3,o=Number(localStorage.getItem("freshMinThreshold"))||1e3;if(n&&!Be){var i=Date.now(),a=encodeURIComponent(window.location.href);localStorage.setItem("lastPageLoadedTime",i+""),localStorage.setItem("lastPageLoadedUrl",a),t>0&&a===e&&i-t<=r&&i-t>o?(localStorage.setItem("needShowThreshToast","1"),this.reportFn({type:"custom",extra:{t:"refresh_tip",toast:n,threshold:r}}),$e&&console.debug("[refresh]",{t:"refresh_tip",toast:n,threshold:r})):localStorage.setItem("needShowThreshToast","0")}},t}(),fs=function(t){"undefined"!=typeof window&&"undefined"!=typeof document&&window.addEventListener("load",(function(){if(window.innerWidth<840&&(null==(r=document)||null==(r=r.documentElement)?void 0:r.scrollWidth)>window.innerWidth)try{var e,n={type:"custom",extra:{H5AdaptiveError:1,clientWidth:window.innerWidth,scrollWidth:null==(e=document)||null==(e=e.documentElement)?void 0:e.scrollWidth}};t(n),$e&&console.debug("[h5:adapt]",n)}catch(t){console.error("H5AdaptiveError log failed in Monitor:",t)}var r}))},hs={name:"detect-plugin",install:function(t){var e=t.extend,n=t.report,r=n.upload,i=n.bucketUpload,a=t.hooks,u=t.getConfig,s=function(t){Mo.isModuleEnabled("detect")&&r(t)},c=new rs(s),l=new as(s),d=new cs(s),f=new ls(s),h=new ds((function(t){var e=u();e.name||e.disableGlobalRequestProxy||e.disableGlobalResourceProxy||r(t)})),p=es((function(){c.detect(),l.detect(),d.detect()}),300);new MutationObserver((function(){f.detect()})).observe(document.documentElement,{subtree:!0,childList:!0}),window.addEventListener("DOMContentLoaded",(function(){p(),new MutationObserver((function(){p()})).observe(document.querySelector("body"),{subtree:!0,attributes:!0,characterData:!0,childList:!0})})),fs(r),e("detect",{empty:c,hidden:l,changed:d,paint:f,refresh:h}),a.init((function(t){f.setPaintUpload((function(e){if(Mo.isModuleEnabled("detect")){var n=wa(t);i(xa,o({},e,{extra:o({},(null==e?void 0:e.extra)||{},{firstVisit:n})}))}}))}))}},ps=function(){for(var t=document.querySelectorAll("script"),e=/monitor/,n=/.*(?:\?|&)id=(\d+).*/,r=0,o=t.length;r<o;r++){var i=t[r].src;if(e.test(i))return n.test(i)?i.replace(n,"$1"):window.appId||""}return window.appId||""}(),vs=new xo({appId:ps});return Ve.emit(Ye.MONITOR_READY),vs.use(zo).use(ri).use(Ea).use(Uu).use(Ju).use(Ku).use(hs),new Proxy(vs,{get:function(t,e){if(void 0===t[e]){var n=t.report[e];if(void 0===n)return;return"function"==typeof n?n.bind(t.report):n}return"extend"===e?function(e,n){if("function"!=typeof n)throw new Error("extend 类型应该为 Function");return t.extend(e,n)}:t[e]}})}));
//# sourceMappingURL=monitor.latest.js.map
